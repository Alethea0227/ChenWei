<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="tbl_stock_item">
  <resultMap id="BaseResultMap" type="com.i2shopping.i2work.operation.core.stock.model.StockItem">
    <result column="STOCK_ITEM_ID" property="stockItemId" jdbcType="VARCHAR"/>
    <result column="EMPLOYEE_ID" property="employeeId" jdbcType="VARCHAR"/>
    <result column="STOCK_ITEM_DATE" property="stockItemDate" jdbcType="TIMESTAMP"/>
    <result column="EMP_INTEGRAL" property="empIntegral" jdbcType="INTEGER"/>
    <result column="STOCK_TYPE" property="stockType" jdbcType="CHAR"/>
    <result column="STOCK_REASON" property="stockReason" jdbcType="VARCHAR"/>
  </resultMap>
  <resultMap id="ResultMapExt" extends="BaseResultMap" type="com.i2shopping.i2work.operation.core.stock.model.StockItem">
    <result column="EMPLOYEE_NAME" property="employeeName" jdbcType="VARCHAR"/>
  </resultMap>
  <sql id="Criteria_Where_Clause"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Jul 10 17:40:43 CST 2015.
    -->  
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate"> 
      <if test="oredCriteria[].valid!= null and oredCriteria[].valid == 'true'.toString()">( 
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and">$oredCriteria[].criteriaWithoutValue[]$</iterate>  
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and">$oredCriteria[].criteriaWithSingleValue[].condition$ #{oredCriteria[].criteriaWithSingleValue[].value}</iterate>  
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and">$oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction=",">#{oredCriteria[].criteriaWithListValue[].values[]}</iterate> 
        </iterate>  
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and">$oredCriteria[].criteriaWithBetweenValue[].condition$ #{oredCriteria[].criteriaWithBetweenValue[].values[0]} and #{oredCriteria[].criteriaWithBetweenValue[].values[1]}</iterate> )
      </if> 
    </iterate> 
  </sql>
  <sql id="tbl_stock_item.stock_Where_Clause"> 
    <if test="stockItemId != null and stockItemId != ''">and tbl_stock_item.STOCK_ITEM_ID = #{stockItemId:VARCHAR}</if>  
    <if test="employeeId != null and employeeId != ''">and tbl_stock_item.EMPLOYEE_ID = #{employeeId:VARCHAR}</if>  
    <if test="stockItemDate != null and stockItemDate != ''">and tbl_stock_item.STOCK_ITEM_DATE = #{stockItemDate:TIMESTAMP}</if>  
    <if test="empIntegral != null and empIntegral != ''">and tbl_stock_item.EMP_INTEGRAL = #{empIntegral:INTEGER}</if>  
    <if test="stockType != null and stockType != ''">and tbl_stock_item.STOCK_TYPE = #{stockType:VARCHAR}</if>  
    <if test="stockReason != null and stockReason != ''">and tbl_stock_item.STOCK_REASON = #{stockReason:VARCHAR}</if> order by STOCK_ITEM_DATE desc;
  </sql>
  <select id="selectByStockItem" resultMap="BaseResultMap" parameterType="com.i2shopping.i2work.operation.core.stock.model.StockItem">select STOCK_ITEM_ID, EMPLOYEE_ID, STOCK_ITEM_DATE, EMP_INTEGRAL, STOCK_TYPE, STOCK_REASON from tbl_stock_item
    <trim prefix="where"> 
      <include refid="tbl_stock_item.stock_Where_Clause"/> 
    </trim> 
  </select>
  <select id="selectByCriteria" resultMap="BaseResultMap" parameterType="com.i2shopping.i2work.operation.core.stock.model.StockItemCriteria"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Jul 10 17:40:43 CST 2015.
    --> select STOCK_ITEM_ID, EMPLOYEE_ID, STOCK_ITEM_DATE, EMP_INTEGRAL, STOCK_TYPE, STOCK_REASON from tbl_stock_item
    <if test="_parameter != null"> 
      <include refid="tbl_stock_item.Criteria_Where_Clause"/>  
      <if test="orderByClause != null">order by ${orderByClause}</if> 
    </if> 
  </select>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="com.i2shopping.i2work.operation.core.stock.model.StockItem"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Jul 10 17:40:43 CST 2015.
    --> select STOCK_ITEM_ID, EMPLOYEE_ID, STOCK_ITEM_DATE, EMP_INTEGRAL, STOCK_TYPE, STOCK_REASON from tbl_stock_item where STOCK_ITEM_ID = #{stockItemId:VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="com.i2shopping.i2work.operation.core.stock.model.StockItem"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Jul 10 17:40:43 CST 2015.
    --> delete from tbl_stock_item where STOCK_ITEM_ID = #{stockItemId:VARCHAR}
  </delete>
  <delete id="deleteByCriteria" parameterType="com.i2shopping.i2work.operation.core.stock.model.StockItemCriteria"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Jul 10 17:40:43 CST 2015.
    --> delete from tbl_stock_item 
    <include refid="tbl_stock_item.Criteria_Where_Clause"/> 
  </delete>
  <insert id="insert" parameterType="com.i2shopping.i2work.operation.core.stock.model.StockItem"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Jul 10 17:40:43 CST 2015.
    --> insert into tbl_stock_item (STOCK_ITEM_ID, EMPLOYEE_ID, STOCK_ITEM_DATE, EMP_INTEGRAL, STOCK_TYPE, STOCK_REASON) values (#{stockItemId:VARCHAR}, #{employeeId:VARCHAR}, #{stockItemDate:TIMESTAMP}, #{empIntegral:INTEGER}, #{stockType:CHAR}, #{stockReason:VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.i2shopping.i2work.operation.core.stock.model.StockItem"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Jul 10 17:40:43 CST 2015.
    --> insert into tbl_stock_item 
    <trim prefix="("> 
      <if test="stockItemId != null">STOCK_ITEM_ID ,</if>  
      <if test="employeeId != null">EMPLOYEE_ID ,</if>  
      <if test="stockItemDate != null">STOCK_ITEM_DATE ,</if>  
      <if test="empIntegral != null">EMP_INTEGRAL ,</if>  
      <if test="stockType != null">STOCK_TYPE ,</if>  
      <if test="stockReason != null">STOCK_REASON ,</if> )
    </trim> values 
    <trim prefix="("> 
      <if test="stockItemId != null">#{stockItemId:VARCHAR} ,</if>  
      <if test="employeeId != null">#{employeeId:VARCHAR} ,</if>  
      <if test="stockItemDate != null">#{stockItemDate:TIMESTAMP} ,</if>  
      <if test="empIntegral != null">#{empIntegral:INTEGER} ,</if>  
      <if test="stockType != null">#{stockType:CHAR} ,</if>  
      <if test="stockReason != null">#{stockReason:VARCHAR} ,</if> )
    </trim> 
  </insert>
  <select id="countByCriteria" parameterType="com.i2shopping.i2work.operation.core.stock.model.StockItemCriteria" resultType="java.lang.Integer"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Jul 10 17:40:43 CST 2015.
    --> select count(*) from tbl_stock_item 
    <include refid="tbl_stock_item.Criteria_Where_Clause"/> 
  </select>
  <update id="updateByCriteriaSelective"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Jul 10 17:40:43 CST 2015.
    --> update tbl_stock_item 
    <trim prefix="set"> 
      <if test="record.stockItemId != null">STOCK_ITEM_ID = #{record.stockItemId:VARCHAR} ,</if>  
      <if test="record.employeeId != null">EMPLOYEE_ID = #{record.employeeId:VARCHAR} ,</if>  
      <if test="record.stockItemDate != null">STOCK_ITEM_DATE = #{record.stockItemDate:TIMESTAMP} ,</if>  
      <if test="record.empIntegral != null">EMP_INTEGRAL = #{record.empIntegral:INTEGER} ,</if>  
      <if test="record.stockType != null">STOCK_TYPE = #{record.stockType:CHAR} ,</if>  
      <if test="record.stockReason != null">STOCK_REASON = #{record.stockReason:VARCHAR} ,</if> 
    </trim>  
    <if test="_parameter != null"> 
      <include refid="tbl_stock_item.Criteria_Where_Clause"/> 
    </if> 
  </update>
  <update id="updateByCriteria"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Jul 10 17:40:43 CST 2015.
    --> update tbl_stock_item set STOCK_ITEM_ID = #{record.stockItemId:VARCHAR}, EMPLOYEE_ID = #{record.employeeId:VARCHAR}, STOCK_ITEM_DATE = #{record.stockItemDate:TIMESTAMP}, EMP_INTEGRAL = #{record.empIntegral:INTEGER}, STOCK_TYPE = #{record.stockType:CHAR}, STOCK_REASON = #{record.stockReason:VARCHAR}
    <if test="_parameter != null"> 
      <include refid="tbl_stock_item.Criteria_Where_Clause"/> 
    </if> 
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.i2shopping.i2work.operation.core.stock.model.StockItem"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Jul 10 17:40:43 CST 2015.
    --> update tbl_stock_item 
    <trim prefix="set"> 
      <if test="employeeId != null">EMPLOYEE_ID = #{employeeId:VARCHAR} ,</if>  
      <if test="stockItemDate != null">STOCK_ITEM_DATE = #{stockItemDate:TIMESTAMP} ,</if>  
      <if test="empIntegral != null">EMP_INTEGRAL = #{empIntegral:INTEGER} ,</if>  
      <if test="stockType != null">STOCK_TYPE = #{stockType:CHAR} ,</if>  
      <if test="stockReason != null">STOCK_REASON = #{stockReason:VARCHAR} ,</if> 
    </trim> where STOCK_ITEM_ID = #{stockItemId:VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.i2shopping.i2work.operation.core.stock.model.StockItem"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Jul 10 17:40:43 CST 2015.
    --> update tbl_stock_item set EMPLOYEE_ID = #{employeeId:VARCHAR}, STOCK_ITEM_DATE = #{stockItemDate:TIMESTAMP}, EMP_INTEGRAL = #{empIntegral:INTEGER}, STOCK_TYPE = #{stockType:CHAR}, STOCK_REASON = #{stockReason:VARCHAR} where STOCK_ITEM_ID = #{stockItemId:VARCHAR}
  </update>
  <sql id="stock_Item_Where_Clause"> 
    <if test="properties.employeeName != null and properties.employeeName != ''">and info.employee_name like concat('%', #{properties.employeeName:VARCHAR}, '%')</if>  
    <if test="properties.startTime != null and properties.startTime != ''">and date_format(item.STOCK_ITEM_DATE ,'%Y-%m-%d') &gt;= #{properties.startTime:VARCHAR}</if>  
    <if test="properties.endTime != null and properties.endTime != ''">and date_format(item.STOCK_ITEM_DATE ,'%Y-%m-%d') &lt;= #{properties.endTime:VARCHAR}</if> 
  </sql>
  <!-- 查询股权明细， -->
  <select id="selectStockItemByPage" parameterType="com.i2shopping.i2work.operation.core.stock.model.StockItem" resultMap="ResultMapExt">select item.*,info.employee_name from tbl_stock_item item , tbl_employee_info info where item.employee_id = info.employee_id 
    <include refid="tbl_stock_item.stock_Item_Where_Clause"/> order by item.STOCK_ITEM_DATE desc
  </select>
  <select id="countByStockItem" parameterType="com.i2shopping.i2work.operation.core.stock.model.StockItem" resultType="java.lang.Integer">select count(*) from tbl_stock_item item , tbl_employee_info info where item.employee_id = info.employee_id 
    <include refid="tbl_stock_item.stock_Item_Where_Clause"/> 
  </select>
  <select id="selectByStockItemId" parameterType="com.i2shopping.i2work.operation.core.stock.model.StockItem" resultType="com.i2shopping.i2work.operation.core.stock.model.StockItem">select item.STOCK_ITEM_ID as stockItemId, item.EMPLOYEE_ID as employeeId, item.STOCK_ITEM_DATE as stockItemDate, item.EMP_INTEGRAL as empIntegral, item.STOCK_TYPE as stockType, item.STOCK_REASON as stockReason,info.employee_name as employeeName from tbl_stock_item item , tbl_employee_info info where item.STOCK_ITEM_ID = #{stockItemId:VARCHAR} and item.employee_id = info.employee_id</select>
</mapper>
