<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="tbl_emp_organ_struct">
  <resultMap id="BaseResultMap" type="com.i2shopping.i2work.operation.core.employee.model.EmpOrganStruct">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jul 08 15:37:24 CST 2015.
    -->
    <result column="CAT_ID" property="catId" jdbcType="VARCHAR"/>
    <result column="EMPLOYEE_ID" property="employeeId" jdbcType="VARCHAR"/>
    <result column="PARENT_CAT_ID" property="parentCatId" jdbcType="VARCHAR"/>
    <result column="PARENT_EMPLOYEE_ID" property="parentEmployeeId" jdbcType="VARCHAR"/>
    <result column="GRADE" property="grade" jdbcType="INTEGER"/>
    <result column="COMPANY_ID" property="companyId" jdbcType="VARCHAR"/>
    <result column="APPROVE_PROXY_EMP" property="approveProxyEmp" jdbcType="VARCHAR"/>
  </resultMap>
  <resultMap id="ResultMapExt" extends="BaseResultMap" type="com.i2shopping.i2work.operation.core.employee.model.EmpOrganStruct">
    <association property="employeeInfo" select="tbl_employee_info_vo.selectByEmployeeIdForOther" column="EMPLOYEE_ID"/>
    <association property="parentEmployeeInfo" select="tbl_employee_info_vo.selectByEmployeeIdForOther" column="PARENT_EMPLOYEE_ID"/>
    <association property="proxyEmployeeInfo" select="tbl_employee_info_vo.selectByEmployeeIdForOther" column="APPROVE_PROXY_EMP"/>
  </resultMap>
  <sql id="organStruct_Where_clause"> 
    <if test="grade != null and grade != ''">and TBL_EMP_ORGAN_STRUCT.GRADE=#{grade:INTEGER}</if>  
    <if test="employeeId != null and employeeId != ''">and TBL_EMP_ORGAN_STRUCT.EMPLOYEE_ID=#{employeeId:VARCHAR}</if>  
    <if test="parentEmployeeId != null and parentEmployeeId != ''">and TBL_EMP_ORGAN_STRUCT.PARENT_EMPLOYEE_ID=#{parentEmployeeId:VARCHAR}</if>  
    <if test="catId != null and catId != ''">and TBL_EMP_ORGAN_STRUCT.CAT_ID=#{catId:VARCHAR}</if>  
    <if test="parentCatId != null and parentCatId != ''">and TBL_EMP_ORGAN_STRUCT.PARENT_CAT_ID=#{parentCatId:VARCHAR}</if>  
    <if test="companyId != null and companyId != ''">and TBL_EMP_ORGAN_STRUCT.COMPANY_ID=#{companyId:VARCHAR}</if> 
  </sql>
  <sql id="Criteria_Where_Clause"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jul 08 15:37:24 CST 2015.
    -->  
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate"> 
      <if test="oredCriteria[].valid!= null and oredCriteria[].valid == 'true'.toString()">( 
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and">$oredCriteria[].criteriaWithoutValue[]$</iterate>  
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and">$oredCriteria[].criteriaWithSingleValue[].condition$ #{oredCriteria[].criteriaWithSingleValue[].value}</iterate>  
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and">$oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction=",">#{oredCriteria[].criteriaWithListValue[].values[]}</iterate> 
        </iterate>  
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and">$oredCriteria[].criteriaWithBetweenValue[].condition$ #{oredCriteria[].criteriaWithBetweenValue[].values[0]} and #{oredCriteria[].criteriaWithBetweenValue[].values[1]}</iterate> )
      </if> 
    </iterate> 
  </sql>
  <select id="selectByCriteria" resultMap="BaseResultMap" parameterType="com.i2shopping.i2work.operation.core.employee.model.EmpOrganStructCriteria"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jul 08 15:37:24 CST 2015.
    --> select * from tbl_emp_organ_struct
    <if test="_parameter != null"> 
      <include refid="tbl_emp_organ_struct.Criteria_Where_Clause"/>  
      <if test="orderByClause != null">order by ${orderByClause}</if> 
    </if> 
  </select>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="com.i2shopping.i2work.operation.core.employee.model.EmpOrganStructKey"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jul 08 15:37:24 CST 2015.
    --> select * from tbl_emp_organ_struct where CAT_ID = #{catId:VARCHAR} and EMPLOYEE_ID = #{employeeId:VARCHAR} and PARENT_CAT_ID = #{parentCatId:VARCHAR}
  </select>
  <select id="selectByemployeeid" resultMap="ResultMapExt" parameterType="java.lang.String">select * from tbl_emp_organ_struct where EMPLOYEE_ID = #{employeeId:VARCHAR}</select>
  <!--组织架构 拖动员工时的数据库条件更新拖拽数据 -->
  <select id="getEmpOrganStructByParam" resultMap="BaseResultMap" parameterType="com.i2shopping.i2work.operation.core.employee.model.EmpOrganStruct">select * from tbl_emp_organ_struct os where os.CAT_ID = #{catId:VARCHAR} and os.COMPANY_ID=#{companyId:VARCHAR}</select>
  <!--组织架构 拖动员工时的数据库条件更新拖拽数据 -->
  <update id="drag" parameterType="com.i2shopping.i2work.operation.core.employee.model.EmpOrganStruct">update tbl_emp_organ_struct set CAT_ID=#{catId:VARCHAR}, PARENT_CAT_ID=#{parentCatId:VARCHAR}, COMPANY_ID=#{companyId:VARCHAR}, PARENT_EMPLOYEE_ID = #{parentEmployeeId:VARCHAR}, GRADE = #{grade:VARCHAR} where EMPLOYEE_ID=#{employeeId:VARCHAR}</update>
  <!--组织架构 拖动员工时的数据库条件查询 -->
  <select id="dragselect" resultType="com.i2shopping.i2work.operation.core.employee.model.EmpOrganStructEmployeeInfo" parameterType="java.lang.String">select COMPANY_ID,EMPLOYEE_ID from tbl_emp_organ_struct where CAT_ID=#{catId:VARCHAR}</select>
  <delete id="deleteByPrimaryKey" parameterType="com.i2shopping.i2work.operation.core.employee.model.EmpOrganStructKey"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jul 08 15:37:24 CST 2015.
    --> delete from tbl_emp_organ_struct where CAT_ID = #{catId:VARCHAR} and EMPLOYEE_ID = #{employeeId:VARCHAR} and PARENT_CAT_ID = #{parentCatId:VARCHAR}
  </delete>
  <delete id="deleteByCriteria" parameterType="com.i2shopping.i2work.operation.core.employee.model.EmpOrganStructCriteria"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jul 08 15:37:24 CST 2015.
    --> delete from tbl_emp_organ_struct 
    <include refid="tbl_emp_organ_struct.Criteria_Where_Clause"/> 
  </delete>
  <insert id="insert" parameterType="com.i2shopping.i2work.operation.core.employee.model.EmpOrganStruct"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jul 08 15:37:24 CST 2015.
    --> insert into tbl_emp_organ_struct (CAT_ID, EMPLOYEE_ID, PARENT_CAT_ID, PARENT_EMPLOYEE_ID, GRADE,COMPANY_ID,APPROVE_PROXY_EMP) values (#{catId:VARCHAR}, #{employeeId:VARCHAR}, #{parentCatId:VARCHAR}, #{parentEmployeeId:VARCHAR}, #{grade:INTEGER},#{companyId:VARCHAR},#{approveProxyEmp:VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.i2shopping.i2work.operation.core.employee.model.EmpOrganStruct"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jul 08 15:37:24 CST 2015.
    --> insert into tbl_emp_organ_struct 
    <trim prefix="("> 
      <if test="catId != null">CAT_ID ,</if>  
      <if test="employeeId != null">EMPLOYEE_ID ,</if>  
      <if test="parentCatId != null">PARENT_CAT_ID ,</if>  
      <if test="parentEmployeeId != null">PARENT_EMPLOYEE_ID ,</if>  
      <if test="grade != null">GRADE ,</if>  
      <if test="companyId != null">COMPANY_ID ,</if>  
      <if test="approveProxyEmp != null">APPROVE_PROXY_EMP ,</if> )
    </trim> values 
    <trim prefix="("> 
      <if test="catId != null">#{catId:VARCHAR} ,</if>  
      <if test="employeeId != null">#{employeeId:VARCHAR} ,</if>  
      <if test="parentCatId != null">#{parentCatId:VARCHAR} ,</if>  
      <if test="parentEmployeeId != null">#{parentEmployeeId:VARCHAR} ,</if>  
      <if test="grade != null">#{grade:INTEGER} ,</if>  
      <if test="companyId != null">#{companyId:VARCHAR} ,</if>  
      <if test="approveProxyEmp != null">#{approveProxyEmp:VARCHAR} ,</if> )
    </trim> 
  </insert>
  <select id="countByCriteria" parameterType="com.i2shopping.i2work.operation.core.employee.model.EmpOrganStructCriteria" resultType="java.lang.Integer"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jul 08 15:37:24 CST 2015.
    --> select count(*) from tbl_emp_organ_struct 
    <include refid="tbl_emp_organ_struct.Criteria_Where_Clause"/> 
  </select>
  <update id="updateByCriteriaSelective"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jul 08 15:37:24 CST 2015.
    --> update tbl_emp_organ_struct 
    <trim prefix="set"> 
      <if test="record.catId != null">CAT_ID = #{record.catId:VARCHAR} ,</if>  
      <if test="record.employeeId != null">EMPLOYEE_ID = #{record.employeeId:VARCHAR} ,</if>  
      <if test="record.parentCatId != null">PARENT_CAT_ID = #{record.parentCatId:VARCHAR} ,</if>  
      <if test="record.parentEmployeeId != null">PARENT_EMPLOYEE_ID = #{record.parentEmployeeId:VARCHAR} ,</if>  
      <if test="record.grade != null">GRADE = #{record.grade:INTEGER} ,</if>  
      <if test="record.companyId != null">COMPANY_ID = #{record.companyId:VARCHAR} ,</if>  
      <if test="record.approveProxyEmp != null">APPROVE_PROXY_EMP = #{record.approveProxyEmp:VARCHAR} ,</if> 
    </trim>  
    <if test="_parameter != null"> 
      <include refid="tbl_emp_organ_struct.Criteria_Where_Clause"/> 
    </if> 
  </update>
  <update id="updateByCriteria"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jul 08 15:37:24 CST 2015.
    --> update tbl_emp_organ_struct set CAT_ID = #{record.catId:VARCHAR}, EMPLOYEE_ID = #{record.employeeId:VARCHAR}, PARENT_CAT_ID = #{record.parentCatId:VARCHAR}, PARENT_EMPLOYEE_ID = #{record.parentEmployeeId:VARCHAR}, COMPANY_ID = #{record.companyId:VARCHAR}, GRADE = #{record.grade:INTEGER}, APPROVE_PROXY_EMP = #{record.approveProxyEmp:VARCHAR}
    <if test="_parameter != null"> 
      <include refid="tbl_emp_organ_struct.Criteria_Where_Clause"/> 
    </if> 
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.i2shopping.i2work.operation.core.employee.model.EmpOrganStruct"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jul 08 15:37:24 CST 2015.
    --> update tbl_emp_organ_struct 
    <trim prefix="set"> 
      <if test="parentEmployeeId != null">PARENT_EMPLOYEE_ID = #{parentEmployeeId:VARCHAR} ,</if>  
      <if test="grade != null">GRADE = #{grade:INTEGER} ,</if>  
      <if test="companyId != null">COMPANY_ID = #{companyId:VARCHAR} ,</if>  
      <if test="approveProxyEmp != null">APPROVE_PROXY_EMP = #{approveProxyEmp:VARCHAR} ,</if> 
    </trim> where CAT_ID = #{catId:VARCHAR} and EMPLOYEE_ID = #{employeeId:VARCHAR} and PARENT_CAT_ID = #{parentCatId:VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.i2shopping.i2work.operation.core.employee.model.EmpOrganStruct"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jul 08 15:37:24 CST 2015.
    --> update tbl_emp_organ_struct set PARENT_EMPLOYEE_ID = #{parentEmployeeId:VARCHAR}, GRADE = #{grade:INTEGER}, COMPANY_ID = #{companyId:VARCHAR}, APPROVE_PROXY_EMP = #{approveProxyEmp:VARCHAR} where CAT_ID = #{catId:VARCHAR} and EMPLOYEE_ID = #{employeeId:VARCHAR} and PARENT_CAT_ID = #{parentCatId:VARCHAR}
  </update>
  <select id="selectProjectMembers" resultMap="ResultMapExt" parameterType="com.i2shopping.i2work.operation.core.employee.model.EmpOrganStruct">select * from tbl_emp_organ_struct
    <trim prefix="where"> 
      <include refid="tbl_emp_organ_struct.organStruct_Where_clause"/> 
    </trim> 
  </select>
  <select id="selectByAllStructs" resultMap="ResultMapExt" parameterType="java.lang.String">SELECT * FROM tbl_emp_organ_struct WHERE CAT_ID !='0' and COMPANY_ID=#{value:VARCHAR} ORDER BY GRADE DESC ,CAT_ID</select>
  <select id="getAllStructs" resultMap="ResultMapExt" parameterType="com.i2shopping.i2work.operation.core.employee.model.EmpOrganStruct">SELECT * FROM tbl_emp_organ_struct WHERE substr(PARENT_CAT_ID,1,LENGTH(#{parentCatId:VARCHAR})) = #{parentCatId:VARCHAR} and COMPANY_ID=#{companyId:VARCHAR} ORDER BY GRADE DESC ,CAT_ID</select>
  <select id="selectByCatId" resultMap="ResultMapExt" parameterType="com.i2shopping.i2work.operation.core.employee.model.EmpOrganStruct">SELECT * FROM tbl_emp_organ_struct
    <trim prefix="where"> 
      <include refid="tbl_emp_organ_struct.organStruct_Where_clause"/> 
    </trim> 
  </select>
  <select id="countOrganStucts" resultType="java.lang.Integer" parameterType="com.i2shopping.i2work.operation.core.employee.model.EmpOrganStruct">SELECT COUNT(1) FROM tbl_emp_organ_struct
    <trim prefix="where"> 
      <include refid="tbl_emp_organ_struct.organStruct_Where_clause"/> 
    </trim> 
  </select>
  <select id="selectOrganStuctsByCatId" resultMap="ResultMapExt" parameterType="com.i2shopping.i2work.operation.core.employee.model.EmpOrganStruct">SELECT * FROM tbl_emp_organ_struct
    <trim prefix="where"> 
      <include refid="tbl_emp_organ_struct.organStruct_Where_clause"/> 
    </trim> 
  </select>
  <select id="selectByParentId" resultMap="BaseResultMap" parameterType="java.lang.String">SELECT * FROM tbl_emp_organ_struct WHERE PARENT_CAT_ID=#{value:VARCHAR} ORDER BY CAT_ID desc</select>
</mapper>
