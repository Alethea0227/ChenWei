<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="tbl_respond_content">
  <resultMap id="BaseResultMap" type="com.i2shopping.i2work.operation.core.respond.model.RespondContent">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    -->
    <result column="RESPOND_ID" property="respondId" jdbcType="VARCHAR"/>
    <result column="ORIGINAL_ID" property="originalId" jdbcType="VARCHAR"/>
    <result column="EMPLOYEE_ID" property="employeeId" jdbcType="VARCHAR"/>
    <result column="RESPOND_TIME" property="respondTime" jdbcType="TIMESTAMP"/>
    <result column="IS_ACCEPT" property="isAccept" jdbcType="CHAR"/>
    <result column="REWARD" property="reward" jdbcType="INTEGER"/>
  </resultMap>
  <resultMap id="ResultMapWithBLOBs" extends="tbl_respond_content.BaseResultMap" type="com.i2shopping.i2work.operation.core.respond.model.RespondContent">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    -->
    <result column="RESPOND_CONTENT" property="respondContent" jdbcType="VARCHAR"/>
    <association property="employeeInfo" column="EMPLOYEE_ID" select="tbl_employee_info_vo.selectByEmployeeId"/>
  </resultMap>
  <resultMap id="BaseResultMapEx" type="com.i2shopping.i2work.operation.core.respond.model.RespondContent">
    <result column="top" property="top" jdbcType="INTEGER"/>
    <result column="RESPOND_ID" property="respondId" jdbcType="VARCHAR"/>
  </resultMap>
  <sql id="Criteria_Where_Clause"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    -->  
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate"> 
      <if test="oredCriteria[].valid!= null and oredCriteria[].valid == 'true'.toString()">( 
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and">$oredCriteria[].criteriaWithoutValue[]$</iterate>  
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and">$oredCriteria[].criteriaWithSingleValue[].condition$ #{oredCriteria[].criteriaWithSingleValue[].value}</iterate>  
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and">$oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction=",">#{oredCriteria[].criteriaWithListValue[].values[]}</iterate> 
        </iterate>  
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and">$oredCriteria[].criteriaWithBetweenValue[].condition$ #{oredCriteria[].criteriaWithBetweenValue[].values[0]} and #{oredCriteria[].criteriaWithBetweenValue[].values[1]}</iterate> )
      </if> 
    </iterate> 
  </sql>
  <select id="selectByCriteriaWithBLOBs" resultMap="ResultMapWithBLOBs" parameterType="com.i2shopping.i2work.operation.core.respond.model.RespondContentCriteria"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    --> select RESPOND_ID, ORIGINAL_ID, EMPLOYEE_ID, RESPOND_TIME, IS_ACCEPT, RESPOND_CONTENT,REWARD from tbl_respond_content
    <if test="_parameter != null"> 
      <include refid="tbl_respond_content.Criteria_Where_Clause"/>  
      <if test="orderByClause != null">order by ${orderByClause}</if> 
    </if> 
  </select>
  <select id="selectByCriteria" resultMap="BaseResultMap" parameterType="com.i2shopping.i2work.operation.core.respond.model.RespondContentCriteria"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    --> select RESPOND_ID, ORIGINAL_ID, EMPLOYEE_ID, RESPOND_TIME, IS_ACCEPT from tbl_respond_content
    <if test="_parameter != null"> 
      <include refid="tbl_respond_content.Criteria_Where_Clause"/>  
      <if test="orderByClause != null">order by ${orderByClause}</if> 
    </if> 
  </select>
  <select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs" parameterType="com.i2shopping.i2work.operation.core.respond.model.RespondContent"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    --> select RESPOND_ID, ORIGINAL_ID, EMPLOYEE_ID, RESPOND_TIME, IS_ACCEPT, RESPOND_CONTENT,REWARD from tbl_respond_content where RESPOND_ID = #{respondId:VARCHAR}
  </select>
  <select id="selectTopAndIDByPrimaryKey" resultMap="BaseResultMapEx" parameterType="com.i2shopping.i2work.operation.core.respond.model.RespondContent">select A.* from (select(@rowNum:=@rowNum+1)as top, RESPOND_ID from tbl_respond_content task, (Select (@rowNum :=0))b where ORIGINAL_ID =#{originalId:VARCHAR})A where A.RESPOND_ID =#{respondId:VARCHAR}</select>
  <delete id="deleteByPrimaryKey" parameterType="com.i2shopping.i2work.operation.core.respond.model.RespondContent"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    --> delete from tbl_respond_content where RESPOND_ID = #{respondId:VARCHAR}
  </delete>
  <delete id="deleteByCriteria" parameterType="com.i2shopping.i2work.operation.core.respond.model.RespondContentCriteria"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    --> delete from tbl_respond_content 
    <include refid="tbl_respond_content.Criteria_Where_Clause"/> 
  </delete>
  <insert id="insert" parameterType="com.i2shopping.i2work.operation.core.respond.model.RespondContent"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    --> insert into tbl_respond_content (RESPOND_ID, ORIGINAL_ID, EMPLOYEE_ID, RESPOND_TIME, IS_ACCEPT, RESPOND_CONTENT,REWARD) values (#{respondId:VARCHAR}, #{originalId:VARCHAR}, #{employeeId:VARCHAR}, #{respondTime:TIMESTAMP}, #{isAccept:CHAR}, #{respondContent:VARCHAR},#{reward:INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="com.i2shopping.i2work.operation.core.respond.model.RespondContent"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    --> insert into tbl_respond_content 
    <trim prefix="("> 
      <if test="respondId != null">RESPOND_ID ,</if>  
      <if test="originalId != null">ORIGINAL_ID ,</if>  
      <if test="employeeId != null">EMPLOYEE_ID ,</if>  
      <if test="respondTime != null">RESPOND_TIME ,</if>  
      <if test="isAccept != null">IS_ACCEPT ,</if>  
      <if test="respondContent != null">RESPOND_CONTENT ,</if> )
    </trim> values 
    <trim prefix="("> 
      <if test="respondId != null">#{respondId:VARCHAR} ,</if>  
      <if test="originalId != null">#{originalId:VARCHAR} ,</if>  
      <if test="employeeId != null">#{employeeId:VARCHAR} ,</if>  
      <if test="respondTime != null">#{respondTime:TIMESTAMP} ,</if>  
      <if test="isAccept != null">#{isAccept:CHAR} ,</if>  
      <if test="respondContent != null">#{respondContent:VARCHAR} ,</if> )
    </trim> 
  </insert>
  <select id="countByCriteria" parameterType="com.i2shopping.i2work.operation.core.respond.model.RespondContentCriteria" resultType="java.lang.Integer"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    --> select count(*) from tbl_respond_content 
    <include refid="tbl_respond_content.Criteria_Where_Clause"/> 
  </select>
  <update id="updateByCriteriaSelective"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    --> update tbl_respond_content 
    <trim prefix="set"> 
      <if test="record.respondId != null">RESPOND_ID = #{record.respondId:VARCHAR} ,</if>  
      <if test="record.originalId != null">ORIGINAL_ID = #{record.originalId:VARCHAR} ,</if>  
      <if test="record.employeeId != null">EMPLOYEE_ID = #{record.employeeId:VARCHAR} ,</if>  
      <if test="record.respondTime != null">RESPOND_TIME = #{record.respondTime:TIMESTAMP} ,</if>  
      <if test="record.isAccept != null">IS_ACCEPT = #{record.isAccept:CHAR} ,</if>  
      <if test="record.respondContent != null">RESPOND_CONTENT = #{record.respondContent:VARCHAR} ,</if> 
    </trim>  
    <if test="_parameter != null"> 
      <include refid="tbl_respond_content.Criteria_Where_Clause"/> 
    </if> 
  </update>
  <update id="updateByCriteriaWithBLOBs"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    --> update tbl_respond_content set RESPOND_ID = #{record.respondId:VARCHAR}, ORIGINAL_ID = #{record.originalId:VARCHAR}, EMPLOYEE_ID = #{record.employeeId:VARCHAR}, RESPOND_TIME = #{record.respondTime:TIMESTAMP}, IS_ACCEPT = #{record.isAccept:CHAR}, RESPOND_CONTENT = #{record.respondContent:VARCHAR}
    <if test="_parameter != null"> 
      <include refid="tbl_respond_content.Criteria_Where_Clause"/> 
    </if> 
  </update>
  <update id="updateByCriteria"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    --> update tbl_respond_content set RESPOND_ID = #{record.respondId:VARCHAR}, ORIGINAL_ID = #{record.originalId:VARCHAR}, EMPLOYEE_ID = #{record.employeeId:VARCHAR}, RESPOND_TIME = #{record.respondTime:TIMESTAMP}, IS_ACCEPT = #{record.isAccept:CHAR}
    <if test="_parameter != null"> 
      <include refid="tbl_respond_content.Criteria_Where_Clause"/> 
    </if> 
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.i2shopping.i2work.operation.core.respond.model.RespondContent"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    --> update tbl_respond_content 
    <trim prefix="set"> 
      <if test="originalId != null">ORIGINAL_ID = #{originalId:VARCHAR} ,</if>  
      <if test="employeeId != null">EMPLOYEE_ID = #{employeeId:VARCHAR} ,</if>  
      <if test="respondTime != null">RESPOND_TIME = #{respondTime:TIMESTAMP} ,</if>  
      <if test="isAccept != null">IS_ACCEPT = #{isAccept:CHAR} ,</if>  
      <if test="respondContent != null">RESPOND_CONTENT = #{respondContent:VARCHAR} ,</if>  
      <if test="reward != null">REWARD = #{reward:INTEGER} ,</if> 
    </trim> where RESPOND_ID = #{respondId:VARCHAR}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.i2shopping.i2work.operation.core.respond.model.RespondContent"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    --> update tbl_respond_content set ORIGINAL_ID = #{originalId:VARCHAR}, EMPLOYEE_ID = #{employeeId:VARCHAR}, RESPOND_TIME = #{respondTime:TIMESTAMP}, IS_ACCEPT = #{isAccept:CHAR}, RESPOND_CONTENT = #{respondContent:VARCHAR} where RESPOND_ID = #{respondId:VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.i2shopping.i2work.operation.core.respond.model.RespondContent"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    --> update tbl_respond_content set ORIGINAL_ID = #{originalId:VARCHAR}, EMPLOYEE_ID = #{employeeId:VARCHAR}, RESPOND_TIME = #{respondTime:TIMESTAMP}, IS_ACCEPT = #{isAccept:CHAR} where RESPOND_ID = #{respondId:VARCHAR}
  </update>
  <delete id="deleteByPrimaryByOriginal" parameterType="com.i2shopping.i2work.operation.core.respond.model.RespondContent"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    --> delete from tbl_respond_content where ORIGINAL_ID = #{originalId:VARCHAR}
  </delete>
  <!-- 查询已经悬赏的分数 -->
  <select id="findgetRespondContentByrewardCount" resultType="java.lang.Integer" parameterType="java.lang.String">select sum(c.REWARD) from tbl_respond_content as c where c.ORIGINAL_ID = #{originalid:VARCHAR}</select>
  <!-- 帖子编号 + 员工号 查询是否已经悬赏 -->
  <select id="getRespondContentByOriginalIdAndIsAccept" resultMap="BaseResultMap" parameterType="com.i2shopping.i2work.operation.core.respond.model.RespondContent"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    --> select RESPOND_ID, ORIGINAL_ID, EMPLOYEE_ID, RESPOND_TIME, IS_ACCEPT, RESPOND_CONTENT,REWARD from tbl_respond_content where ORIGINAL_ID = #{originalId:VARCHAR} and EMPLOYEE_ID = #{employeeId:VARCHAR}
    <if test="isAccept != null and isAccept != ''">and IS_ACCEPT = #{isAccept:CHAR}</if>  
    <!--  IS_ACCEPT = #{isAccept:CHAR} --> 
  </select>
  <!-- 根据主贴ID查询回复内容和相应的个数用于桌号奖 -->
  <select id="getResContentAndCountByOriginalId" resultType="java.util.HashMap" parameterType="java.lang.String">select RESPOND_CONTENT as desk, count(1)as count from tbl_respond_content where ORIGINAL_ID = #{originalId:VARCHAR} group by RESPOND_CONTENT order by COUNT(1) desc limit 6</select>
  <!-- 查询评论分页 -->
  <select id="getRespondContentsDao" resultMap="BaseResultMap" parameterType="java.lang.String"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    --> select RESPOND_ID, ORIGINAL_ID, EMPLOYEE_ID, RESPOND_TIME, IS_ACCEPT, RESPOND_CONTENT,REWARD from tbl_respond_content where ORIGINAL_ID = #{originalId:VARCHAR} ORDER BY RESPOND_TIME desc
  </select>
  <select id="getRespondCountIsAccept" parameterType="java.lang.String" resultType="java.lang.Integer"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:19 CST 2015.
    --> select count(*) from tbl_respond_content where ORIGINAL_ID = #{originalId:VARCHAR} and IS_ACCEPT = '1'
  </select>
</mapper>
