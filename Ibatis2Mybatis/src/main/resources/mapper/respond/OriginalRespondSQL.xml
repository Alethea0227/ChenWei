<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="tbl_original_respond">
  <resultMap id="BaseResultMap" type="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->
    <result column="ORIGINAL_ID" property="originalId" jdbcType="VARCHAR"/>
    <result column="EMPLOYEE_ID" property="employeeId" jdbcType="VARCHAR"/>
    <result column="ORIGINAL_TITLE" property="originalTitle" jdbcType="VARCHAR"/>
    <result column="ORIGINAL_TYPE" property="originalType" jdbcType="CHAR"/>
    <result column="PUBLISH_TIME" property="publishTime" jdbcType="TIMESTAMP"/>
    <result column="REWARD" property="reward" jdbcType="INTEGER" nullValue="0"/>
    <!--  <result column="ORIGINAL_STAT" property="originalStat" jdbcType="INTEGER" />
    <result column="DESCRIPTION" property="description" jdbcType="INTEGER" /> -->
  </resultMap>
  <resultMap id="ResultBaseResultMapSetTopDate" extends="tbl_original_respond.BaseResultMap" type="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond">
    <result column="SETTOPDATE" property="setTopDate" jdbcType="TIMESTAMP"/>
    <result column="SETTOPSTAT" property="setTopStat" jdbcType="CHAR"/>
  </resultMap>
  <resultMap id="ResultMapWithBLOBs" extends="tbl_original_respond.BaseResultMap" type="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->
    <result column="ORIGINAL_CONTENT" property="originalContent" jdbcType="VARCHAR"/>
    <association property="respondImages" select="tbl_respond_image.selectByOriginalId" column="ORIGINAL_ID"/>
  </resultMap>
  <resultMap id="resultMapExt" extends="ResultMapWithBLOBs" type="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond">
    <result column="respond_count" property="respondCount"/>
    <association property="employeeInfo" column="EMPLOYEE_ID" select="tbl_employee_info_vo.selectByEmployeeId"/>
  </resultMap>
  <resultMap id="resultMapExt2" extends="ResultMapWithBLOBs" type="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond">
    <result column="respond_count" property="respondCount"/>
    <result column="RANDOM_NUMBER" property="randomNumber" jdbcType="INTEGER"/>
    <result column="DESCRIPTION" property="description" jdbcType="VARCHAR"/>
    <result column="ORIGINAL_STAT" property="originalStat" jdbcType="INTEGER"/>
    <association property="employeeInfo" column="EMPLOYEE_ID" select="tbl_employee_info_vo.selectByEmployeeId"/>
  </resultMap>
  <!-- 后台管理主贴 -->
  <resultMap id="ResultBaseResultMapSetTopDateTo" extends="resultMapExt" type="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond">
    <result column="SETTOPDATE" property="setTopDate" jdbcType="TIMESTAMP"/>
    <result column="SETTOPSTAT" property="setTopStat" jdbcType="CHAR"/>
    <result column="RANDOM_NUMBER" property="randomNumber" jdbcType="INTEGER" nullValue="0"/>
    <result column="ORIGINAL_CONTENT" property="originalContent" jdbcType="VARCHAR"/>
    <result column="DESCRIPTION" property="description" jdbcType="VARCHAR"/>
    <result column="ORIGINAL_STAT" property="originalStat" jdbcType="INTEGER"/>
    <result column="AGREE_WITH" property="agreeWith" jdbcType="VARCHAR"/>
    <result column="RELATED_PROJECTS" property="relatedProjects" jdbcType="VARCHAR"/>
  </resultMap>
  <!-- 笨鸟悬赏版 list-->
  <resultMap id="ResultBaseResultMapSetTopDateToAPP" extends="resultMapExt" type="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond">
    <result column="SETTOPDATE" property="setTopDate" jdbcType="TIMESTAMP"/>
    <result column="SETTOPSTAT" property="setTopStat" jdbcType="CHAR"/>
  </resultMap>
  <resultMap id="ResultBaseResultMapSetTop" extends="BaseResultMap" type="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond">
    <result column="SETTOPDATE" property="setTopDate" jdbcType="TIMESTAMP"/>
    <result column="SETTOPSTAT" property="setTopStat" jdbcType="CHAR"/>
    <result column="RANDOM_NUMBER" property="randomNumber" jdbcType="INTEGER"/>
    <result column="ORIGINAL_CONTENT" property="originalContent" jdbcType="VARCHAR"/>
    <result column="DESCRIPTION" property="description" jdbcType="VARCHAR"/>
  </resultMap>
  <sql id="Criteria_Where_Clause"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->  
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate"> 
      <if test="oredCriteria[].valid!= null and oredCriteria[].valid == 'true'.toString()">( 
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and">$oredCriteria[].criteriaWithoutValue[]$</iterate>  
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and">$oredCriteria[].criteriaWithSingleValue[].condition$ #{oredCriteria[].criteriaWithSingleValue[].value}</iterate>  
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and">$oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction=",">#{oredCriteria[].criteriaWithListValue[].values[]}</iterate> 
        </iterate>  
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and">$oredCriteria[].criteriaWithBetweenValue[].condition$ #{oredCriteria[].criteriaWithBetweenValue[].values[0]} and #{oredCriteria[].criteriaWithBetweenValue[].values[1]}</iterate> )
      </if> 
    </iterate> 
  </sql>
  <select id="selectByCriteriaWithBLOBs" resultMap="ResultMapWithBLOBs" parameterType="com.i2shopping.i2work.operation.core.respond.model.OriginalRespondCriteria"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    --> select ORIGINAL_ID, EMPLOYEE_ID, ORIGINAL_TITLE, ORIGINAL_TYPE, PUBLISH_TIME, REWARD, ORIGINAL_CONTENT from tbl_original_respond
    <if test="_parameter != null"> 
      <include refid="tbl_original_respond.Criteria_Where_Clause"/>  
      <if test="orderByClause != null">order by ${orderByClause}</if> 
    </if> 
  </select>
  <select id="selectByCriteria" resultMap="BaseResultMap" parameterType="com.i2shopping.i2work.operation.core.respond.model.OriginalRespondCriteria"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    --> select ORIGINAL_ID, EMPLOYEE_ID, ORIGINAL_TITLE, ORIGINAL_TYPE, PUBLISH_TIME, REWARD from tbl_original_respond
    <if test="_parameter != null"> 
      <include refid="tbl_original_respond.Criteria_Where_Clause"/>  
      <if test="orderByClause != null">order by ${orderByClause}</if> 
    </if> 
  </select>
  <select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs" parameterType="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    --> select ORIGINAL_ID, EMPLOYEE_ID, ORIGINAL_TITLE, ORIGINAL_TYPE, PUBLISH_TIME, REWARD, ORIGINAL_CONTENT from tbl_original_respond where ORIGINAL_ID = #{originalId:VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    --> delete from tbl_original_respond where ORIGINAL_ID = #{originalId:VARCHAR}
  </delete>
  <delete id="deleteByCriteria" parameterType="com.i2shopping.i2work.operation.core.respond.model.OriginalRespondCriteria"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    --> delete from tbl_original_respond 
    <include refid="tbl_original_respond.Criteria_Where_Clause"/> 
  </delete>
  <insert id="insert" parameterType="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
       <result column="RANDOM_NUMBER" property="randomNumber" jdbcType="INTEGER" />
    --> insert into tbl_original_respond (ORIGINAL_ID, EMPLOYEE_ID, ORIGINAL_TITLE, ORIGINAL_TYPE, PUBLISH_TIME, REWARD, ORIGINAL_CONTENT,RANDOM_NUMBER,ORIGINAL_STAT) values (#{originalId:VARCHAR}, #{employeeId:VARCHAR}, #{originalTitle:VARCHAR}, #{originalType:CHAR}, #{publishTime:TIMESTAMP}, #{reward:INTEGER}, #{originalContent:VARCHAR},#{randomNumber:INTEGER},#{originalStat:INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    --> insert into tbl_original_respond 
    <trim prefix="("> 
      <if test="originalId != null">ORIGINAL_ID ,</if>  
      <if test="employeeId != null">EMPLOYEE_ID ,</if>  
      <if test="originalTitle != null">ORIGINAL_TITLE ,</if>  
      <if test="originalType != null">ORIGINAL_TYPE ,</if>  
      <if test="publishTime != null">PUBLISH_TIME ,</if>  
      <if test="reward != null">REWARD ,</if>  
      <if test="originalContent != null">ORIGINAL_CONTENT ,</if>  
      <if test="setTopStat != null">SETTOPSTAT ,</if>  
      <if test="originalStat != null">ORIGINAL_STAT ,</if>  
      <if test="randomNumber != null">RANDOM_NUMBER ,</if>  
      <if test="description != null">DESCRIPTION ,</if>  
      <if test="setTopDate != null">SETTOPDATE ,</if>  
      <if test="agreeWith != null">AGREE_WITH ,</if>  
      <if test="relatedProjects != null">RELATED_PROJECTS ,</if> )
    </trim> values 
    <trim prefix="("> 
      <if test="originalId != null">#{originalId:VARCHAR} ,</if>  
      <if test="employeeId != null">#{employeeId:VARCHAR} ,</if>  
      <if test="originalTitle != null">#{originalTitle:VARCHAR} ,</if>  
      <if test="originalType != null">#{originalType:CHAR} ,</if>  
      <if test="publishTime != null">#{publishTime:TIMESTAMP} ,</if>  
      <if test="reward != null">#{reward:INTEGER} ,</if>  
      <if test="originalContent != null">#{originalContent:VARCHAR} ,</if>  
      <if test="setTopStat != null">#{setTopStat:CHAR} ,</if>  
      <if test="originalStat != null">#{originalStat} ,</if>  
      <if test="randomNumber != null">#{randomNumber:INTEGER} ,</if>  
      <if test="description != null">#{description:VARCHAR} ,</if>  
      <if test="setTopDate != null">#{setTopDate:TIMESTAMP} ,</if>  
      <if test="agreeWith != null">#{agreeWith:VARCHAR} ,</if>  
      <if test="relatedProjects != null">#{relatedProjects:VARCHAR} ,</if> )
    </trim> 
  </insert>
  <select id="countByCriteria" parameterType="com.i2shopping.i2work.operation.core.respond.model.OriginalRespondCriteria" resultType="java.lang.Integer"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    --> select count(*) from tbl_original_respond 
    <include refid="tbl_original_respond.Criteria_Where_Clause"/> 
  </select>
  <update id="updateByCriteriaSelective"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    --> update tbl_original_respond 
    <trim prefix="set"> 
      <if test="record.originalId != null">ORIGINAL_ID = #{record.originalId:VARCHAR} ,</if>  
      <if test="record.employeeId != null">EMPLOYEE_ID = #{record.employeeId:VARCHAR} ,</if>  
      <if test="record.originalTitle != null">ORIGINAL_TITLE = #{record.originalTitle:VARCHAR} ,</if>  
      <if test="record.originalType != null">ORIGINAL_TYPE = #{record.originalType:CHAR} ,</if>  
      <if test="record.publishTime != null">PUBLISH_TIME = #{record.publishTime:TIMESTAMP} ,</if>  
      <if test="record.reward != null">REWARD = #{record.reward:INTEGER} ,</if>  
      <if test="record.originalContent != null">ORIGINAL_CONTENT = #{record.originalContent:VARCHAR} ,</if> 
    </trim>  
    <if test="_parameter != null"> 
      <include refid="tbl_original_respond.Criteria_Where_Clause"/> 
    </if> 
  </update>
  <update id="updateByCriteriaWithBLOBs"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    --> update tbl_original_respond set ORIGINAL_ID = #{record.originalId:VARCHAR}, EMPLOYEE_ID = #{record.employeeId:VARCHAR}, ORIGINAL_TITLE = #{record.originalTitle:VARCHAR}, ORIGINAL_TYPE = #{record.originalType:CHAR}, PUBLISH_TIME = #{record.publishTime:TIMESTAMP}, REWARD = #{record.reward:INTEGER}, ORIGINAL_CONTENT = #{record.originalContent:VARCHAR}
    <if test="_parameter != null"> 
      <include refid="tbl_original_respond.Criteria_Where_Clause"/> 
    </if> 
  </update>
  <update id="updateByCriteria"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    --> update tbl_original_respond set ORIGINAL_ID = #{record.originalId:VARCHAR}, EMPLOYEE_ID = #{record.employeeId:VARCHAR}, ORIGINAL_TITLE = #{record.originalTitle:VARCHAR}, ORIGINAL_TYPE = #{record.originalType:CHAR}, PUBLISH_TIME = #{record.publishTime:TIMESTAMP}, REWARD = #{record.reward:INTEGER}
    <if test="_parameter != null"> 
      <include refid="tbl_original_respond.Criteria_Where_Clause"/> 
    </if> 
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    --> update tbl_original_respond 
    <trim prefix="set"> 
      <if test="employeeId != null">EMPLOYEE_ID = #{employeeId:VARCHAR} ,</if>  
      <if test="originalTitle != null">ORIGINAL_TITLE = #{originalTitle:VARCHAR} ,</if>  
      <if test="originalType != null">ORIGINAL_TYPE = #{originalType:CHAR} ,</if>  
      <if test="publishTime != null">PUBLISH_TIME = #{publishTime:TIMESTAMP} ,</if>  
      <if test="reward != null">REWARD = #{reward:INTEGER} ,</if>  
      <if test="originalContent != null">ORIGINAL_CONTENT = #{originalContent:VARCHAR} ,</if> 
    </trim> where ORIGINAL_ID = #{originalId:VARCHAR}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    --> update tbl_original_respond set EMPLOYEE_ID = #{employeeId:VARCHAR}, ORIGINAL_TITLE = #{originalTitle:VARCHAR}, ORIGINAL_TYPE = #{originalType:CHAR}, PUBLISH_TIME = #{publishTime:TIMESTAMP}, REWARD = #{reward:INTEGER}, ORIGINAL_CONTENT = #{originalContent:VARCHAR} where ORIGINAL_ID = #{originalId:VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    --> update tbl_original_respond set EMPLOYEE_ID = #{employeeId:VARCHAR}, ORIGINAL_TITLE = #{originalTitle:VARCHAR}, ORIGINAL_TYPE = #{originalType:CHAR}, PUBLISH_TIME = #{publishTime:TIMESTAMP}, REWARD = #{reward:INTEGER} where ORIGINAL_ID = #{originalId:VARCHAR}
  </update>
  <!-- 后台查询所有的帖子的总数量 -->
  <select id="countByRespondParameter" resultType="java.lang.Integer" parameterType="java.util.HashMap">SELECT count(1) FROM tbl_original_respond
    <trim prefix="where"> 
      <if test="originalType != null and originalType != ''">and ORIGINAL_TYPE = #{originalType}</if>  
      <if prepend="and" test="searchType!= null and searchType == '1'.toString()">and EMPLOYEE_ID = #{employeeId}</if>  
      <if test="employeeId != null and employeeId != ''">and EMPLOYEE_ID = #{employeeId:VARCHAR}</if>  
      <if test="originalId != null and originalId != ''">and ORIGINAL_ID = #{originalId:VARCHAR}</if>  
      <if test="originalStat != null and originalStat != ''">and ORIGINAL_STAT = #{originalStat:INTEGER}</if>  
      <if test="setTopStat != null and setTopStat != ''">and SETTOPSTAT = #{setTopStat:VARCHAR}</if> 
    </trim> 
  </select>
  <select id="selectByRespondParameter" resultMap="resultMapExt2" parameterType="java.util.HashMap">SELECT d.*, count(t.RESPOND_ID) as respond_count, d.DESCRIPTION as description, d.ORIGINAL_STAT as originalStat FROM tbl_original_respond d LEFT JOIN tbl_respond_content t ON d.ORIGINAL_ID = t.ORIGINAL_ID
    <trim prefix="where"> 
      <if test="originalType != null and originalType != ''">and d.ORIGINAL_TYPE = #{originalType}</if>  
      <if prepend="and" test="searchType!= null and searchType == '1'.toString()">and d.EMPLOYEE_ID = #{employeeId}</if>  
      <if test="originalId != null and originalId != ''">and d.ORIGINAL_ID = #{originalId:VARCHAR}</if>  
      <if test="originalStat != null and originalStat != ''">and ORIGINAL_STAT = #{originalStat:INTEGER}</if> 
    </trim> GROUP by d.ORIGINAL_ID ORDER BY d.PUBLISH_TIME DESC
  </select>
  <!-- 后台查询所有的帖子信息-->
  <!-- 后台管理主贴2 -->
  <resultMap id="ResultBaseResultMapSetTopDateToNew" extends="resultMapExt" type="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond">
    <result column="SETTOPDATE" property="setTopDate" jdbcType="TIMESTAMP"/>
    <result column="SETTOPSTAT" property="setTopStat" jdbcType="CHAR"/>
    <result column="RANDOM_NUMBER" property="randomNumber" jdbcType="INTEGER" nullValue="0"/>
    <result column="ORIGINAL_CONTENT" property="originalContent" jdbcType="VARCHAR"/>
    <result column="DESCRIPTION" property="description" jdbcType="VARCHAR"/>
    <result column="ORIGINAL_STAT" property="originalStat" jdbcType="INTEGER" nullValue="0"/>
  </resultMap>
  <!-- 后台查询所有的帖子信息 -->
  <select id="selectByRespondParameterOperation" resultMap="ResultBaseResultMapSetTopDateToNew" parameterType="java.util.HashMap">SELECT d.*, count(t.RESPOND_ID) as respond_count , d.SETTOPDATE as setTopDate, d.SETTOPSTAT as setTopStat, d.RANDOM_NUMBER as randomNumber, d.ORIGINAL_CONTENT as originalContent, d.DESCRIPTION as description, d.ORIGINAL_STAT as originalStat FROM tbl_original_respond d LEFT JOIN tbl_respond_content t ON d.ORIGINAL_ID = t.ORIGINAL_ID
    <trim prefix="where"> 
      <if test="originalType != null and originalType != ''">and d.ORIGINAL_TYPE = #{originalType}</if>  
      <if prepend="and" test="searchType!= null and searchType == '1'.toString()">and d.EMPLOYEE_ID = #{employeeId:VARCHAR}</if>  
      <if test="employeeId != null and employeeId != ''">and d.EMPLOYEE_ID = #{employeeId:VARCHAR}</if>  
      <if test="originalId != null and originalId != ''">and d.ORIGINAL_ID = #{originalId:VARCHAR}</if>  
      <if test="originalStat != null and originalStat != ''">and ORIGINAL_STAT = #{originalStat:INTEGER}</if>  
      <if test="setTopStat != null and setTopStat != ''">and SETTOPSTAT = #{setTopStat}</if> 
    </trim> GROUP by d.ORIGINAL_ID ORDER BY d.PUBLISH_TIME DESC
  </select>
  <!-- 笨鸟悬赏傍查询所有的帖子 d.AGREE_WITH as agreeWith,
     d.RELATED_PROJECTS as relatedProjects-->
  <select id="selectByRespondParameterOperationSign" resultMap="ResultBaseResultMapSetTopDateTo" parameterType="java.lang.String">SELECT d.*, count(t.RESPOND_ID) as respond_count , d.ORIGINAL_CONTENT as originalContent , d.DESCRIPTION as description , d.RANDOM_NUMBER as randomNumber, d.ORIGINAL_STAT as originalStat FROM tbl_original_respond d LEFT JOIN tbl_respond_content t ON d.ORIGINAL_ID = t.ORIGINAL_ID where d.ORIGINAL_ID = #{originalId:VARCHAR}</select>
  <!-- 删除帖子 -->
  <delete id="deleteByOriginalIdAndEmployeeId" parameterType="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    --> delete from tbl_original_respond where ORIGINAL_ID = #{originalId:VARCHAR} and EMPLOYEE_ID = #{employeeId:VARCHAR}
  </delete>
  <update id="updateBySetTopDate" parameterType="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond"> 
    <!--
         设置主贴置顶时间
    <result column="SETTOPDATE" property="setTopDate" jdbcType="TIMESTAMP" />
    <result column="SETTOPSTAT" property="setTopStat" jdbcType="CHAR" />
    --> update tbl_original_respond set SETTOPDATE = #{setTopDate:TIMESTAMP},SETTOPSTAT = #{setTopStat:VARCHAR} where ORIGINAL_ID = #{originalId:VARCHAR} and EMPLOYEE_ID = #{employeeId:VARCHAR}
  </update>
  <!-- timecart 查询悬赏 置顶总集合
  <select id="getAllOriginalRespondsSetTop" resultMap="resultMapExt" parameterType="com.i2shopping.i2work.respond.model.OriginalRespond">
    SELECT DISTINCT d.*,count(t.RESPOND_ID) as respond_count FROM tbl_original_respond d
    LEFT JOIN tbl_respond_content t ON d.ORIGINAL_ID = t.ORIGINAL_ID
    where d.SETTOPSTAT = '1' ORDER BY d.SETTOPDATE desc 
  </select> -->
  <!-- 后台维护主贴 更新操作 -->
  <update id="updateByPrimaryOriginal" parameterType="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond">update tbl_original_respond set ORIGINAL_CONTENT = #{originalContent:VARCHAR}, ORIGINAL_TITLE = #{originalTitle:VARCHAR}, ORIGINAL_TYPE = #{originalType:CHAR}, SETTOPSTAT = #{setTopStat:VARCHAR}, SETTOPDATE = #{setTopDate:TIMESTAMP}, REWARD = #{reward:INTEGER}, ORIGINAL_STAT = #{originalStat:INTEGER}, RANDOM_NUMBER = #{randomNumber:INTEGER}, AGREE_WITH = #{agreeWith:VARCHAR}, RELATED_PROJECTS = #{relatedProjects:VARCHAR} where ORIGINAL_ID = #{originalId:VARCHAR}</update>
  <!-- 笨鸟悬赏榜 设置置顶只查询 未置顶的数据 未 置顶的帖子根据修改时间排序 -->
  <select id="selectByRespondParameterSetTopList" resultMap="ResultBaseResultMapSetTopDateToAPP" parameterType="java.util.HashMap">SELECT d.*, CASE WHEN respond_count is NULL THEN 0 ELSE respond_count END as respond_count from ( select * from tbl_original_respond
    <trim prefix="where"> 
      <if test="originalType != null and originalType != ''">and ORIGINAL_TYPE = #{originalType}</if>  
      <if prepend="and" test="searchType!= null and searchType == '1'.toString()">and EMPLOYEE_ID = #{employeeId}</if>  
      <if test="originalId != null and originalId != ''">and ORIGINAL_ID = #{originalId:VARCHAR}</if>  
      <if test="setTopStat != null and setTopStat != ''">and SETTOPSTAT = #{setTopStat:VARCHAR}</if>  
      <if test="originalStat != null and originalStat != ''">and ORIGINAL_STAT = #{originalStat:VARCHAR}</if> 
    </trim> ORDER BY PUBLISH_TIME DESC )d LEFT JOIN ( select ORIGINAL_ID, count(ORIGINAL_ID) as respond_count from tbl_respond_content GROUP by ORIGINAL_ID )t ON d.ORIGINAL_ID = t.ORIGINAL_ID
  </select>
  <!-- 笨鸟悬赏榜 设置置顶只查询 未置顶的数据  置顶的帖子根据置顶时间排序-->
  <select id="selectByRespondParameterSetTopListOrderby" resultMap="ResultBaseResultMapSetTopDateToAPP" parameterType="java.util.HashMap">SELECT d.*, CASE WHEN respond_count is NULL THEN 0 ELSE respond_count END as respond_count from ( select * from tbl_original_respond
    <trim prefix="where"> 
      <if test="originalType != null and originalType != ''">and ORIGINAL_TYPE = #{originalType}</if>  
      <if prepend="and" test="searchType!= null and searchType == '1'.toString()">and EMPLOYEE_ID = #{employeeId}</if>  
      <if test="originalId != null and originalId != ''">and ORIGINAL_ID = #{originalId:VARCHAR}</if>  
      <if test="setTopStat != null and setTopStat != ''">and SETTOPSTAT = #{setTopStat:VARCHAR}</if>  
      <if test="originalStat != null and originalStat != ''">and ORIGINAL_STAT = #{originalStat:VARCHAR}</if> 
    </trim> ORDER BY PUBLISH_TIME DESC )d LEFT JOIN ( select ORIGINAL_ID, count(ORIGINAL_ID) as respond_count from tbl_respond_content GROUP by ORIGINAL_ID )t ON d.ORIGINAL_ID = t.ORIGINAL_ID
  </select>
  <!-- 笨鸟悬赏榜 有状态和类型查询置顶且有效的帖子信息 -->
  <select id="selectOriginInfoBytypeAndStat" resultMap="ResultBaseResultMapSetTop" parameterType="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond">select * from tbl_original_respond where ORIGINAL_STAT =#{originalStat:INTEGER} and ORIGINAL_TYPE =#{originalType} and SETTOPSTAT ="1" order by SETTOPDATE desc limit 1</select>
</mapper>
