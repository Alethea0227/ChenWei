<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="tbl_project_income_expenditrue_info">
  <resultMap id="BaseResultMap" type="com.i2shopping.i2work.operation.core.project.model.ProjectIncomeExpenditrueInfo">
    <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Thu Apr 19 15:03:50 CST 2012.
        -->
    <result column="project_income_id" property="projectIncomeId" jdbcType="VARCHAR"/>
    <result column="contant_no" property="contantNo" jdbcType="VARCHAR"/>
    <result column="project_name" property="projectName" jdbcType="VARCHAR"/>
    <result column="project_money" property="projectMoney" jdbcType="VARCHAR"/>
    <result column="project_money_type" property="projectMoneyType" jdbcType="VARCHAR"/>
    <result column="custome_fine" property="customeFine" jdbcType="VARCHAR"/>
    <result column="export_time" property="exportTime" jdbcType="TIMESTAMP"/>
    <result column="project_income" property="projectIncome" jdbcType="VARCHAR"/>
    <result column="project_income_date" property="projectIncomeDate" jdbcType="VARCHAR"/>
    <result column="rename1" property="rename1" jdbcType="VARCHAR"/>
    <result column="rename2" property="rename2" jdbcType="VARCHAR"/>
    <result column="rename3" property="rename3" jdbcType="VARCHAR"/>
  </resultMap>
  <select id="selectByProjectAll" resultMap="BaseResultMap" parameterType="java.util.Map">select pi.* from tbl_project_income_expenditrue_info pi,tbl_project_info tpi,tbl_department_info dept where pi.contant_no = tpi.contract_no and tpi.department_id = dept.DEPARTMENT_ID
    <if test="compayId != null">and dept.BEYOND_COMPANY = #{compayId:VARCHAR}</if>  
    <if test="departmentId != null">and dept.DEPARTMENT_ID = = #{departmentId:VARCHAR}</if>  
    <if test="contantNo != null">and pi.contant_no= #{contantNo:VARCHAR}</if>  
    <if test="projectIncomeId != null">and pi.project_income_id = #{projectIncomeId:VARCHAR}</if>  
    <if test="projectName != null">and pi.project_name = #{projectName:VARCHAR}</if>  
    <if test="projectMoney != null">and pi.project_money = #{projectMoney:VARCHAR}</if>  
    <if test="projectMoneyType != null">and pi.project_money_type = #{projectMoneyType:VARCHAR}</if>  
    <if test="customeFine != null">and pi.custome_fine = #{customeFine:VARCHAR}</if>  
    <if test="exportTime != null">and pi.export_time = #{exportTime:TIMESTAMP}</if>  
    <if test="projectIncome != null">and pi.project_income = #{projectIncome:VARCHAR}</if>  
    <if test="projectIncomeDate != null">and pi.project_income_date = #{projectIncomeDate:VARCHAR}</if>  
    <if test="rename1 != null">and pi.rename1 = #{rename1:VARCHAR}</if>  
    <if test="rename2 != null">and pi.rename2 = #{rename2:VARCHAR}</if>  
    <if test="rename3 != null">and pi.rename3 = #{rename3:VARCHAR}</if> order by pi.export_time desc
  </select>
  <!-- 查询最近 这个是查询最近的导入数据，不是所有的数据 -->
  <select id="findByProjectIncomeExpenditureByContantNo" resultMap="BaseResultMap" parameterType="com.i2shopping.i2work.operation.core.project.model.ProjectIncomeExpenditrueInfo">select * from ( select pi.project_income_id, pi.contant_no, pi.project_name, pi.project_money, pi.project_money_type, pi.project_income, pi.project_income_date, pi.custome_fine, pi.export_time, pi.rename1, pi.rename2, pi.rename3 from tbl_project_income_expenditrue_info pi where pi.contant_no= #{contantNo:VARCHAR} ORDER BY pi.export_time DESC )A GROUP BY A.contant_no</select>
  <select id="selectByProjectAllCount" resultType="java.lang.Integer" parameterType="java.util.Map">select count(1) from tbl_project_income_expenditrue_info pi,tbl_project_info tpi,tbl_department_info dept where pi.contant_no = tpi.contract_no and tpi.department_id = dept.DEPARTMENT_ID
    <if test="compayId != null">and dept.BEYOND_COMPANY = #{compayId:VARCHAR}</if>  
    <if test="departmentId != null">and dept.DEPARTMENT_ID = = #{departmentId:VARCHAR}</if>  
    <if test="contantNo != null">and pi.contant_no= #{contantNo:VARCHAR}</if>  
    <if test="projectIncomeId != null">and pi.project_income_id = #{projectIncomeId:VARCHAR}</if>  
    <if test="projectName != null">and pi.project_name = #{projectName:VARCHAR}</if>  
    <if test="projectMoney != null">and pi.project_money = #{projectMoney:VARCHAR}</if>  
    <if test="projectMoneyType != null">and pi.project_money_type = #{projectMoneyType:VARCHAR}</if>  
    <if test="customeFine != null">and pi.custome_fine = #{customeFine:VARCHAR}</if>  
    <if test="exportTime != null">and pi.export_time = #{exportTime:TIMESTAMP}</if>  
    <if test="projectIncome != null">and pi.project_income = #{projectIncome:VARCHAR}</if>  
    <if test="projectIncomeDate != null">and pi.project_income_date = #{projectIncomeDate:VARCHAR}</if>  
    <if test="rename1 != null">and pi.rename1 = #{rename1:VARCHAR}</if>  
    <if test="rename2 != null">and pi.rename2 = #{rename2:VARCHAR}</if>  
    <if test="rename3 != null">and pi.rename3 = #{rename3:VARCHAR}</if> order by pi.export_time desc
  </select>
  <select id="queryProjectByProjectIncomeId" resultMap="BaseResultMap" parameterType="com.i2shopping.i2work.operation.core.project.model.ProjectIncomeExpenditrueInfo">select * from tbl_project_income_expenditrue_info tpei 
    <trim prefix="where"> 
      <if test="projectIncomeId != null">and tpei.project_income_id= #{projectIncomeId:VARCHAR}</if> 
    </trim> 
  </select>
  <!-- 查询项目有多少个人 -->
  <select id="selectByProjectEmployeeCount" resultType="java.lang.Integer" parameterType="com.i2shopping.i2work.operation.core.project.model.ProjectIncomeExpenditrueInfo">select count(1) from tbl_project_etc pre where pre.is_Leave = '00'
    <if test="contantNo != null">and pre.contract_no= #{contantNo:VARCHAR}</if> 
  </select>
  <insert id="insertProjectSelective" parameterType="com.i2shopping.i2work.operation.core.project.model.ProjectIncomeExpenditrueInfo"> 
    <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Wed Jul 08 17:48:50 CST 2015.
        --> insert into tbl_project_income_expenditrue_info 
    <trim prefix="("> 
      <if test="projectIncomeId != null">project_income_id ,</if>  
      <if test="contantNo != null">contant_no ,</if>  
      <if test="projectName != null">project_name ,</if>  
      <if test="projectMoney != null">project_money ,</if>  
      <if test="projectMoneyType != null">project_money_type ,</if>  
      <if test="customeFine != null">custome_fine ,</if>  
      <if test="exportTime != null">export_time ,</if>  
      <if test="projectIncome != null">project_income ,</if>  
      <if test="projectIncomeDate != null">project_income_date ,</if>  
      <if test="rename1 != null">rename1 ,</if>  
      <if test="rename2 != null">rename2 ,</if>  
      <if test="rename3 != null">rename3 ,</if> )
    </trim> values 
    <trim prefix="("> 
      <if test="projectIncomeId != null">#{projectIncomeId:VARCHAR} ,</if>  
      <if test="contantNo != null">#{contantNo:VARCHAR} ,</if>  
      <if test="projectName != null">#{projectName:VARCHAR} ,</if>  
      <if test="projectMoney != null">#{projectMoney:VARCHAR} ,</if>  
      <if test="projectMoneyType != null">#{projectMoneyType:VARCHAR} ,</if>  
      <if test="customeFine != null">#{customeFine:VARCHAR} ,</if>  
      <if test="exportTime != null">#{exportTime:TIMESTAMP} ,</if>  
      <if test="projectIncome != null">#{projectIncome:VARCHAR} ,</if>  
      <if test="projectIncomeDate != null">#{projectIncomeDate:VARCHAR} ,</if>  
      <if test="rename1 != null">#{rename1:VARCHAR} ,</if>  
      <if test="rename2 != null">#{rename2:VARCHAR} ,</if>  
      <if test="rename3 != null">#{rename3:VARCHAR} ,</if> )
    </trim> 
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.i2shopping.i2work.operation.core.project.model.ProjectIncomeExpenditrueInfo"> 
    <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Wed Jul 08 17:48:50 CST 2015.
        --> update tbl_project_income_expenditrue_info 
    <trim prefix="set"> 
      <if test="contantNo != null">contant_no = #{contantNo:VARCHAR} ,</if>  
      <if test="projectName != null">project_name = #{projectName:VARCHAR} ,</if>  
      <if test="projectMoney != null">project_money = #{projectMoney:VARCHAR} ,</if>  
      <if test="projectMoneyType != null">project_money_type = #{projectMoneyType:VARCHAR} ,</if>  
      <if test="customeFine != null">custome_fine = #{customeFine:VARCHAR} ,</if>  
      <if test="exportTime != null">export_time = #{exportTime:TIMESTAMP} ,</if>  
      <if test="projectIncome != null">project_income = #{projectIncome:VARCHAR} ,</if>  
      <if test="projectIncomeDate != null">project_income_date= #{projectIncomeDate:VARCHAR} ,</if>  
      <if test="rename1 != null">rename1 = #{rename1:VARCHAR} ,</if>  
      <if test="rename2 != null">rename2 = #{rename2:VARCHAR} ,</if>  
      <if test="rename3 != null">rename3 = #{rename3:VARCHAR} ,</if> 
    </trim>  
    <trim prefix="where"> 
      <if test="projectIncomeId != null">and project_income_id = #{projectIncomeId:VARCHAR}</if> 
    </trim> 
  </update>
</mapper>
