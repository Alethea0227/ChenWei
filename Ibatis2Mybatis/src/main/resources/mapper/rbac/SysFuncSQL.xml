<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="TBL_SYS_FUNC">
  <resultMap id="BaseResultMap" type="com.icbc.emall.common.model.SysFunc">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Apr 21 11:20:04 CST 2012.
    -->
    <result column="FUNC_ID" property="funcId" jdbcType="VARCHAR"/>
    <result column="FUNC_NAME" property="funcName" jdbcType="VARCHAR"/>
    <result column="FUNC_DESC" property="funcDesc" jdbcType="VARCHAR"/>
    <result column="FUNC_URL" property="funcUrl" jdbcType="VARCHAR"/>
  </resultMap>
  <sql id="Criteria_Where_Clause"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Apr 21 11:20:04 CST 2012.
    -->  
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate"> 
      <if test="oredCriteria[].valid!= null and oredCriteria[].valid == 'true'.toString()">( 
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and">$oredCriteria[].criteriaWithoutValue[]$</iterate>  
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and">$oredCriteria[].criteriaWithSingleValue[].condition$ #{oredCriteria[].criteriaWithSingleValue[].value}</iterate>  
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and">$oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction=",">#{oredCriteria[].criteriaWithListValue[].values[]}</iterate> 
        </iterate>  
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and">$oredCriteria[].criteriaWithBetweenValue[].condition$ #{oredCriteria[].criteriaWithBetweenValue[].values[0]} and #{oredCriteria[].criteriaWithBetweenValue[].values[1]}</iterate> )
      </if> 
    </iterate> 
  </sql>
  <select id="selectByCriteria" resultMap="BaseResultMap" parameterType="com.icbc.emall.common.model.SysFuncCriteria"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Apr 21 11:20:04 CST 2012.
    --> select FUNC_ID, FUNC_NAME, FUNC_DESC, FUNC_URL from TBL_SYS_FUNC
    <if test="_parameter != null"> 
      <include refid="TBL_SYS_FUNC.Criteria_Where_Clause"/> 
    </if> 
  </select>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="com.icbc.emall.common.model.SysFunc"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Apr 21 11:20:04 CST 2012.
    --> select FUNC_ID, FUNC_NAME, FUNC_DESC, FUNC_URL from TBL_SYS_FUNC where FUNC_ID = #{funcId:VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="com.icbc.emall.common.model.SysFunc"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Apr 21 11:20:04 CST 2012.
    --> delete from TBL_SYS_FUNC where FUNC_ID = #{funcId:VARCHAR}
  </delete>
  <delete id="deleteByCriteria" parameterType="com.icbc.emall.common.model.SysFuncCriteria"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Apr 21 11:20:04 CST 2012.
    --> delete from TBL_SYS_FUNC 
    <include refid="TBL_SYS_FUNC.Criteria_Where_Clause"/> 
  </delete>
  <insert id="insert" parameterType="com.icbc.emall.common.model.SysFunc"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Apr 21 11:20:04 CST 2012.
    --> insert into TBL_SYS_FUNC (FUNC_ID, FUNC_NAME, FUNC_DESC, FUNC_URL) values (#{funcId:VARCHAR}, #{funcName:VARCHAR}, #{funcDesc:VARCHAR}, #{funcUrl:VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.icbc.emall.common.model.SysFunc"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Apr 21 11:20:04 CST 2012.
    --> insert into TBL_SYS_FUNC 
    <trim prefix="("> 
      <if test="funcId != null">FUNC_ID ,</if>  
      <if test="funcName != null">FUNC_NAME ,</if>  
      <if test="funcDesc != null">FUNC_DESC ,</if>  
      <if test="funcUrl != null">FUNC_URL ,</if> )
    </trim> values 
    <trim prefix="("> 
      <if test="funcId != null">#{funcId:VARCHAR} ,</if>  
      <if test="funcName != null">#{funcName:VARCHAR} ,</if>  
      <if test="funcDesc != null">#{funcDesc:VARCHAR} ,</if>  
      <if test="funcUrl != null">#{funcUrl:VARCHAR} ,</if> )
    </trim> 
  </insert>
  <select id="countByCriteria" parameterType="com.icbc.emall.common.model.SysFuncCriteria" resultType="java.lang.Integer"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Apr 21 11:20:04 CST 2012.
    --> select count(*) from TBL_SYS_FUNC 
    <include refid="TBL_SYS_FUNC.Criteria_Where_Clause"/> 
  </select>
  <update id="updateByCriteriaSelective"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Apr 21 11:20:04 CST 2012.
    --> update TBL_SYS_FUNC 
    <trim prefix="set"> 
      <if test="record.funcId != null">FUNC_ID = #{record.funcId:VARCHAR} ,</if>  
      <if test="record.funcName != null">FUNC_NAME = #{record.funcName:VARCHAR} ,</if>  
      <if test="record.funcDesc != null">FUNC_DESC = #{record.funcDesc:VARCHAR} ,</if>  
      <if test="record.funcUrl != null">FUNC_URL = #{record.funcUrl:VARCHAR} ,</if> 
    </trim>  
    <if test="_parameter != null"> 
      <include refid="TBL_SYS_FUNC.Criteria_Where_Clause"/> 
    </if> 
  </update>
  <update id="updateByCriteria"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Apr 21 11:20:04 CST 2012.
    --> update TBL_SYS_FUNC set FUNC_ID = #{record.funcId:VARCHAR}, FUNC_NAME = #{record.funcName:VARCHAR}, FUNC_DESC = #{record.funcDesc:VARCHAR}, FUNC_URL = #{record.funcUrl:VARCHAR}
    <if test="_parameter != null"> 
      <include refid="TBL_SYS_FUNC.Criteria_Where_Clause"/> 
    </if> 
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.icbc.emall.common.model.SysFunc"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Apr 21 11:20:04 CST 2012.
    --> update TBL_SYS_FUNC 
    <trim prefix="set"> 
      <if test="funcName != null">FUNC_NAME = #{funcName:VARCHAR} ,</if>  
      <if test="funcDesc != null">FUNC_DESC = #{funcDesc:VARCHAR} ,</if>  
      <if test="funcUrl != null">FUNC_URL = #{funcUrl:VARCHAR} ,</if> 
    </trim> where FUNC_ID = #{funcId:VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.icbc.emall.common.model.SysFunc"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Apr 21 11:20:04 CST 2012.
    --> update TBL_SYS_FUNC set FUNC_NAME = #{funcName:VARCHAR}, FUNC_DESC = #{funcDesc:VARCHAR}, FUNC_URL = #{funcUrl:VARCHAR} where FUNC_ID = #{funcId:VARCHAR}
  </update>
  <!-- 根据user id 查找用户所属权限带有的功能 -->
  <select id="selectFuncByUserId" resultMap="BaseResultMap" parameterType="java.lang.String"> 
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Apr 21 11:20:04 CST 2012.
    --> select * from TBL_SYS_FUNC where func_id in ( select FUNC_ID from TBL_MENU where ENTITLEMENT in ( select ENTITLEMENT from TBL_ROLE_ENT_RELATION where ROLE_ID in ( select ROLE_ID from TBL_USER_ROLE_REL where USERID = #{userid:VARCHAR} ) ) )
  </select>
</mapper>
