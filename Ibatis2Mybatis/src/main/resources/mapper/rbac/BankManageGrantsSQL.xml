<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="TBL_BANK_MANAGE_GRANTS">
  <resultMap id="BankManageGrantsResult" type="com.i2shopping.i2work.operation.core.common.model.BankManageGrants">
    <result column="ENTITLEMENT" property="entitlement" jdbcType="VARCHAR2"/>
    <result column="ENTITLEMENT_NAME" property="entitlementName" jdbcType="VARCHAR2"/>
    <result column="DESCRIPTION" property="description" jdbcType="VARCHAR2"/>
    <result column="IS_MENU_REF" property="isMenuRef" jdbcType="VARCHAR2"/>
    <result column="IS_ASSIGN" property="isAssign" jdbcType="VARCHAR2"/>
  </resultMap>
  <sql id="Criteria_Where_Clause"> 
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate"> 
      <if test="oredCriteria[].valid!= null and oredCriteria[].valid == 'true'.toString()">( 
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and">$oredCriteria[].criteriaWithoutValue[]$</iterate>  
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and">$oredCriteria[].criteriaWithSingleValue[].condition$ #{oredCriteria[].criteriaWithSingleValue[].value}</iterate>  
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and">$oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction=",">#{oredCriteria[].criteriaWithListValue[].values[]}</iterate> 
        </iterate>  
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and">$oredCriteria[].criteriaWithBetweenValue[].condition$ #{oredCriteria[].criteriaWithBetweenValue[].values[0]} and #{oredCriteria[].criteriaWithBetweenValue[].values[1]}</iterate> )
      </if> 
    </iterate> 
  </sql>
  <select id="selectByPrimaryKey" resultMap="BankManageGrantsResult" parameterType="com.i2shopping.i2work.operation.core.common.model.BankManageGrants"> 
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    --> select ENTITLEMENT,ENTITLEMENT_NAME,DESCRIPTION,IS_MENU_REF,IS_ASSIGN from TBL_ENTITLEMENT where ENTITLEMENT = #{entitlement:VARCHAR}
  </select>
  <select id="selectByCriteria" resultMap="BankManageGrantsResult" parameterType="com.i2shopping.i2work.operation.core.common.dao.BankRoleGrantRelationCriteria"> 
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    --> select ENTITLEMENT,ENTITLEMENT_NAME, DESCRIPTION,IS_MENU_REF,IS_ASSIGN from TBL_ENTITLEMENT
    <if test="_parameter != null"> 
      <include refid="Criteria_Where_Clause"/> 
    </if> 
  </select>
  <delete id="deleteByPrimaryKey" parameterType="com.i2shopping.i2work.operation.core.common.model.BankManageGrants"> 
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    --> delete from TBL_ENTITLEMENT where ENTITLEMENT = #{entitlement:VARCHAR}
  </delete>
  <delete id="deleteByCriteria" parameterType="com.i2shopping.i2work.operation.core.common.model.BankManageGrantsCategoryExample"> 
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    --> delete from TBL_ENTITLEMENT 
    <include refid="Criteria_Where_Clause"/> 
  </delete>
  <insert id="insert" parameterType="com.i2shopping.i2work.operation.core.common.model.BankManageGrants"> 
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    --> insert into TBL_ENTITLEMENT (ENTITLEMENT, ENTITLEMENT_NAME, DESCRIPTION,IS_ASSIGN) values (#{entitlement:VARCHAR}, #{entitlementName:VARCHAR}, #{description:VARCHAR}, #{isAssign:VARCHAR})
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.i2shopping.i2work.operation.core.common.model.BankManageGrants"> 
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    --> update TBL_ENTITLEMENT set DESCRIPTION = #{description:VARCHAR}, IS_ASSIGN = #{isAssign:VARCHAR} where ENTITLEMENT = #{entitlement:VARCHAR}
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.i2shopping.i2work.operation.core.common.model.BankManageGrants"> 
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    --> update TBL_ENTITLEMENT 
    <trim prefix="set"> 
      <if test="description != null">DESCRIPTION = #{description:VARCHAR} ,</if>  
      <if test="isAssign != null">IS_ASSIGN = #{isAssign:VARCHAR} ,</if> 
    </trim> where ENTITLEMENT = #{entitlement:VARCHAR}
  </update>
  <select id="countByCriteria" parameterType="com.i2shopping.i2work.operation.core.common.model.BankManageGrantsCategoryExample" resultType="java.lang.Integer"> 
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    --> select count(*) from TBL_ENTITLEMENT 
    <include refid="Criteria_Where_Clause"/> 
  </select>
  <update id="updateByCriteriaSelective"> 
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    --> update TBL_ENTITLEMENT 
    <trim prefix="set"> 
      <if test="record.entitlement != null">ENTITLEMENT = #{record.entitlement:VARCHAR} ,</if>  
      <if test="record.description != null">DESCRIPTION = #{record.description:VARCHAR} ,</if>  
      <if test="record.isAssign != null">IS_ASSIGN = #{record.isAssign:VARCHAR} ,</if> 
    </trim>  
    <if test="_parameter != null"> 
      <include refid="Criteria_Where_Clause"/> 
    </if> 
  </update>
  <update id="updateByCriteria"> 
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    --> update TBL_ENTITLEMENT set ENTITLEMENT = #{record.entitlement:VARCHAR}, DESCRIPTION = #{record.description:VARCHAR}, IS_ASSIGN = #{record.isAssign:VARCHAR}
    <if test="_parameter != null"> 
      <include refid="Criteria_Where_Clause"/> 
    </if> 
  </update>
  <!--  根据角色ID获取权限 -->
  <select id="selectByRoleKey" resultMap="BankManageGrantsResult" parameterType="com.i2shopping.i2work.operation.core.common.model.BankManageGrants"> 
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    --> select ENTITLEMENT,ENTITLEMENT_NAME,DESCRIPTION,IS_MENU_REF,IS_ASSIGN from TBL_ENTITLEMENT where ENTITLEMENT in ( select ENTITLEMENT from TBL_ROLE_ENT_RELATION where ROLE_ID = #{properties.roleId:VARCHAR} )
  </select>
  <!--  根据角色ID获取可显示菜单的权限 -->
  <select id="selectShowMenuByRoleKey" resultMap="BankManageGrantsResult" parameterType="com.i2shopping.i2work.operation.core.common.model.BankManageGrants"> 
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    --> select ENTITLEMENT,ENTITLEMENT_NAME,DESCRIPTION,IS_MENU_REF,IS_ASSIGN from TBL_ENTITLEMENT where ENTITLEMENT in ( select ENTITLEMENT from TBL_ROLE_ENT_RELATION where ROLE_ID = #{properties.roleId:VARCHAR} ) and IS_MENU_REF = '1'
  </select>
  <!--  查找角色ID没有获得的权限 -->
  <select id="selectNotInByRoleKey" resultMap="BankManageGrantsResult" parameterType="com.i2shopping.i2work.operation.core.common.model.BankManageGrants"> 
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    --> select ENTITLEMENT,ENTITLEMENT_NAME,DESCRIPTION,IS_MENU_REF,IS_ASSIGN from TBL_ENTITLEMENT where ENTITLEMENT not in ( select ENTITLEMENT from TBL_ROLE_ENT_RELATION where ROLE_ID = #{properties.roleId:VARCHAR} )
  </select>
  <select id="selectIsAssignByPrimaryKey" resultType="java.lang.String" parameterType="java.lang.String">select IS_ASSIGN from TBL_ENTITLEMENT where ENTITLEMENT = #{entitlement:VARCHAR}</select>
</mapper>
