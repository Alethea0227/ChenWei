<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="tbl_setsys_param" >
  <resultMap id="BaseResultMap" class="com.i2shopping.i2work.operation.core.setsys.model.SetsysParam" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Nov 29 15:31:41 CST 2015.
    -->
    <result column="CREATE_TIME" property="createTime" jdbcType="TIMESTAMP" />
    <result column="EMPLOYEE_ID" property="employeeId" jdbcType="VARCHAR" />
    <result column="ISCKCLOSED" property="isckclosed" jdbcType="CHAR" />
    <result column="ISHARED" property="ishared" jdbcType="CHAR" />
    <result column="ISPERFORMANCE" property="isPerfromance" jdbcType="CHAR" />
    <result column="VERSION" property="version" jdbcType="VARCHAR" />
  </resultMap>
  <resultMap id="BaseResultMapAppVersion" class="com.i2shopping.i2work.operation.core.setsys.model.SetsysParam" >
  <result column="VERSION" property="version" jdbcType="VARCHAR" />
  </resultMap>
  <resultMap id="BaseResultMap1" class="com.i2shopping.i2work.operation.core.setsys.model.SetsysParam" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Nov 29 15:31:41 CST 2015.
    -->
    <result column="userName" property="userName" jdbcType="VARCHAR" />
    <result column="CREATE_TIME" property="createTime" jdbcType="TIMESTAMP" />
    <result column="EMPLOYEE_ID" property="employeeId" jdbcType="VARCHAR" />
    <result column="ISCKCLOSED" property="isckclosed" jdbcType="CHAR" />
    <result column="ISHARED" property="ishared" jdbcType="CHAR" />
    <result column="ISPERFORMANCE" property="isPerfromance" jdbcType="CHAR" />
    <result column="VERSION" property="version" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Criteria_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Nov 29 15:31:41 CST 2015.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="selectByCriteria" resultMap="BaseResultMap" parameterClass="com.i2shopping.i2work.operation.core.setsys.model.SetsysParamCriteria" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Nov 29 15:31:41 CST 2015.
    -->
    select CREATE_TIME, EMPLOYEE_ID, ISCKCLOSED, ISHARED,ISPERFORMANCE
    from tbl_setsys_param
    <isParameterPresent >
      <include refid="tbl_setsys_param.Criteria_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterClass="com.i2shopping.i2work.operation.core.setsys.model.SetsysParamKey" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Nov 29 15:31:41 CST 2015.
    -->
    select m.* 
    from tbl_setsys_param as m 
    where <!-- CREATE_TIME = #createTime:TIMESTAMP#  and  -->
    EMPLOYEE_ID = #employeeId:VARCHAR#
</select>
  <delete id="deleteByPrimaryKey" parameterClass="com.i2shopping.i2work.operation.core.setsys.model.SetsysParamKey" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Nov 29 15:31:41 CST 2015.
    -->
    delete from tbl_setsys_param
    where CREATE_TIME = #createTime:TIMESTAMP#
      and EMPLOYEE_ID = #employeeId:VARCHAR#
  </delete>
  <delete id="deleteByCriteria" parameterClass="com.i2shopping.i2work.operation.core.setsys.model.SetsysParamCriteria" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Nov 29 15:31:41 CST 2015.
    -->
    delete from tbl_setsys_param
    <include refid="tbl_setsys_param.Criteria_Where_Clause" />
  </delete>
  <insert id="insert" parameterClass="com.i2shopping.i2work.operation.core.setsys.model.SetsysParam" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Nov 29 15:31:41 CST 2015.
    -->
    insert into tbl_setsys_param (CREATE_TIME, EMPLOYEE_ID, ISCKCLOSED, ISHARED)
    values (#createTime:TIMESTAMP#, #employeeId:VARCHAR#, #isckclosed:CHAR#, #ishared:CHAR#)
  </insert>
  <insert id="insertSelective" parameterClass="com.i2shopping.i2work.operation.core.setsys.model.SetsysParam" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Nov 29 15:31:41 CST 2015.
    -->
    insert into tbl_setsys_param
    <dynamic prepend="(" >
      <isNotNull prepend="," property="createTime" >
        CREATE_TIME
      </isNotNull>
      <isNotNull prepend="," property="employeeId" >
        EMPLOYEE_ID
      </isNotNull>
      <isNotNull prepend="," property="isckclosed" >
        ISCKCLOSED
      </isNotNull>
      <isNotNull prepend="," property="ishared" >
        ISHARED
      </isNotNull>
      <isNotNull prepend="," property="isPerfromance" >
        ISPERFORMANCE
      </isNotNull>
       <isNotNull prepend="," property="version" >
        VERSION
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="createTime" >
        #createTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="employeeId" >
        #employeeId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="isckclosed" >
        #isckclosed:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="ishared" >
        #ishared:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="isPerfromance" >
        #isPerfromance:CHAR#
      </isNotNull>
       <isNotNull prepend="," property="version" >
        #version:CHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <select id="countByCriteria" parameterClass="com.i2shopping.i2work.operation.core.setsys.model.SetsysParamCriteria" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Nov 29 15:31:41 CST 2015.
    -->
    select count(*) from tbl_setsys_param
    <include refid="tbl_setsys_param.Criteria_Where_Clause" />
  </select>
  <update id="updateByCriteriaSelective" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Nov 29 15:31:41 CST 2015.
    -->
    update tbl_setsys_param
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.createTime" >
        CREATE_TIME = #record.createTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.employeeId" >
        EMPLOYEE_ID = #record.employeeId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.isckclosed" >
        ISCKCLOSED = #record.isckclosed:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.ishared" >
        ISHARED = #record.ishared:CHAR#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="tbl_setsys_param.Criteria_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="updateByCriteria" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Nov 29 15:31:41 CST 2015.
    -->
    update tbl_setsys_param
    set CREATE_TIME = #record.createTime:TIMESTAMP#,
      EMPLOYEE_ID = #record.employeeId:VARCHAR#,
      ISCKCLOSED = #record.isckclosed:CHAR#,
      ISHARED = #record.ishared:CHAR#
    <isParameterPresent >
      <include refid="tbl_setsys_param.Criteria_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="updateByPrimaryKeySelective" parameterClass="com.i2shopping.i2work.operation.core.setsys.model.SetsysParam" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Nov 29 15:31:41 CST 2015.
    -->
    update tbl_setsys_param
    <dynamic prepend="set" >
      <isNotNull prepend="," property="isckclosed" >
        ISCKCLOSED = #isckclosed:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="ishared" >
        ISHARED = #ishared:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="isPerfromance" >
        ISPERFORMANCE = #isPerfromance:CHAR#
      </isNotNull>
       <isNotNull prepend="," property="version" >
        VERSION = #version:VARCHAR#
      </isNotNull>
    </dynamic>
    where
       EMPLOYEE_ID = #employeeId:VARCHAR#
       <!--  CREATE_TIME = #createTime:TIMESTAMP# and-->
  </update>
  <update id="updateByPrimaryKey" parameterClass="com.i2shopping.i2work.operation.core.setsys.model.SetsysParam" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Nov 29 15:31:41 CST 2015.
    -->
    update tbl_setsys_param
    set ISCKCLOSED = #isckclosed:CHAR#,
      ISHARED = #ishared:CHAR#
    where CREATE_TIME = #createTime:TIMESTAMP#
      and EMPLOYEE_ID = #employeeId:VARCHAR#
  </update>
  
   <!-- 查询所有的菜单总数量 -->
  <select id="selectSetSystemListCount"  resultClass="java.lang.Integer" parameterClass="java.util.Map">
    <!-- select  count(*) from tbl_setsys_param  as m where   1 = 1 -->
     select count(*) from tbl_setsys_param m ,tbl_employee_info emi  ,tbl_department_info dept
     where emi.EMPLOYEE_ID = m.EMPLOYEE_ID
     and emi.DEPARTMENT_ID = dept.DEPARTMENT_ID
     and emi.IS_ON_DUTY='01'
     <isNotEmpty prepend="and" property="employeeName">
        emi.EMPLOYEE_NAME = #employeeName:VARCHAR#
     </isNotEmpty>
     <isNotEmpty prepend="and" property="departmentId">
       emi.DEPARTMENT_ID = #departmentId:VARCHAR#
     </isNotEmpty>
     <isNotEmpty prepend="and" property="companyId">
        emi.BEYOND_COMPANY = #companyId:VARCHAR#
     </isNotEmpty>
     <isNotEmpty prepend="and" property="area">
        dept.AREA = #area:VARCHAR#
     </isNotEmpty>
     <isNotEmpty prepend="and" property="appVersion">
        m.VERSION = #appVersion:VARCHAR#
     </isNotEmpty>
     ORDER BY m.VERSION desc
    <!-- order by m.MENU_ITEM_ID DESC-->
  </select>
  <select id="selectSetSystemList" resultMap="BaseResultMap1" parameterClass="java.util.Map">
    <!-- select m.*,date_format(m.CREATE_TIME,'%Y-%m-%d %H:%i')as createTime from tbl_setsys_param m where  1 = 1 -->

      select m.*,date_format(m.CREATE_TIME,'%Y-%m-%d %H:%i')as createTime,emi.EMPLOYEE_NAME as userName
      from tbl_setsys_param m ,tbl_employee_info emi ,tbl_department_info dept
      where emi.EMPLOYEE_ID = m.EMPLOYEE_ID
      and emi.DEPARTMENT_ID = dept.DEPARTMENT_ID
      and emi.IS_ON_DUTY='01'
      <isNotEmpty prepend="and" property="employeeName">
        emi.EMPLOYEE_NAME = #employeeName:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="and" property="departmentId">
        emi.DEPARTMENT_ID = #departmentId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="and" property="companyId">
        emi.BEYOND_COMPANY = #companyId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="and" property="area">
        dept.AREA = #area:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="and" property="appVersion">
        m.VERSION = #appVersion:VARCHAR#
      </isNotEmpty>
      ORDER BY m.VERSION desc
  </select>

  <select id="findSystemListGroupByVersion" resultMap="BaseResultMapAppVersion" parameterClass="com.i2shopping.i2work.operation.core.setsys.model.SetsysParam">
    select m.VERSION from tbl_setsys_param  as m  where 1 = 1 GROUP BY m.VERSION desc
  </select>

  
  <delete id="delSetsystemById" parameterClass="com.i2shopping.i2work.operation.core.setsys.model.SetsysParam">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Nov 29 15:31:41 CST 2015.
    -->
    delete from tbl_setsys_param
    where  EMPLOYEE_ID = #employeeId:VARCHAR#
  </delete>
</sqlMap>