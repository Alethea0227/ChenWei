<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="TBL_BANK_MANAGE_GRANTS" >
  <resultMap id="BankManageGrantsResult" class="com.i2shopping.i2work.operation.core.common.model.BankManageGrants" >
    <result column="ENTITLEMENT" property="entitlement" jdbcType="VARCHAR2" />
    <result column="ENTITLEMENT_NAME" property="entitlementName" jdbcType="VARCHAR2" />
    <result column="DESCRIPTION" property="description" jdbcType="VARCHAR2" />
    <result column="IS_MENU_REF" property="isMenuRef" jdbcType="VARCHAR2" />
    <result column="IS_ASSIGN" property="isAssign" jdbcType="VARCHAR2" />
  </resultMap>
  <sql id="Criteria_Where_Clause" >
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="selectByPrimaryKey" resultMap="BankManageGrantsResult" parameterClass="com.i2shopping.i2work.operation.core.common.model.BankManageGrants" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    -->
    select ENTITLEMENT,ENTITLEMENT_NAME,DESCRIPTION,IS_MENU_REF,IS_ASSIGN
    from TBL_ENTITLEMENT
    where ENTITLEMENT = #entitlement:VARCHAR#
  </select>
  <select id="selectByCriteria" resultMap="BankManageGrantsResult" parameterClass="com.i2shopping.i2work.operation.core.common.dao.BankRoleGrantRelationCriteria" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    -->
    select ENTITLEMENT,ENTITLEMENT_NAME, DESCRIPTION,IS_MENU_REF,IS_ASSIGN
    from TBL_ENTITLEMENT
    <isParameterPresent >
      <include refid="Criteria_Where_Clause" />
    </isParameterPresent>
  </select>
  <delete id="deleteByPrimaryKey" parameterClass="com.i2shopping.i2work.operation.core.common.model.BankManageGrants" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    -->
    delete from TBL_ENTITLEMENT
    where ENTITLEMENT = #entitlement:VARCHAR#
  </delete>
  <delete id="deleteByCriteria" parameterClass="com.i2shopping.i2work.operation.core.common.model.BankManageGrantsCategoryExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    -->
    delete from TBL_ENTITLEMENT
    <include refid="Criteria_Where_Clause" />
  </delete>
  <insert id="insert" parameterClass="com.i2shopping.i2work.operation.core.common.model.BankManageGrants" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    -->
    insert into TBL_ENTITLEMENT (ENTITLEMENT, ENTITLEMENT_NAME, DESCRIPTION,IS_ASSIGN)
    values (#entitlement:VARCHAR#, #entitlementName:VARCHAR#, #description:VARCHAR#, #isAssign:VARCHAR#)
  </insert>
  <update id="updateByPrimaryKey" parameterClass="com.i2shopping.i2work.operation.core.common.model.BankManageGrants" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    -->
    update TBL_ENTITLEMENT
    set DESCRIPTION = #description:VARCHAR#,
     IS_ASSIGN = #isAssign:VARCHAR#
    where ENTITLEMENT = #entitlement:VARCHAR#
  </update>
  <update id="updateByPrimaryKeySelective" parameterClass="com.i2shopping.i2work.operation.core.common.model.BankManageGrants" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    -->
    update TBL_ENTITLEMENT
    <dynamic prepend="set" >
      <isNotNull prepend="," property="description" >
        DESCRIPTION = #description:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="isAssign" >
        IS_ASSIGN = #isAssign:VARCHAR#
      </isNotNull>
    </dynamic>
    where ENTITLEMENT = #entitlement:VARCHAR#
  </update>
  <select id="countByCriteria" parameterClass="com.i2shopping.i2work.operation.core.common.model.BankManageGrantsCategoryExample" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    -->
    select count(*) from TBL_ENTITLEMENT
    <include refid="Criteria_Where_Clause" />
  </select>
  <update id="updateByCriteriaSelective" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    -->
    update TBL_ENTITLEMENT
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.entitlement" >
        ENTITLEMENT = #record.entitlement:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.description" >
        DESCRIPTION = #record.description:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.isAssign" >
        IS_ASSIGN = #record.isAssign:VARCHAR#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="Criteria_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="updateByCriteria" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    -->
    update TBL_ENTITLEMENT
    set ENTITLEMENT = #record.entitlement:VARCHAR#,
      DESCRIPTION = #record.description:VARCHAR#,
      IS_ASSIGN = #record.isAssign:VARCHAR#
    <isParameterPresent >
      <include refid="Criteria_Where_Clause" />
    </isParameterPresent>
  </update>
  
  
  <!--  根据角色ID获取权限 -->
  <select id="selectByRoleKey" resultMap="BankManageGrantsResult" parameterClass="com.i2shopping.i2work.operation.core.common.model.BankManageGrants" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    -->
    select ENTITLEMENT,ENTITLEMENT_NAME,DESCRIPTION,IS_MENU_REF,IS_ASSIGN
    from TBL_ENTITLEMENT
    where ENTITLEMENT 
    	in (
    		select ENTITLEMENT 
    		from TBL_ROLE_ENT_RELATION 
    		where ROLE_ID = #properties.roleId:VARCHAR#  
    	 ) 
  </select>
  
  <!--  根据角色ID获取可显示菜单的权限 -->
  <select id="selectShowMenuByRoleKey" resultMap="BankManageGrantsResult" parameterClass="com.i2shopping.i2work.operation.core.common.model.BankManageGrants" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    -->
    select ENTITLEMENT,ENTITLEMENT_NAME,DESCRIPTION,IS_MENU_REF,IS_ASSIGN
    from TBL_ENTITLEMENT
    where ENTITLEMENT 
    	in (
    		select ENTITLEMENT 
    		from TBL_ROLE_ENT_RELATION 
    		where ROLE_ID = #properties.roleId:VARCHAR#  
    	 ) and IS_MENU_REF = '1'
  </select>
  
  <!--  查找角色ID没有获得的权限 -->
  <select id="selectNotInByRoleKey" resultMap="BankManageGrantsResult" parameterClass="com.i2shopping.i2work.operation.core.common.model.BankManageGrants" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 22 20:15:13 CST 2010.
    -->
    select ENTITLEMENT,ENTITLEMENT_NAME,DESCRIPTION,IS_MENU_REF,IS_ASSIGN
    from TBL_ENTITLEMENT
    where ENTITLEMENT 
    	not in (
    		select ENTITLEMENT 
    		from TBL_ROLE_ENT_RELATION 
    		where ROLE_ID = #properties.roleId:VARCHAR#  
    	 )
  </select>
  
  <select id="selectIsAssignByPrimaryKey" resultClass="java.lang.String" parameterClass="java.lang.String">
  	select IS_ASSIGN
    from TBL_ENTITLEMENT
    where ENTITLEMENT = #entitlement:VARCHAR#
  </select>
  
</sqlMap>