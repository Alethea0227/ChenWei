<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="tbl_sign_points" >
  <resultMap id="BaseResultMap" class="com.i2shopping.i2work.operation.core.sign.model.SignPoints" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jun 29 21:14:58 CST 2015.
    -->
    <result column="SIGN_ID" property="signId" jdbcType="VARCHAR" />
    <result column="EMPLOYEE_ID" property="employeeId" jdbcType="VARCHAR" />
    <result column="SIGN_MULTIPLE_POINT" property="signMultiplePoint" jdbcType="DOUBLE" />
    <result column="SIGN_POINT_DATE" property="signPointDate" jdbcType="DATE" />
    <result column="BUSYNESS_GRADE" property="busynessGrade" jdbcType="DOUBLE" />
    <result column="CONTRACT_NO" property="contractNo" jdbcType="VARCHAR" />
    <result column="RANK_TYPE" property="rankType" jdbcType="VARCHAR" />
    <result column="UNRESOLVER_BUG_COUNT" property="unresolverBugCount" jdbcType="INTEGER" />
    <result column="QUALITY_SCORE" property="qualityScore" jdbcType="DOUBLE" />
    <result column="COMPLETE_SCORE" property="completeScore" jdbcType="DOUBLE" />
  </resultMap>
  
  
  <resultMap id="BaseResultMapEx" class="com.i2shopping.i2work.operation.core.sign.model.SignPoints" >
    <result column="EMPLOYEE_ID" property="employeeId" jdbcType="VARCHAR" />
     <result column="CONTRACT_NO" property="contractNo" jdbcType="VARCHAR" />
    <result column="SIGN_MULTIPLE_POINT" property="signMultiplePoint" jdbcType="DOUBLE" />
    <result column="BUSYNESS_GRADE" property="busynessGrade" jdbcType="DOUBLE" />
    <result column="QUALITY_SCORE" property="qualityScore" jdbcType="DOUBLE" />
    <result column="COMPLETE_SCORE" property="completeScore" jdbcType="DOUBLE" />
    <result column="UNRESOLVER_BUG_COUNT" property="unresolverBugCount" jdbcType="INTEGER" />
  </resultMap>
  
  <!-- 定时批量处理专用sql 请勿改动 -->
  <resultMap id="BaseResultMapExSchedule" class="com.i2shopping.i2work.operation.core.sign.model.SignPoints" >
    <result column="EMPLOYEE_ID" property="employeeId" jdbcType="VARCHAR" />
     <result column="CONTRACT_NO" property="contractNo" jdbcType="VARCHAR" />
    <result column="SIGN_MULTIPLE_POINT" property="signMultiplePoint" jdbcType="DOUBLE" />
    <result column="BUSYNESS_GRADE" property="busynessGrade" jdbcType="DOUBLE" />
    <result column="QUALITY_SCORE" property="qualityScore" jdbcType="DOUBLE" />
    <result column="COMPLETE_SCORE" property="completeScore" jdbcType="DOUBLE" />
  </resultMap>
  
   <resultMap id="EmployeePointMap" class="com.i2shopping.i2work.operation.core.employee.model.EmployeePoint" >
   <result column="topRank" property="topRank" jdbcType="VARCHAR" />
    <result column="EMPLOYEE_ID" property="employeeId" jdbcType="VARCHAR" />
    <result column="EMPLOYEE_DUTY" property="employeeDuty" jdbcType="VARCHAR" />
    <result column="EMPLOYEE_NAME" property="employeeName" jdbcType="VARCHAR" />
    <result column="IMAGE_ID" property="imageId" jdbcType="VARCHAR" />
    <result column="point" property="point" jdbcType="DOUBLE"/>
    <result column="busyness" property="busyness" jdbcType="DOUBLE" />
    <result column="UNRESOLVER_BUG_COUNT" property="currentBug" jdbcType="INTEGER" />
    <result column="qualityScore" property="qualityScore" jdbcType="DOUBLE" />
    <result column="completeScore" property="completeScore" jdbcType="DOUBLE" />
  </resultMap>

  
  <sql id="Criteria_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jun 29 21:14:58 CST 2015.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  
  
   <sql id="tbl_sign_points.points_Where_Clause">
    	<isNotEmpty prepend="and" property="signId">
				tbl_sign_points.SIGN_ID = #signId:VARCHAR#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="employeeId">
				tbl_sign_points.EMPLOYEE_ID = #employeeId:VARCHAR#
		</isNotEmpty>
    	<isNotEmpty prepend="and" property="signMultiplePoint">
				tbl_sign_points.SIGN_MULTIPLE_POINT = #signMultiplePoint:DOUBLE#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="signPointDate">
				tbl_sign_points.SIGN_POINT_DATE = #signPointDate:VARCHAR#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="busynessGrade">
				tbl_sign_points.BUSYNESS_GRADE = #busynessGrade:DOUBLE#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="contractNo">
				tbl_sign_points.CONTRACT_NO = #contractNo:VARCHAR#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="rankType" >
       			tbl_sign_points.RANK_TYPE = #rankType:VARCHAR#
      	</isNotEmpty>
      	<!-- 在该用户群中 -->
		<dynamic prepend=" AND tbl_sign_points.EMPLOYEE_ID IN ">
			<isNotNull property="properties">
				<isNotNull property="properties.employeeList">
					<iterate property="properties.employeeList" open="("
						close=")" conjunction=",">
						#properties.employeeList[]#
					</iterate>
				</isNotNull>
			</isNotNull>
		</dynamic>
		
		<isNotEmpty prepend="and" property="properties.beginTime">
      		<![CDATA[
      		date_format(tbl_sign_points.sign_point_date,'%Y-%m-%d')>= #properties.beginTime:VARCHAR#
            ]]>
		</isNotEmpty>
		<isNotEmpty prepend="and" property="properties.endTime">
		    <![CDATA[
		    	date_format(tbl_sign_points.sign_point_date,'%Y-%m-%d')<= #properties.endTime:VARCHAR#
            ]]>
		</isNotEmpty>
    </sql>
   
      <!-- 查询项目平均得分 -->
  <select id="selectSignPointVoByConstantNo" resultMap="BaseResultMap" parameterClass="com.i2shopping.i2work.operation.core.sign.model.SignPoints" >
      select SIGN_ID, EMPLOYEE_ID, cast(avg(SIGN_MULTIPLE_POINT)as decimal(5,1)) SIGN_MULTIPLE_POINT, SIGN_POINT_DATE, cast(avg(BUSYNESS_GRADE)as decimal(5,1)) BUSYNESS_GRADE, CONTRACT_NO,
      	RANK_TYPE, UNRESOLVER_BUG_COUNT, cast(avg(QUALITY_SCORE)as decimal(5,1)) QUALITY_SCORE, cast(avg(COMPLETE_SCORE)as decimal(5,1)) COMPLETE_SCORE
      	from tbl_sign_points where  contract_no = #contractNo:VARCHAR#
      	<isNotEmpty prepend="and" property="rankType" >
       			rank_type = #rankType:VARCHAR#
      	</isNotEmpty>
		<isNotEmpty prepend="and" property="properties.beginTime">
      		<![CDATA[
      		date_format(sign_point_date,'%Y-%m-%d')>= #properties.beginTime:VARCHAR#
            ]]>
		</isNotEmpty>
		<isNotEmpty prepend="and" property="properties.endTime">
		    <![CDATA[
		    	date_format(sign_point_date,'%Y-%m-%d')< #properties.endTime:VARCHAR#
            ]]>
		</isNotEmpty>
		group by contract_no
	</select>
   
       <!-- 查询部门今天工作完成情况 -->
  <select id="selectSignPointsByDepartmentId" resultMap="BaseResultMap" parameterClass="com.i2shopping.i2work.operation.core.sign.model.SignPoints" >
      select SIGN_ID, EMPLOYEE_ID, cast(avg(SIGN_MULTIPLE_POINT) as decimal(5,1))  SIGN_MULTIPLE_POINT, SIGN_POINT_DATE,
       cast(avg(BUSYNESS_GRADE) as decimal(5,1))  BUSYNESS_GRADE, CONTRACT_NO,
      	RANK_TYPE, UNRESOLVER_BUG_COUNT, cast(avg(QUALITY_SCORE) as decimal(5,1)) QUALITY_SCORE, cast(avg(COMPLETE_SCORE) as decimal(5,1)) COMPLETE_SCORE
      	from tbl_sign_points where  1=1
      	<dynamic prepend=" AND contract_no IN ">
			<isNotNull property="properties">
				<isNotNull property="properties.constractNoList">
					<iterate property="properties.constractNoList" open="("
						close=")" conjunction=",">
						#properties.constractNoList[]#
					</iterate>
				</isNotNull>
			</isNotNull>
		</dynamic>
      	<isNotEmpty prepend="and" property="rankType" >
       			rank_type = #rankType:VARCHAR#
      	</isNotEmpty>
		<isNotEmpty prepend="and" property="properties.beginTime">
      		<![CDATA[
      		date_format(sign_point_date,'%Y-%m-%d') = #properties.beginTime:VARCHAR#
            ]]>
		</isNotEmpty>
		group by sign_point_date
	</select>
   
      <!-- 查询项目组工作完成情况 -->
  <select id="selectSignPointsByContractNo" resultMap="BaseResultMap" parameterClass="com.i2shopping.i2work.operation.core.sign.model.SignPoints" >
      select SIGN_ID, EMPLOYEE_ID, cast(avg(SIGN_MULTIPLE_POINT)as decimal(5,1)) SIGN_MULTIPLE_POINT, SIGN_POINT_DATE, cast(avg(BUSYNESS_GRADE)as decimal(5,1)) BUSYNESS_GRADE, CONTRACT_NO,
      	RANK_TYPE, UNRESOLVER_BUG_COUNT, cast(avg(QUALITY_SCORE)as decimal(5,1)) QUALITY_SCORE, cast(avg(COMPLETE_SCORE)as decimal(5,1)) COMPLETE_SCORE
      	from tbl_sign_points where  contract_no = #contractNo:VARCHAR#
      	<isNotEmpty prepend="and" property="rankType" >
       			rank_type = #rankType:VARCHAR#
      	</isNotEmpty>
		<isNotEmpty prepend="and" property="properties.beginTime">
      		<![CDATA[
      		date_format(sign_point_date,'%Y-%m-%d')>= #properties.beginTime:VARCHAR#
            ]]>
		</isNotEmpty>
		<isNotEmpty prepend="and" property="properties.endTime">
		    <![CDATA[
		    	date_format(sign_point_date,'%Y-%m-%d')< #properties.endTime:VARCHAR#
            ]]>
		</isNotEmpty>
		group by sign_point_date order by sign_point_date
	</select>
   
     <!-- 查询员工作完成情况 -->
  <select id="selectSignPointsByEmployeeId" resultMap="BaseResultMap" parameterClass="com.i2shopping.i2work.operation.core.sign.model.SignPoints" >
      select * from tbl_sign_points where  employee_id = #employeeId:VARCHAR#
      	<isNotEmpty prepend="and" property="rankType" >
       			rank_type = #rankType:VARCHAR#
      	</isNotEmpty>
		<isNotEmpty prepend="and" property="properties.beginTime">
      		<![CDATA[
      		date_format(sign_point_date,'%Y-%m-%d')>= #properties.beginTime:VARCHAR#
            ]]>
		</isNotEmpty>
		<isNotEmpty prepend="and" property="properties.endTime">
		    <![CDATA[
		    	date_format(sign_point_date,'%Y-%m-%d')< #properties.endTime:VARCHAR#
            ]]>
		</isNotEmpty>
		order by sign_point_date
	</select>
   
    <!-- 查询员工昨日完成情况 -->
  <select id="selectYesterdaySignPoints" resultMap="BaseResultMapEx" parameterClass="com.i2shopping.i2work.operation.core.sign.model.SignPoints" >
      select * from tbl_sign_points where  EMPLOYEE_ID = #employeeId:VARCHAR# and rank_type = '1'
      	<isNotEmpty prepend="and" property="properties.queryDate">
      		<![CDATA[
      			date_format(sign_point_date,'%Y-%m-%d') = #properties.queryDate:VARCHAR#
            ]]>
		</isNotEmpty>
  </select>
   
   
  <select id="selectEmployeePointAvg" resultMap="BaseResultMapExSchedule" parameterClass="com.i2shopping.i2work.operation.core.sign.model.SignPoints" >
  	  select  p.EMPLOYEE_ID, cast(avg(p.SIGN_MULTIPLE_POINT) as decimal(5,1)) SIGN_MULTIPLE_POINT , cast(avg(p.BUSYNESS_GRADE) as decimal(5,1)) BUSYNESS_GRADE ,
  	  cast(avg(p.QUALITY_SCORE) as decimal(5,1))  QUALITY_SCORE ,cast(avg(p.COMPLETE_SCORE) as decimal(5,1))  COMPLETE_SCORE , p.CONTRACT_NO
  	  	from tbl_sign_points p
  	  	 where 1=1
      	<isNotEmpty prepend="and" property="rankType" >
       			p.RANK_TYPE = #rankType:VARCHAR#
      	</isNotEmpty>
      	<isNotEmpty prepend="and" property="contractNo">
				p.CONTRACT_NO = #contractNo:VARCHAR#
		</isNotEmpty>
      	<isNotEmpty prepend="and" property="properties.beginTime">
      		<![CDATA[
      		date_format(p.sign_point_date,'%Y-%m-%d')>= #properties.beginTime:VARCHAR#
            ]]>
		</isNotEmpty>
		<isNotEmpty prepend="and" property="properties.endTime">
		    <![CDATA[
		    	date_format(p.sign_point_date,'%Y-%m-%d')< #properties.endTime:VARCHAR#
            ]]>
		</isNotEmpty>
			group by p.EMPLOYEE_ID order by cast(avg(p.SIGN_MULTIPLE_POINT) as decimal(5,1)) desc, cast(avg(p.BUSYNESS_GRADE) as decimal(5,1))  desc
  </select>
  
  
  <select id="selectEmployeePoint" resultMap="EmployeePointMap" parameterClass="com.i2shopping.i2work.operation.core.sign.model.SignPoints" >
  	  select  (@rowNum:=@rowNum+1) as topRank, i.employee_id, i.employee_duty,i.employee_name ,i.image_id, cast(avg(p.SIGN_MULTIPLE_POINT) as decimal(5,1)) point, 
  	  cast(avg(p.BUSYNESS_GRADE) as decimal(5,1)) busyness ,cast(avg(p.QUALITY_SCORE) as decimal(5,1)) qualityScore , cast(avg(p.COMPLETE_SCORE) as decimal(5,1)) completeScore , p.UNRESOLVER_BUG_COUNT
  	  	from tbl_sign_points p,tbl_employee_info i , (Select (@rowNum :=0) ) b
  	  	 where p.employee_id = i.employee_id
      	<isNotEmpty prepend="and" property="rankType" >
       			p.RANK_TYPE = #rankType:VARCHAR#
      	</isNotEmpty>
      	<isNotEmpty prepend="and" property="properties.beginTime">
      		<![CDATA[
      		date_format(p.sign_point_date,'%Y-%m-%d')>= #properties.beginTime:VARCHAR#
            ]]>
		</isNotEmpty>
		<isNotEmpty prepend="and" property="properties.endTime">
		    <![CDATA[
		    	date_format(p.sign_point_date,'%Y-%m-%d')< #properties.endTime:VARCHAR#
            ]]>
		</isNotEmpty>
		<dynamic prepend=" AND p.employee_id IN ">
			<isNotNull property="properties">
				<isNotNull property="properties.employeeList">
					<iterate property="properties.employeeList" open="("
						close=")" conjunction=",">
						#properties.employeeList[]#
					</iterate>
				</isNotNull>
			</isNotNull>
		</dynamic>
			group by p.EMPLOYEE_ID order by point desc, busyness desc
  </select>
  
   <!-- bug排名 -->
  <select id="selectEmployeePointBug" resultMap="EmployeePointMap" parameterClass="com.i2shopping.i2work.operation.core.sign.model.SignPoints" >
  	  select  (@rowNum:=@rowNum+1) as topRank, i.employee_id, i.employee_duty,i.employee_name ,i.image_id, p.SIGN_MULTIPLE_POINT point ,
  	   p.BUSYNESS_GRADE busyness, p.QUALITY_SCORE qualityScore , p.COMPLETE_SCORE completeScore ,  p.UNRESOLVER_BUG_COUNT
  	  	from tbl_sign_points p,tbl_employee_info i , (Select (@rowNum :=0) ) b
  	  	 where p.employee_id = i.employee_id
      	<isNotEmpty prepend="and" property="rankType" >
       			p.RANK_TYPE = #rankType:VARCHAR#
      	</isNotEmpty>
      	<isNotEmpty prepend="and" property="properties.beginTime">
      		<![CDATA[
      		date_format(p.sign_point_date,'%Y-%m-%d')= #properties.beginTime:VARCHAR#
            ]]>
		</isNotEmpty>
		
		<dynamic prepend=" AND p.employee_id IN ">
			<isNotNull property="properties">
				<isNotNull property="properties.employeeList">
					<iterate property="properties.employeeList" open="("
						close=")" conjunction=",">
						#properties.employeeList[]#
					</iterate>
				</isNotNull>
			</isNotNull>
		</dynamic>
			 order by p.UNRESOLVER_BUG_COUNT desc
  </select>
  
  
 <select id="selectByCriteria" resultMap="BaseResultMap" parameterClass="com.i2shopping.i2work.operation.core.sign.model.SignPointsCriteria" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Aug 05 16:39:15 CST 2015.
    -->
    select SIGN_ID, EMPLOYEE_ID, SIGN_MULTIPLE_POINT, SIGN_POINT_DATE, BUSYNESS_GRADE, CONTRACT_NO,
      RANK_TYPE, UNRESOLVER_BUG_COUNT, QUALITY_SCORE, COMPLETE_SCORE
    from tbl_sign_points
    <isParameterPresent >
      <include refid="tbl_sign_points.Criteria_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
<select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterClass="com.i2shopping.i2work.operation.core.sign.model.SignPoints" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Aug 05 16:39:15 CST 2015.
    -->
    select SIGN_ID, EMPLOYEE_ID, SIGN_MULTIPLE_POINT, SIGN_POINT_DATE, BUSYNESS_GRADE, CONTRACT_NO,
      RANK_TYPE, UNRESOLVER_BUG_COUNT, QUALITY_SCORE, COMPLETE_SCORE
    from tbl_sign_points
    where SIGN_ID = #signId:VARCHAR#
  </select>
   <delete id="deleteByPrimaryKey" parameterClass="com.i2shopping.i2work.operation.core.sign.model.SignPoints" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Aug 05 16:39:15 CST 2015.
    -->
    delete from tbl_sign_points
    where SIGN_ID = #signId:VARCHAR#
  </delete>
  <delete id="deleteByCriteria" parameterClass="com.i2shopping.i2work.operation.core.sign.model.SignPointsCriteria" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Aug 05 16:39:15 CST 2015.
    -->
    delete from tbl_sign_points
    <include refid="tbl_sign_points.Criteria_Where_Clause" />
  </delete>
 <insert id="insert" parameterClass="com.i2shopping.i2work.operation.core.sign.model.SignPoints" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Aug 05 16:39:15 CST 2015.
    -->
    insert into tbl_sign_points (SIGN_ID, EMPLOYEE_ID, SIGN_MULTIPLE_POINT, SIGN_POINT_DATE,
      BUSYNESS_GRADE, CONTRACT_NO, RANK_TYPE, UNRESOLVER_BUG_COUNT, QUALITY_SCORE, COMPLETE_SCORE)
    values (#signId:VARCHAR#, #employeeId:VARCHAR#, #signMultiplePoint:DOUBLE#,
      #signPointDate:DATE#, #busynessGrade:DOUBLE#, #contractNo:VARCHAR#, #rankType:VARCHAR#,
      #unresolverBugCount:INTEGER#, #qualityScore:DOUBLE#, #completeScore:DOUBLE#)
  </insert>
  <insert id="insertSelective" parameterClass="com.i2shopping.i2work.operation.core.sign.model.SignPoints" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Aug 05 16:39:15 CST 2015.
    -->
    insert into tbl_sign_points
    <dynamic prepend="(" >
      <isNotNull prepend="," property="signId" >
        SIGN_ID
      </isNotNull>
      <isNotNull prepend="," property="employeeId" >
        EMPLOYEE_ID
      </isNotNull>
      <isNotNull prepend="," property="signMultiplePoint" >
        SIGN_MULTIPLE_POINT
      </isNotNull>
      <isNotNull prepend="," property="signPointDate" >
        SIGN_POINT_DATE
      </isNotNull>
      <isNotNull prepend="," property="busynessGrade" >
        BUSYNESS_GRADE
      </isNotNull>
      <isNotNull prepend="," property="contractNo" >
        CONTRACT_NO
      </isNotNull>
      <isNotNull prepend="," property="rankType" >
        RANK_TYPE
      </isNotNull>
      <isNotNull prepend="," property="unresolverBugCount" >
        UNRESOLVER_BUG_COUNT
      </isNotNull>
      <isNotNull prepend="," property="qualityScore" >
        QUALITY_SCORE
      </isNotNull>
      <isNotNull prepend="," property="completeScore" >
        COMPLETE_SCORE
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="signId" >
        #signId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="employeeId" >
        #employeeId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="signMultiplePoint" >
        #signMultiplePoint:DOUBLE#
      </isNotNull>
      <isNotNull prepend="," property="signPointDate" >
        #signPointDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="busynessGrade" >
        #busynessGrade:DOUBLE#
      </isNotNull>
      <isNotNull prepend="," property="contractNo" >
        #contractNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="rankType" >
        #rankType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="unresolverBugCount" >
        #unresolverBugCount:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="qualityScore" >
        #qualityScore:DOUBLE#
      </isNotNull>
      <isNotNull prepend="," property="completeScore" >
        #completeScore:DOUBLE#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <select id="countByCriteria" parameterClass="com.i2shopping.i2work.operation.core.sign.model.SignPointsCriteria" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Aug 05 16:39:15 CST 2015.
    -->
    select count(*) from tbl_sign_points
    <include refid="tbl_sign_points.Criteria_Where_Clause" />
  </select>
  
  <select id="selectHisTaskRef" parameterClass="com.i2shopping.i2work.operation.core.sign.model.SignPoints" resultMap="BaseResultMap">
  		select * from tbl_sign_points  
  		where EMPLOYEE_ID =#employeeId:VARCHAR#
  		<isNotEmpty prepend="AND" property="signPointDate">
      		date_format(SIGN_POINT_DATE,'%Y-%m-%d') = date_format(#signPointDate:TIMESTAMP#,'%Y-%m-%d')
   		 </isNotEmpty> 
  </select>
 <update id="updateByCriteriaSelective" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Aug 05 16:39:15 CST 2015.
    -->
    update tbl_sign_points
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.signId" >
        SIGN_ID = #record.signId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.employeeId" >
        EMPLOYEE_ID = #record.employeeId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.signMultiplePoint" >
        SIGN_MULTIPLE_POINT = #record.signMultiplePoint:DOUBLE#
      </isNotNull>
      <isNotNull prepend="," property="record.signPointDate" >
        SIGN_POINT_DATE = #record.signPointDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="record.busynessGrade" >
        BUSYNESS_GRADE = #record.busynessGrade:DOUBLE#
      </isNotNull>
      <isNotNull prepend="," property="record.contractNo" >
        CONTRACT_NO = #record.contractNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.rankType" >
        RANK_TYPE = #record.rankType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.unresolverBugCount" >
        UNRESOLVER_BUG_COUNT = #record.unresolverBugCount:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.qualityScore" >
        QUALITY_SCORE = #record.qualityScore:DOUBLE#
      </isNotNull>
      <isNotNull prepend="," property="record.completeScore" >
        COMPLETE_SCORE = #record.completeScore:DOUBLE#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="tbl_sign_points.Criteria_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="updateByCriteria" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Aug 05 16:39:15 CST 2015.
    -->
    update tbl_sign_points
    set SIGN_ID = #record.signId:VARCHAR#,
      EMPLOYEE_ID = #record.employeeId:VARCHAR#,
      SIGN_MULTIPLE_POINT = #record.signMultiplePoint:DOUBLE#,
      SIGN_POINT_DATE = #record.signPointDate:DATE#,
      BUSYNESS_GRADE = #record.busynessGrade:DOUBLE#,
      CONTRACT_NO = #record.contractNo:VARCHAR#,
      RANK_TYPE = #record.rankType:VARCHAR#,
      UNRESOLVER_BUG_COUNT = #record.unresolverBugCount:INTEGER#,
      QUALITY_SCORE = #record.qualityScore:DOUBLE#,
      COMPLETE_SCORE = #record.completeScore:DOUBLE#
    <isParameterPresent >
      <include refid="tbl_sign_points.Criteria_Where_Clause" />
    </isParameterPresent>
  </update>
 <update id="updateByPrimaryKeySelective" parameterClass="com.i2shopping.i2work.operation.core.sign.model.SignPoints" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Aug 05 16:39:15 CST 2015.
    -->
    update tbl_sign_points
    <dynamic prepend="set" >
      <isNotNull prepend="," property="employeeId" >
        EMPLOYEE_ID = #employeeId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="signMultiplePoint" >
        SIGN_MULTIPLE_POINT = #signMultiplePoint:DOUBLE#
      </isNotNull>
      <isNotNull prepend="," property="signPointDate" >
        SIGN_POINT_DATE = #signPointDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="busynessGrade" >
        BUSYNESS_GRADE = #busynessGrade:DOUBLE#
      </isNotNull>
      <isNotNull prepend="," property="contractNo" >
        CONTRACT_NO = #contractNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="rankType" >
        RANK_TYPE = #rankType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="unresolverBugCount" >
        UNRESOLVER_BUG_COUNT = #unresolverBugCount:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="qualityScore" >
        QUALITY_SCORE = #qualityScore:DOUBLE#
      </isNotNull>
      <isNotNull prepend="," property="completeScore" >
        COMPLETE_SCORE = #completeScore:DOUBLE#
      </isNotNull>
    </dynamic>
    where SIGN_ID = #signId:VARCHAR#
  </update>
 <update id="updateByPrimaryKey" parameterClass="com.i2shopping.i2work.operation.core.sign.model.SignPoints" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Aug 05 16:39:15 CST 2015.
    -->
    update tbl_sign_points
    set EMPLOYEE_ID = #employeeId:VARCHAR#,
      SIGN_MULTIPLE_POINT = #signMultiplePoint:DOUBLE#,
      SIGN_POINT_DATE = #signPointDate:DATE#,
      BUSYNESS_GRADE = #busynessGrade:DOUBLE#,
      CONTRACT_NO = #contractNo:VARCHAR#,
      RANK_TYPE = #rankType:VARCHAR#,
      UNRESOLVER_BUG_COUNT = #unresolverBugCount:INTEGER#,
      QUALITY_SCORE = #qualityScore:DOUBLE#,
      COMPLETE_SCORE = #completeScore:DOUBLE#
    where SIGN_ID = #signId:VARCHAR#
  </update>
  
  <select id="getConnectionService" parameterClass="com.i2shopping.i2work.operation.core.sign.model.SignPointsCriteria" >
     SELECT 1 FROM DUAL;
  </select>
</sqlMap>