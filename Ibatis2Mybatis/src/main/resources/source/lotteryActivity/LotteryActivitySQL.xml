<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="tbl_lottery_activity" >
  <resultMap id="BaseResultMap" class="com.i2shopping.i2work.operation.core.lotteryActivity.model.LotteryActivity" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 11 18:16:29 CST 2016.
    -->
    <result column="employee_id" property="employeeId" jdbcType="VARCHAR" />
    <result column="employee_name" property="employeeName" jdbcType="VARCHAR" />
    <result column="employee_dept" property="employeeDept" jdbcType="VARCHAR" />
    <result column="employee_url" property="employeeUrl" jdbcType="VARCHAR" />
    <result column="employee_sign_status" property="employeeSignStatus" jdbcType="CHAR" />
    <result column="employee_award_status" property="employeeAwardStatus" jdbcType="CHAR" />
    <result column="employee_mount" property="employeeMount" jdbcType="CHAR" />
    <result column="remark1" property="remark1" jdbcType="VARCHAR" />
    <result column="remark2" property="remark2" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Criteria_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 11 18:16:29 CST 2016.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="selectByCriteria" resultMap="BaseResultMap" parameterClass="com.i2shopping.i2work.operation.core.lotteryActivity.model.LotteryActivityCriteria" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 11 18:16:29 CST 2016.
    -->
    select employee_id, employee_name, employee_dept, employee_url, employee_sign_status,
      employee_award_status, employee_mount, remark1, remark2
    from tbl_lottery_activity
    <isParameterPresent >
      <include refid="tbl_lottery_activity.Criteria_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>


  
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterClass="com.i2shopping.i2work.operation.core.lotteryActivity.model.LotteryActivity" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 11 18:16:29 CST 2016.
    -->
    select employee_id, employee_name, employee_dept, employee_url, employee_sign_status,
      employee_award_status, employee_mount, remark1, remark2
    from tbl_lottery_activity
    where employee_id = #employeeId:VARCHAR#
  </select>
  <delete id="deleteByPrimaryKey" parameterClass="com.i2shopping.i2work.operation.core.lotteryActivity.model.LotteryActivity" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 11 18:16:29 CST 2016.
    -->
    delete from tbl_lottery_activity
    where employee_id = #employeeId:VARCHAR#
  </delete>
  <delete id="deleteByCriteria" parameterClass="com.i2shopping.i2work.operation.core.lotteryActivity.model.LotteryActivityCriteria" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 11 18:16:29 CST 2016.
    -->
    delete from tbl_lottery_activity
    <include refid="tbl_lottery_activity.Criteria_Where_Clause" />
  </delete>
  <insert id="insert" parameterClass="com.i2shopping.i2work.operation.core.lotteryActivity.model.LotteryActivity" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 11 18:16:29 CST 2016.
    -->
    insert into tbl_lottery_activity (employee_id, employee_name, employee_dept, employee_url,
      employee_sign_status, employee_award_status, employee_mount, remark1, remark2)
    values (#employeeId:VARCHAR#, #employeeName:VARCHAR#, #employeeDept:VARCHAR#,
      #employeeUrl:VARCHAR#, #employeeSignStatus:CHAR#, #employeeAwardStatus:CHAR#,
      #employeeMount:CHAR#, #remark1:VARCHAR#, #remark2:VARCHAR#)
  </insert>
  <insert id="insertSelective" parameterClass="com.i2shopping.i2work.operation.core.lotteryActivity.model.LotteryActivity" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 11 18:16:29 CST 2016.
    -->
    insert into tbl_lottery_activity
    <dynamic prepend="(" >
      <isNotNull prepend="," property="employeeId" >
        employee_id
      </isNotNull>
      <isNotNull prepend="," property="employeeName" >
        employee_name
      </isNotNull>
      <isNotNull prepend="," property="employeeDept" >
        employee_dept
      </isNotNull>
      <isNotNull prepend="," property="employeeUrl" >
        employee_url
      </isNotNull>
      <isNotNull prepend="," property="employeeSignStatus" >
        employee_sign_status
      </isNotNull>
      <isNotNull prepend="," property="employeeAwardStatus" >
        employee_award_status
      </isNotNull>
      <isNotNull prepend="," property="employeeMount" >
        employee_mount
      </isNotNull>
      <isNotNull prepend="," property="remark1" >
        remark1
      </isNotNull>
      <isNotNull prepend="," property="remark2" >
        remark2
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="employeeId" >
        #employeeId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="employeeName" >
        #employeeName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="employeeDept" >
        #employeeDept:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="employeeUrl" >
        #employeeUrl:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="employeeSignStatus" >
        #employeeSignStatus:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="employeeAwardStatus" >
        #employeeAwardStatus:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="employeeMount" >
        #employeeMount:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="remark1" >
        #remark1:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="remark2" >
        #remark2:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <select id="countByCriteria" parameterClass="com.i2shopping.i2work.operation.core.lotteryActivity.model.LotteryActivityCriteria" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 11 18:16:29 CST 2016.
    -->
    select count(*) from tbl_lottery_activity
    <include refid="tbl_lottery_activity.Criteria_Where_Clause" />
  </select>
  <update id="updateByCriteriaSelective" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 11 18:16:29 CST 2016.
    -->
    update tbl_lottery_activity
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.employeeId" >
        employee_id = #record.employeeId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.employeeName" >
        employee_name = #record.employeeName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.employeeDept" >
        employee_dept = #record.employeeDept:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.employeeUrl" >
        employee_url = #record.employeeUrl:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.employeeSignStatus" >
        employee_sign_status = #record.employeeSignStatus:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.employeeAwardStatus" >
        employee_award_status = #record.employeeAwardStatus:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.employeeMount" >
        employee_mount = #record.employeeMount:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.remark1" >
        remark1 = #record.remark1:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.remark2" >
        remark2 = #record.remark2:VARCHAR#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="tbl_lottery_activity.Criteria_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="updateByCriteria" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 11 18:16:29 CST 2016.
    -->
    update tbl_lottery_activity
    set employee_id = #record.employeeId:VARCHAR#,
      employee_name = #record.employeeName:VARCHAR#,
      employee_dept = #record.employeeDept:VARCHAR#,
      employee_url = #record.employeeUrl:VARCHAR#,
      employee_sign_status = #record.employeeSignStatus:CHAR#,
      employee_award_status = #record.employeeAwardStatus:CHAR#,
      employee_mount = #record.employeeMount:CHAR#,
      remark1 = #record.remark1:VARCHAR#,
      remark2 = #record.remark2:VARCHAR#
    <isParameterPresent >
      <include refid="tbl_lottery_activity.Criteria_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="updateByPrimaryKeySelective" parameterClass="com.i2shopping.i2work.operation.core.lotteryActivity.model.LotteryActivity" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 11 18:16:29 CST 2016.
    -->
    update tbl_lottery_activity
    <dynamic prepend="set" >
      <isNotNull prepend="," property="employeeName" >
        employee_name = #employeeName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="employeeDept" >
        employee_dept = #employeeDept:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="employeeUrl" >
        employee_url = #employeeUrl:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="employeeSignStatus" >
        employee_sign_status = #employeeSignStatus:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="employeeAwardStatus" >
        employee_award_status = #employeeAwardStatus:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="employeeMount" >
        employee_mount = #employeeMount:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="remark1" >
        remark1 = #remark1:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="remark2" >
        remark2 = #remark2:VARCHAR#
      </isNotNull>
    </dynamic>
    where employee_id = #employeeId:VARCHAR#
  </update>
  <update id="updateByPrimaryKey" parameterClass="com.i2shopping.i2work.operation.core.lotteryActivity.model.LotteryActivity" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 11 18:16:29 CST 2016.
    -->
    update tbl_lottery_activity
    set employee_name = #employeeName:VARCHAR#,
      employee_dept = #employeeDept:VARCHAR#,
      employee_url = #employeeUrl:VARCHAR#,
      employee_sign_status = #employeeSignStatus:CHAR#,
      employee_award_status = #employeeAwardStatus:CHAR#,
      employee_mount = #employeeMount:CHAR#,
      remark1 = #remark1:VARCHAR#,
      remark2 = #remark2:VARCHAR#
    where employee_id = #employeeId:VARCHAR#
  </update>
  <select id="findLotterActivityByLotterId" parameterClass="java.lang.String" resultMap="BaseResultMap" >
   
		select  DISTINCT b.* from tbl_respond_content as a ,tbl_lottery_activity as b
		where a.EMPLOYEE_ID = b.employee_id 
		and a.ORIGINAL_ID =(
			select tbl_or.ORIGINAL_ID from tbl_original_respond as tbl_or ,tbl_lottery_set as tbl_ls 
			where tbl_or.DESCRIPTION = tbl_ls.lottery_id  
			and tbl_ls.lottery_id = #lotterByid:VARCHAR#
			and tbl_or.ORIGINAL_STAT = 1
		)
		and a.EMPLOYEE_ID NOT in (
			SELECT EMPLOYEE_ID FROM tbl_lottery_winner
		)
		   
  </select>
  
</sqlMap>