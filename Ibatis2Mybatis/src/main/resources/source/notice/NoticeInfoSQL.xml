<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="tbl_notice_info" >
  <resultMap id="BaseResultMap" class="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfo" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 07 19:50:10 CST 2015.
    -->
    <result column="notice_info_id" property="noticeInfoId" jdbcType="VARCHAR" />
    <result column="publish_time" property="publishTime" jdbcType="TIMESTAMP" />
    <result column="publish_title" property="publishTitle" jdbcType="VARCHAR" />
    <result column="employee_name" property="employeeName" jdbcType="VARCHAR" />
    <result column="employee_id" property="employeeId" jdbcType="VARCHAR" />
    <result column="publish_type" property="publishType" jdbcType="CHAR" />
    <result column="companyId" property="companyid" jdbcType="VARCHAR" />
    <result column="sharImageAddress" property="sharImageAddress" jdbcType="VARCHAR" />
    <result column="updateImageAddress" property="updateImageAddress" jdbcType="VARCHAR" />
	  <!--<result column="downloadAddress" property="downloadAddress" jdbcType="VARCHAR" />
	  <result column="but_type" property="butType" jdbcType="VARCHAR" />-->
    <result column="weixin_title" property="weixinTitle" jdbcType="VARCHAR" />
  </resultMap>
  
  <resultMap id="ResultMapWithBLOBs" class="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfo" extends="tbl_notice_info.BaseResultMap" >
 	 <result column="publish_content" property="publishContent" jdbcType="LONGVARBINARY" />
  </resultMap>
  
   <resultMap id="ResultMapWithBLOBsEx" class="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfo" extends="tbl_notice_info.BaseResultMap" >
 	 <result column="publish_content" property="publishContent" jdbcType="LONGVARBINARY" />
 	 <result column="IS_READ" property="isRead" jdbcType="CHAR" />
  </resultMap>
  
  
  
  <sql id="Criteria_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Jul 04 11:22:43 CST 2015.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  
    <sql id="tbl_notice_info.notice_Where_Clause">
    	<isNotEmpty prepend="and" property="noticeInfoId">
				tbl_notice_info.notice_info_id = #noticeInfoId:VARCHAR#
		</isNotEmpty>
    	<isNotEmpty prepend="and" property="publishTime">
				tbl_notice_info.publish_time = #publishTime:TIMESTAMP#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="publishTitle">
				tbl_notice_info.publish_title = #publishTitle:VARCHAR#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="publishContent">
				tbl_notice_info.publish_content = #publishContent:LONGVARBINARY#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="employeeName">
				tbl_notice_info.employee_name like concat('%', #employeeName:VARCHAR#, '%')
		</isNotEmpty>
		<isNotEmpty prepend="and" property="employeeId">
				tbl_notice_info.employee_id = #employeeId:VARCHAR#
		</isNotEmpty>
      	<isNotEmpty prepend="and" property="publishType" >
       			tbl_notice_info.publish_type = #publishType:CHAR#
      	</isNotEmpty>
      	<isNotEmpty prepend="and" property="companyid">
				tbl_notice_info.companyid = #companyid:VARCHAR#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="weixinTitle">
				tbl_notice_info.weixin_title = #weixinTitle:VARCHAR#
		</isNotEmpty>
     order by publish_time desc
    </sql>
  <!-- 查询公告信息 -->
   <select id="selectNoticeInfo" resultMap="ResultMapWithBLOBs" parameterClass="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfo" >
   	 select * from tbl_notice_info
    <dynamic prepend="where">
      <include refid="tbl_notice_info.notice_Where_Clause" />
    </dynamic>
   </select>
   <!-- 查询根据时间为条件公告信息 -->
   <select id="selectNoticeInfoByDay" resultMap="ResultMapWithBLOBs" parameterClass="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfo" >
   	 select * from tbl_notice_info
    <dynamic prepend="where">
        <isNotEmpty prepend="and" property="noticeInfoId">
				notice_info_id = #noticeInfoId:VARCHAR#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="publishType" >
       			publish_type = #publishType:CHAR#
      	</isNotEmpty>
    	<isNotEmpty prepend="and" property="publishTime">
    	        date_format(publish_time,'%Y-%m-%d')= date_format(#publishTime:TIMESTAMP#,'%Y-%m-%d')
		</isNotEmpty>
    </dynamic>
  </select>
   <select id="selectNoticeInfoByShareInfolist" resultMap="ResultMapWithBLOBs" parameterClass="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfo" >
   	 select * from tbl_notice_info
    <dynamic prepend="where">
        <isNotEmpty prepend="and" property="noticeInfoId">
				notice_info_id = #noticeInfoId:VARCHAR#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="publishType" >
       			publish_type = #publishType:CHAR#
      	</isNotEmpty>
    	<isNotEmpty prepend="and" property="publishTime">
    	        date_format(publish_time,'%Y-%m-%d')= date_format(#publishTime:TIMESTAMP#,'%Y-%m-%d')
		</isNotEmpty>
    </dynamic>
  </select>
  <!-- 查询和自己有关的公告 -->
   <select id="selectNoticeInfoByPerson" resultMap="ResultMapWithBLOBsEx" parameterClass="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfoPerson" >
   	 select info.*,person.IS_READ from tbl_notice_info info, tbl_notice_info_person person where info.notice_info_id = person.notice_info_id and person.employee_id = #employeeId:VARCHAR#
  </select>
  
	<select id="countNoticeInfoByPerson" parameterClass="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfoPerson" resultClass="java.lang.Integer" >
	 select count(*) from tbl_notice_info info, tbl_notice_info_person person where info.notice_info_id = person.notice_info_id and person.employee_id = #employeeId:VARCHAR#
  </select>  
  
  
  
  <select id="selectByCriteriaWithBLOBs" resultMap="ResultMapWithBLOBs" parameterClass="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfoCriteria" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 07 19:50:10 CST 2015.
    -->
    select notice_info_id, publish_time, publish_title, employee_name, employee_id, publish_type,
      publish_content, weixin_title
    from tbl_notice_info
    <isParameterPresent >
      <include refid="tbl_notice_info.Criteria_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="selectByCriteria" resultMap="BaseResultMap" parameterClass="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfoCriteria" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 07 19:50:10 CST 2015.
    -->
    select notice_info_id, publish_time, publish_title, employee_name, employee_id, publish_type, weixin_title
    from tbl_notice_info
    <isParameterPresent >
      <include refid="tbl_notice_info.Criteria_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs" parameterClass="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfo" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 07 19:50:10 CST 2015.
    -->
    select *
    from tbl_notice_info
    where notice_info_id = #noticeInfoId:VARCHAR#
  </select>
  
   <delete id="deleteByPrimaryKey" parameterClass="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfo" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 07 19:50:10 CST 2015.
    -->
    delete from tbl_notice_info
    where notice_info_id = #noticeInfoId:VARCHAR#
  </delete>
  <delete id="deleteByCriteria" parameterClass="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfoCriteria" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 07 19:50:10 CST 2015.
    -->
    delete from tbl_notice_info
    <include refid="tbl_notice_info.Criteria_Where_Clause" />
  </delete>
  
  <insert id="insert" parameterClass="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfo" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Sep 10 15:31:13 CST 2015.
    -->
    insert into tbl_notice_info (notice_info_id, publish_time, publish_title, employee_name,
      employee_id, companyId, publish_type, publish_content, weixin_title)
    values (#noticeInfoId:VARCHAR#, #publishTime:TIMESTAMP#, #publishTitle:VARCHAR#,
      #employeeName:VARCHAR#, #employeeId:VARCHAR#, #companyid:VARCHAR#, #publishType:CHAR#,
      #publishContent:LONGVARBINARY#, #weixinTitle:VARCHAR#)
  </insert>
   <insert id="insertSelective" parameterClass="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfo" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Sep 10 15:31:13 CST 2015.
    -->
    insert into tbl_notice_info
    <dynamic prepend="(" >
      <isNotNull prepend="," property="noticeInfoId" >
        notice_info_id
      </isNotNull>
      <isNotNull prepend="," property="publishTime" >
        publish_time
      </isNotNull>
      <isNotNull prepend="," property="publishTitle" >
        publish_title
      </isNotNull>
      <isNotNull prepend="," property="employeeName" >
        employee_name
      </isNotNull>
      <isNotNull prepend="," property="employeeId" >
        employee_id
      </isNotNull>
      <isNotNull prepend="," property="companyid" >
        companyId
      </isNotNull>
      <isNotNull prepend="," property="publishType" >
        publish_type
      </isNotNull>
      <isNotNull prepend="," property="publishContent" >
        publish_content
      </isNotNull>
      <isNotNull prepend="," property="sharImageAddress" >
        sharImageAddress
      </isNotNull>
      <isNotNull prepend="," property="updateImageAddress" >
        updateImageAddress
      </isNotNull>
       <isNotNull prepend="," property="weixinTitle" >
        weixin_title
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="noticeInfoId" >
        #noticeInfoId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="publishTime" >
        #publishTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="publishTitle" >
        #publishTitle:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="employeeName" >
        #employeeName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="employeeId" >
        #employeeId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="companyid" >
        #companyid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="publishType" >
        #publishType:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="publishContent" >
        #publishContent:LONGVARBINARY#
      </isNotNull>
      <isNotNull prepend="," property="sharImageAddress" >
        #sharImageAddress:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="updateImageAddress" >
        #updateImageAddress:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="weixinTitle" >
        #weixinTitle:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  
  <select id="countByCriteria" parameterClass="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfoCriteria" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 07 19:50:10 CST 2015.
    -->
    select count(*) from tbl_notice_info
    <include refid="tbl_notice_info.Criteria_Where_Clause" />
  </select>
  <update id="updateByCriteriaSelective" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 07 19:50:10 CST 2015.
    -->
    update tbl_notice_info
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.noticeInfoId" >
        notice_info_id = #record.noticeInfoId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.publishTime" >
        publish_time = #record.publishTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.publishTitle" >
        publish_title = #record.publishTitle:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.employeeName" >
        employee_name = #record.employeeName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.employeeId" >
        employee_id = #record.employeeId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.publishType" >
        publish_type = #record.publishType:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.publishContent" >
        publish_content = #record.publishContent:LONGVARBINARY#
      </isNotNull>
      <isNotNull prepend="," property="record.weixinTitle" >
        weixin_title = #record.weixinTitle:VARCHAR#
      </isNotNull>
      
    </dynamic>
    <isParameterPresent >
      <include refid="tbl_notice_info.Criteria_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="updateByCriteriaWithBLOBs" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 07 19:50:10 CST 2015.
    -->
    update tbl_notice_info
    set notice_info_id = #record.noticeInfoId:VARCHAR#,
      publish_time = #record.publishTime:TIMESTAMP#,
      publish_title = #record.publishTitle:VARCHAR#,
      employee_name = #record.employeeName:VARCHAR#,
      employee_id = #record.employeeId:VARCHAR#,
      publish_type = #record.publishType:CHAR#,
      publish_content = #record.publishContent:LONGVARBINARY#,
      weixin_title = #record.weixinTitle:VARCHAR#
    <isParameterPresent >
      <include refid="tbl_notice_info.Criteria_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="updateByCriteria" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 07 19:50:10 CST 2015.
    -->
    update tbl_notice_info
    set notice_info_id = #record.noticeInfoId:VARCHAR#,
      publish_time = #record.publishTime:TIMESTAMP#,
      publish_title = #record.publishTitle:VARCHAR#,
      employee_name = #record.employeeName:VARCHAR#,
      employee_id = #record.employeeId:VARCHAR#,
      publish_type = #record.publishType:CHAR#,
      weixin_title = #record.weixinTitle:VARCHAR#
      
    <isParameterPresent >
      <include refid="tbl_notice_info.Criteria_Where_Clause" />
    </isParameterPresent>
  </update>
 <update id="updateByPrimaryKeySelective" parameterClass="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfo" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Sep 10 15:31:13 CST 2015.
    -->
    update tbl_notice_info
    <dynamic prepend="set" >
      <isNotNull prepend="," property="publishTime" >
        publish_time = #publishTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="publishTitle" >
        publish_title = #publishTitle:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="employeeName" >
        employee_name = #employeeName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="employeeId" >
        employee_id = #employeeId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="companyid" >
        companyId = #companyid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="publishType" >
        publish_type = #publishType:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="publishContent" >
        publish_content = #publishContent:LONGVARBINARY#
      </isNotNull>
       <isNotNull prepend="," property="publishContent" >
        publish_content = #publishContent:LONGVARBINARY#
      </isNotNull>
       <isNotNull prepend="," property="publishContent" >
        publish_content = #publishContent:LONGVARBINARY#
      </isNotNull>
       <isNotNull prepend="," property="sharImageAddress" >
        sharImageAddress = #sharImageAddress:LONGVARBINARY#
      </isNotNull>
       <isNotNull prepend="," property="updateImageAddress" >
        updateImageAddress = #updateImageAddress:LONGVARBINARY#
      </isNotNull>
      <isNotNull prepend="," property="weixinTitle" >
        weixin_title = #weixinTitle:VARCHAR#
      </isNotNull>
      
    </dynamic>
    where notice_info_id = #noticeInfoId:VARCHAR#
  </update>
 <update id="updateByPrimaryKeyWithBLOBs" parameterClass="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfo" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Sep 10 15:31:13 CST 2015.
    -->
    update tbl_notice_info
    set publish_time = #publishTime:TIMESTAMP#,
      publish_title = #publishTitle:VARCHAR#,
      employee_name = #employeeName:VARCHAR#,
      employee_id = #employeeId:VARCHAR#,
      companyId = #companyid:VARCHAR#,
      publish_type = #publishType:CHAR#,
      publish_content = #publishContent:LONGVARBINARY#,
      weixin_title = #weixinTitle:VARCHAR#
    where notice_info_id = #noticeInfoId:VARCHAR#
  </update>
  <!-- 查询所有的公告信息 -->
   <select id="selectNoticeInfoByPage" parameterClass="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfo" resultMap="ResultMapWithBLOBs">
    select * from tbl_notice_info 
		where  1=1 
      <include refid="tbl_notice_info.notice_Where_Clause" />
  </select>
  
  <!-- 查询所有的公告信息 -->
   <select id="selectAllNoticeInfo" parameterClass="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfo" resultMap="ResultMapWithBLOBs">
    select * from tbl_notice_info 
	order by publish_time desc
  </select>
  
  <select id="countNoticeInfo" parameterClass="com.i2shopping.i2work.operation.core.noticeInfo.model.NoticeInfo" resultClass="java.lang.Integer" >
	select  count(*) from tbl_notice_info 
	 where  1=1 
      <include refid="tbl_notice_info.notice_Where_Clause" />
  </select>
  <select id="selectByNoticeInfoId" resultMap="ResultMapWithBLOBs" parameterClass="java.lang.String" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 07 19:50:10 CST 2015.
    -->
    select *
    from tbl_notice_info
    where notice_info_id = #noticeInfoId:VARCHAR#
  </select>
</sqlMap>