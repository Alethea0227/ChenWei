<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="tbl_original_respond" >
  <resultMap id="BaseResultMap" class="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->
    <result column="ORIGINAL_ID" property="originalId" jdbcType="VARCHAR" />
    <result column="EMPLOYEE_ID" property="employeeId" jdbcType="VARCHAR" />
    <result column="ORIGINAL_TITLE" property="originalTitle" jdbcType="VARCHAR" />
    <result column="ORIGINAL_TYPE" property="originalType" jdbcType="CHAR" />
    <result column="PUBLISH_TIME" property="publishTime" jdbcType="TIMESTAMP" />
    <result column="REWARD" property="reward" jdbcType="INTEGER" nullValue="0"/>
   <!--  <result column="ORIGINAL_STAT" property="originalStat" jdbcType="INTEGER" />
    <result column="DESCRIPTION" property="description" jdbcType="INTEGER" /> -->
  </resultMap>
  
  <resultMap id="ResultBaseResultMapSetTopDate" class="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond" extends="tbl_original_respond.BaseResultMap" >
    <result column="SETTOPDATE" property="setTopDate" jdbcType="TIMESTAMP" />
    <result column="SETTOPSTAT" property="setTopStat" jdbcType="CHAR" />
  </resultMap>
  <resultMap id="ResultMapWithBLOBs" class="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond" extends="tbl_original_respond.BaseResultMap" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->
    <result column="ORIGINAL_CONTENT" property="originalContent" jdbcType="LONGVARCHAR" />
    <result property="respondImages" select="tbl_respond_image.selectByOriginalId" column="ORIGINAL_ID"/>
  </resultMap>
  <resultMap id="resultMapExt" class="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond" extends="ResultMapWithBLOBs">
    <result column="respond_count" property="respondCount"/>
    <result property="employeeInfo" column="EMPLOYEE_ID" select="tbl_employee_info_vo.selectByEmployeeId"/>
  </resultMap>
   <resultMap id="resultMapExt2" class="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond" extends="ResultMapWithBLOBs">
    <result column="respond_count" property="respondCount"/>
    <result column="RANDOM_NUMBER" property="randomNumber" jdbcType="INTEGER" />
      <result column="DESCRIPTION" property="description" jdbcType="VARCHAR" />
      <result column="ORIGINAL_STAT" property="originalStat" jdbcType="INTEGER" />
    <result property="employeeInfo" column="EMPLOYEE_ID" select="tbl_employee_info_vo.selectByEmployeeId"/>
  </resultMap>
  <!-- 后台管理主贴 -->
  <resultMap id="ResultBaseResultMapSetTopDateTo" class="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond" extends="resultMapExt" >
    <result column="SETTOPDATE" property="setTopDate" jdbcType="TIMESTAMP" />
    <result column="SETTOPSTAT" property="setTopStat" jdbcType="CHAR" /> 
    <result column="RANDOM_NUMBER" property="randomNumber" jdbcType="INTEGER" nullValue="0"/>
    <result column="ORIGINAL_CONTENT" property="originalContent" jdbcType="VARCHAR" />
    <result column="DESCRIPTION" property="description" jdbcType="VARCHAR" />
    <result column="ORIGINAL_STAT" property="originalStat" jdbcType="INTEGER"  />
    <result column="AGREE_WITH" property="agreeWith" jdbcType="VARCHAR" />
    <result column="RELATED_PROJECTS" property="relatedProjects" jdbcType="VARCHAR" />
 </resultMap>

 <!-- 笨鸟悬赏版 list-->
  <resultMap id="ResultBaseResultMapSetTopDateToAPP" class="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond" extends="resultMapExt" >
    <result column="SETTOPDATE" property="setTopDate" jdbcType="TIMESTAMP" />
    <result column="SETTOPSTAT" property="setTopStat" jdbcType="CHAR" /> 
  </resultMap>
  <resultMap id="ResultBaseResultMapSetTop" class="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond" extends="BaseResultMap" >
    <result column="SETTOPDATE" property="setTopDate" jdbcType="TIMESTAMP" />
    <result column="SETTOPSTAT" property="setTopStat" jdbcType="CHAR" />
    <result column="RANDOM_NUMBER" property="randomNumber" jdbcType="INTEGER" />
    <result column="ORIGINAL_CONTENT" property="originalContent" jdbcType="VARCHAR" />
    <result column="DESCRIPTION" property="description" jdbcType="VARCHAR" />
  </resultMap>
  

  <sql id="Criteria_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="selectByCriteriaWithBLOBs" resultMap="ResultMapWithBLOBs" parameterClass="com.i2shopping.i2work.operation.core.respond.model.OriginalRespondCriteria" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->
    select ORIGINAL_ID, EMPLOYEE_ID, ORIGINAL_TITLE, ORIGINAL_TYPE, PUBLISH_TIME, REWARD,
      ORIGINAL_CONTENT
    from tbl_original_respond
    <isParameterPresent >
      <include refid="tbl_original_respond.Criteria_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="selectByCriteria" resultMap="BaseResultMap" parameterClass="com.i2shopping.i2work.operation.core.respond.model.OriginalRespondCriteria" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->
    select ORIGINAL_ID, EMPLOYEE_ID, ORIGINAL_TITLE, ORIGINAL_TYPE, PUBLISH_TIME, REWARD
    from tbl_original_respond
    <isParameterPresent >
      <include refid="tbl_original_respond.Criteria_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs" parameterClass="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->
    select ORIGINAL_ID, EMPLOYEE_ID, ORIGINAL_TITLE, ORIGINAL_TYPE, PUBLISH_TIME, REWARD,
      ORIGINAL_CONTENT
    from tbl_original_respond
    where ORIGINAL_ID = #originalId:VARCHAR#
  </select>
  <delete id="deleteByPrimaryKey" parameterClass="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->
    delete from tbl_original_respond
    where ORIGINAL_ID = #originalId:VARCHAR#
  </delete>
  <delete id="deleteByCriteria" parameterClass="com.i2shopping.i2work.operation.core.respond.model.OriginalRespondCriteria" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->
    delete from tbl_original_respond
    <include refid="tbl_original_respond.Criteria_Where_Clause" />
  </delete>
  <insert id="insert" parameterClass="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
       <result column="RANDOM_NUMBER" property="randomNumber" jdbcType="INTEGER" />
    -->
    insert into tbl_original_respond (ORIGINAL_ID, EMPLOYEE_ID, ORIGINAL_TITLE, ORIGINAL_TYPE,
      PUBLISH_TIME, REWARD, ORIGINAL_CONTENT,RANDOM_NUMBER,ORIGINAL_STAT)
    values (#originalId:VARCHAR#, #employeeId:VARCHAR#, #originalTitle:VARCHAR#,
      #originalType:CHAR#, #publishTime:TIMESTAMP#, #reward:INTEGER#,
      #originalContent:LONGVARCHAR#,#randomNumber:INTEGER#,#originalStat:INTEGER#)
  </insert>
  <insert id="insertSelective" parameterClass="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->
    insert into tbl_original_respond
    <dynamic prepend="(" >
      <isNotNull prepend="," property="originalId" >
        ORIGINAL_ID
      </isNotNull>
      <isNotNull prepend="," property="employeeId" >
        EMPLOYEE_ID
      </isNotNull>
      <isNotNull prepend="," property="originalTitle" >
        ORIGINAL_TITLE
      </isNotNull>
      <isNotNull prepend="," property="originalType" >
        ORIGINAL_TYPE
      </isNotNull>
      <isNotNull prepend="," property="publishTime" >
        PUBLISH_TIME
      </isNotNull>
      <isNotNull prepend="," property="reward" >
        REWARD
      </isNotNull>
      <isNotNull prepend="," property="originalContent" >
        ORIGINAL_CONTENT
      </isNotNull>
      <isNotNull prepend="," property="setTopStat" >
        SETTOPSTAT
      </isNotNull>
      <isNotNull prepend="," property="originalStat" >
        ORIGINAL_STAT
      </isNotNull>
      <isNotNull prepend="," property="randomNumber" >
        RANDOM_NUMBER
      </isNotNull>
       <isNotNull prepend="," property="description" >
        DESCRIPTION
      </isNotNull>
      <isNotNull prepend="," property="setTopDate" >
        SETTOPDATE
      </isNotNull>
        <isNotNull prepend="," property="agreeWith" >
            AGREE_WITH
        </isNotNull>
        <isNotNull prepend="," property="relatedProjects" >
            RELATED_PROJECTS
        </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="originalId" >
        #originalId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="employeeId" >
        #employeeId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="originalTitle" >
        #originalTitle:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="originalType" >
        #originalType:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="publishTime" >
        #publishTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="reward" >
        #reward:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="originalContent" >
        #originalContent:LONGVARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="setTopStat" >
        #setTopStat:CHAR#
      </isNotNull>
       <isNotNull prepend="," property="originalStat" >
        #originalStat#
      </isNotNull>
      <isNotNull prepend="," property="randomNumber" >
         #randomNumber:INTEGER#
      </isNotNull>
       <isNotNull prepend="," property="description" >
        #description:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="setTopDate" >
        #setTopDate:TIMESTAMP#
      </isNotNull>
        <isNotNull prepend="," property="agreeWith" >
          #agreeWith:VARCHAR#
        </isNotNull>
        <isNotNull prepend="," property="relatedProjects" >
          #relatedProjects:VARCHAR#
        </isNotNull>
      )
    </dynamic>
  </insert>
  <select id="countByCriteria" parameterClass="com.i2shopping.i2work.operation.core.respond.model.OriginalRespondCriteria" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->
    select count(*) from tbl_original_respond
    <include refid="tbl_original_respond.Criteria_Where_Clause" />
  </select>
  <update id="updateByCriteriaSelective" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->
    update tbl_original_respond
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.originalId" >
        ORIGINAL_ID = #record.originalId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.employeeId" >
        EMPLOYEE_ID = #record.employeeId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.originalTitle" >
        ORIGINAL_TITLE = #record.originalTitle:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.originalType" >
        ORIGINAL_TYPE = #record.originalType:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.publishTime" >
        PUBLISH_TIME = #record.publishTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.reward" >
        REWARD = #record.reward:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.originalContent" >
        ORIGINAL_CONTENT = #record.originalContent:LONGVARCHAR#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="tbl_original_respond.Criteria_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="updateByCriteriaWithBLOBs" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->
    update tbl_original_respond
    set ORIGINAL_ID = #record.originalId:VARCHAR#,
      EMPLOYEE_ID = #record.employeeId:VARCHAR#,
      ORIGINAL_TITLE = #record.originalTitle:VARCHAR#,
      ORIGINAL_TYPE = #record.originalType:CHAR#,
      PUBLISH_TIME = #record.publishTime:TIMESTAMP#,
      REWARD = #record.reward:INTEGER#,
      ORIGINAL_CONTENT = #record.originalContent:LONGVARCHAR#
    <isParameterPresent >
      <include refid="tbl_original_respond.Criteria_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="updateByCriteria" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->
    update tbl_original_respond
    set ORIGINAL_ID = #record.originalId:VARCHAR#,
      EMPLOYEE_ID = #record.employeeId:VARCHAR#,
      ORIGINAL_TITLE = #record.originalTitle:VARCHAR#,
      ORIGINAL_TYPE = #record.originalType:CHAR#,
      PUBLISH_TIME = #record.publishTime:TIMESTAMP#,
      REWARD = #record.reward:INTEGER#
    <isParameterPresent >
      <include refid="tbl_original_respond.Criteria_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="updateByPrimaryKeySelective" parameterClass="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->
    update tbl_original_respond
    <dynamic prepend="set" >
      <isNotNull prepend="," property="employeeId" >
        EMPLOYEE_ID = #employeeId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="originalTitle" >
        ORIGINAL_TITLE = #originalTitle:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="originalType" >
        ORIGINAL_TYPE = #originalType:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="publishTime" >
        PUBLISH_TIME = #publishTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="reward" >
        REWARD = #reward:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="originalContent" >
        ORIGINAL_CONTENT = #originalContent:LONGVARCHAR#
      </isNotNull>
    </dynamic>
    where ORIGINAL_ID = #originalId:VARCHAR#
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterClass="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->
    update tbl_original_respond
    set EMPLOYEE_ID = #employeeId:VARCHAR#,
      ORIGINAL_TITLE = #originalTitle:VARCHAR#,
      ORIGINAL_TYPE = #originalType:CHAR#,
      PUBLISH_TIME = #publishTime:TIMESTAMP#,
      REWARD = #reward:INTEGER#,
      ORIGINAL_CONTENT = #originalContent:LONGVARCHAR#
    where ORIGINAL_ID = #originalId:VARCHAR#
  </update>
  <update id="updateByPrimaryKey" parameterClass="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->
    update tbl_original_respond
    set EMPLOYEE_ID = #employeeId:VARCHAR#,
      ORIGINAL_TITLE = #originalTitle:VARCHAR#,
      ORIGINAL_TYPE = #originalType:CHAR#,
      PUBLISH_TIME = #publishTime:TIMESTAMP#,
      REWARD = #reward:INTEGER#
    where ORIGINAL_ID = #originalId:VARCHAR#
  </update>
  <!-- 后台查询所有的帖子的总数量 -->
  <select id="countByRespondParameter" resultClass="java.lang.Integer" parameterClass="java.util.HashMap">
    SELECT count(1)
    FROM tbl_original_respond
    <dynamic prepend="where">
      <isNotEmpty property="originalType" prepend="and">
        ORIGINAL_TYPE = #originalType#
      </isNotEmpty>
      <isEqual property="searchType" prepend="and" compareValue="1">
        EMPLOYEE_ID = #employeeId#
      </isEqual>
       <isNotEmpty property="employeeId" prepend="and" >
        EMPLOYEE_ID = #employeeId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty property="originalId" prepend="and">
        ORIGINAL_ID = #originalId:VARCHAR#
      </isNotEmpty>
       <isNotEmpty property="originalStat" prepend="and">
        ORIGINAL_STAT = #originalStat:INTEGER#
      </isNotEmpty>
      <isNotEmpty property="setTopStat" prepend="and">
        SETTOPSTAT = #setTopStat:VARCHAR#
      </isNotEmpty>
    </dynamic>
     
  </select>
  <select id="selectByRespondParameter" resultMap="resultMapExt2" parameterClass="java.util.HashMap">
    SELECT d.*,
    count(t.RESPOND_ID) as respond_count,
    d.DESCRIPTION as description,
    d.ORIGINAL_STAT as originalStat
    FROM tbl_original_respond d
    LEFT JOIN tbl_respond_content t ON d.ORIGINAL_ID = t.ORIGINAL_ID
    <dynamic prepend="where">
      <isNotEmpty property="originalType" prepend="and">
        d.ORIGINAL_TYPE = #originalType#
      </isNotEmpty>
      <isEqual property="searchType" prepend="and" compareValue="1">
        d.EMPLOYEE_ID = #employeeId#
      </isEqual>
      <isNotEmpty property="originalId" prepend="and">
        d.ORIGINAL_ID = #originalId:VARCHAR#
      </isNotEmpty>
     <isNotEmpty property="originalStat" prepend="and">
        ORIGINAL_STAT = #originalStat:INTEGER#
      </isNotEmpty>
    </dynamic>
    GROUP by d.ORIGINAL_ID
    ORDER BY d.PUBLISH_TIME DESC
  </select>
  <!-- 后台查询所有的帖子信息-->
    <!-- 后台管理主贴2 -->
    <resultMap id="ResultBaseResultMapSetTopDateToNew" class="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond" extends="resultMapExt" >
        <result column="SETTOPDATE" property="setTopDate" jdbcType="TIMESTAMP" />
        <result column="SETTOPSTAT" property="setTopStat" jdbcType="CHAR" />
        <result column="RANDOM_NUMBER" property="randomNumber" jdbcType="INTEGER" nullValue="0"/>
        <result column="ORIGINAL_CONTENT" property="originalContent" jdbcType="VARCHAR" />
        <result column="DESCRIPTION" property="description" jdbcType="VARCHAR" />
        <result column="ORIGINAL_STAT" property="originalStat" jdbcType="INTEGER" nullValue="0"/>
    </resultMap>
    <!-- 后台查询所有的帖子信息 -->

    <select id="selectByRespondParameterOperation" resultMap="ResultBaseResultMapSetTopDateToNew" parameterClass="java.util.HashMap">
     SELECT d.*,
        count(t.RESPOND_ID) as respond_count ,
        d.SETTOPDATE as setTopDate,
        d.SETTOPSTAT as setTopStat,
        d.RANDOM_NUMBER as randomNumber,
        d.ORIGINAL_CONTENT as originalContent,
        d.DESCRIPTION as description,
        d.ORIGINAL_STAT as originalStat
    FROM tbl_original_respond d
    LEFT JOIN tbl_respond_content t ON d.ORIGINAL_ID = t.ORIGINAL_ID
    <dynamic prepend="where">
      <isNotEmpty property="originalType" prepend="and">
        d.ORIGINAL_TYPE = #originalType#
      </isNotEmpty>
      <isEqual property="searchType" prepend="and" compareValue="1">
        d.EMPLOYEE_ID = #employeeId:VARCHAR#
      </isEqual>
      <isNotEmpty property="employeeId" prepend="and" >
        d.EMPLOYEE_ID = #employeeId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty property="originalId" prepend="and">
        d.ORIGINAL_ID = #originalId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty property="originalStat" prepend="and">
        ORIGINAL_STAT = #originalStat:INTEGER#
      </isNotEmpty>
      <isNotEmpty property="setTopStat" prepend="and">
        SETTOPSTAT = #setTopStat#
      </isNotEmpty>
    </dynamic>
    GROUP by d.ORIGINAL_ID
    ORDER BY d.PUBLISH_TIME DESC
  </select>
   <!-- 笨鸟悬赏傍查询所有的帖子 d.AGREE_WITH as agreeWith,
     d.RELATED_PROJECTS as relatedProjects-->
  <select id="selectByRespondParameterOperationSign" resultMap="ResultBaseResultMapSetTopDateTo" parameterClass="java.lang.String">
     SELECT d.*,
     count(t.RESPOND_ID) as respond_count ,
     d.ORIGINAL_CONTENT as originalContent ,
     d.DESCRIPTION as description  ,
     d.RANDOM_NUMBER as randomNumber,
     d.ORIGINAL_STAT as originalStat

    FROM tbl_original_respond d
    LEFT JOIN tbl_respond_content t ON d.ORIGINAL_ID = t.ORIGINAL_ID
    where d.ORIGINAL_ID = #originalId:VARCHAR#
  </select>
  <!-- 删除帖子 -->
   <delete id="deleteByOriginalIdAndEmployeeId" parameterClass="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Jun 24 15:43:01 CST 2015.
    -->
    delete from tbl_original_respond
    where ORIGINAL_ID = #originalId:VARCHAR# and EMPLOYEE_ID = #employeeId:VARCHAR#
  </delete>
  <update id="updateBySetTopDate" parameterClass="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond" >
    <!--
         设置主贴置顶时间
    <result column="SETTOPDATE" property="setTopDate" jdbcType="TIMESTAMP" />
    <result column="SETTOPSTAT" property="setTopStat" jdbcType="CHAR" />
    -->
    update tbl_original_respond
    set 
      SETTOPDATE = #setTopDate:TIMESTAMP#,SETTOPSTAT = #setTopStat:VARCHAR#
    where ORIGINAL_ID = #originalId:VARCHAR# and EMPLOYEE_ID = #employeeId:VARCHAR#
  </update>
  <!-- timecart 查询悬赏 置顶总集合
  <select id="getAllOriginalRespondsSetTop" resultMap="resultMapExt" parameterClass="com.i2shopping.i2work.respond.model.OriginalRespond">
    SELECT DISTINCT d.*,count(t.RESPOND_ID) as respond_count FROM tbl_original_respond d
    LEFT JOIN tbl_respond_content t ON d.ORIGINAL_ID = t.ORIGINAL_ID
    where d.SETTOPSTAT = '1' ORDER BY d.SETTOPDATE desc 
  </select> -->
  <!-- 后台维护主贴 更新操作 -->
  <update id="updateByPrimaryOriginal" parameterClass="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond" >
    update tbl_original_respond
    set 
      ORIGINAL_CONTENT = #originalContent:VARCHAR#,
      ORIGINAL_TITLE = #originalTitle:VARCHAR#,
      ORIGINAL_TYPE = #originalType:CHAR#,
      SETTOPSTAT = #setTopStat:VARCHAR#,
      SETTOPDATE = #setTopDate:TIMESTAMP#,
      REWARD = #reward:INTEGER#,
      ORIGINAL_STAT = #originalStat:INTEGER#,
      RANDOM_NUMBER = #randomNumber:INTEGER#,
      AGREE_WITH = #agreeWith:VARCHAR#,
      RELATED_PROJECTS = #relatedProjects:VARCHAR#
    where ORIGINAL_ID = #originalId:VARCHAR#
  </update>
  <!-- 笨鸟悬赏榜 设置置顶只查询 未置顶的数据 未 置顶的帖子根据修改时间排序 -->
  <select id="selectByRespondParameterSetTopList" resultMap="ResultBaseResultMapSetTopDateToAPP" parameterClass="java.util.HashMap">
    SELECT d.*,
      CASE WHEN respond_count is NULL THEN 0 ELSE respond_count END as respond_count
    from (
    select * from tbl_original_respond
    <dynamic prepend="where">
      <isNotEmpty property="originalType" prepend="and">
        ORIGINAL_TYPE = #originalType#
      </isNotEmpty>
      <isEqual property="searchType" prepend="and" compareValue="1">
        EMPLOYEE_ID = #employeeId#
      </isEqual>
      <isNotEmpty property="originalId" prepend="and">
        ORIGINAL_ID = #originalId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty property="setTopStat" prepend="and">
        SETTOPSTAT = #setTopStat:VARCHAR#
      </isNotEmpty>
      <isNotEmpty property="originalStat" prepend="and">
        ORIGINAL_STAT = #originalStat:VARCHAR#
      </isNotEmpty>
    </dynamic>
    ORDER BY PUBLISH_TIME DESC
    )d
    LEFT JOIN
    (
    select ORIGINAL_ID, count(ORIGINAL_ID) as respond_count from
    tbl_respond_content
    GROUP by ORIGINAL_ID
    )t
    ON d.ORIGINAL_ID = t.ORIGINAL_ID
  </select>
  <!-- 笨鸟悬赏榜 设置置顶只查询 未置顶的数据  置顶的帖子根据置顶时间排序-->
  <select id="selectByRespondParameterSetTopListOrderby" resultMap="ResultBaseResultMapSetTopDateToAPP" parameterClass="java.util.HashMap">
    SELECT d.*,
    CASE WHEN respond_count is NULL THEN 0 ELSE respond_count END as respond_count
    from (
    select * from tbl_original_respond
    <dynamic prepend="where">
      <isNotEmpty property="originalType" prepend="and">
        ORIGINAL_TYPE = #originalType#
      </isNotEmpty>
      <isEqual property="searchType" prepend="and" compareValue="1">
        EMPLOYEE_ID = #employeeId#
      </isEqual>
      <isNotEmpty property="originalId" prepend="and">
        ORIGINAL_ID = #originalId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty property="setTopStat" prepend="and">
        SETTOPSTAT = #setTopStat:VARCHAR#
      </isNotEmpty>
      <isNotEmpty property="originalStat" prepend="and">
        ORIGINAL_STAT = #originalStat:VARCHAR#
      </isNotEmpty>
    </dynamic>
    ORDER BY PUBLISH_TIME DESC
    )d
    LEFT JOIN
    (
    select ORIGINAL_ID, count(ORIGINAL_ID) as respond_count from
    tbl_respond_content
    GROUP by ORIGINAL_ID
    )t
    ON d.ORIGINAL_ID = t.ORIGINAL_ID
  </select>
  <!-- 笨鸟悬赏榜 有状态和类型查询置顶且有效的帖子信息 -->
  <select id="selectOriginInfoBytypeAndStat" resultMap="ResultBaseResultMapSetTop" parameterClass="com.i2shopping.i2work.operation.core.respond.model.OriginalRespond">
    select *  
    from tbl_original_respond 
    where ORIGINAL_STAT =#originalStat:INTEGER#
	and ORIGINAL_TYPE =#originalType#
	and SETTOPSTAT ="1"
	order by SETTOPDATE desc limit 1
  </select>
</sqlMap>