<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="tbl_employee_leave_set">
    <resultMap id="BaseResultMap" class="com.i2shopping.i2work.operation.core.employee.model.EmployeeLeaveSet">
        <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Wed Jul 15 10:13:18 CST 2015.
        -->
        <result column="employee_leave_id" property="employeeLeaveId" jdbcType="VARCHAR"/>
        <result column="employee_leave_eid" property="employeeLeaveEid" jdbcType="VARCHAR"/>
        <result column="employee_leave_type" property="employeeLeaveType" jdbcType="VARCHAR"/>
        <result column="employee_leave_name" property="employeeLeaveName" jdbcType="VARCHAR"/>
        <result column="employee_leave_inday" property="employeeLeaveInDay" jdbcType="VARCHAR"/>
        <result column="employee_annual_Leave" property="employeeAnnualLeave" jdbcType="VARCHAR"/>
        <result column="employee_leave_spare1" property="employeeLeaveSpare1" jdbcType="VARCHAR"/>
        <result column="employee_leave_spare2" property="employeeLeaveSpare2" jdbcType="VARCHAR"/>
        <result column="employee_leave_spare3" property="employeeLeaveSpare3" jdbcType="VARCHAR"/>
    </resultMap>

    <select id="queryEmployeeLeaveSetByEidAndType" resultMap="BaseResultMap"
            parameterClass="com.i2shopping.i2work.operation.core.employee.model.EmployeeLeaveSet">
        select tes.employee_leave_id,tes.employee_leave_eid,tes.employee_leave_type,tes.employee_leave_name,
        REPLACE(tes.employee_leave_inday,CHAR(32),'') as employee_leave_inday,
        REPLACE(tes.employee_annual_leave,CHAR(32),'') as employee_annual_leave,
        tes.employee_leave_spare1,
        tes.employee_leave_spare2,tes.employee_leave_spare3
        from tbl_employee_leave_set tes ,tbl_employee_info tei
        where tei.EMPLOYEE_ID = tes.employee_leave_eid
        and tei.IS_ON_DUTY = '01'
        <isNotEmpty prepend="and" property="employeeLeaveName">
            tes.employee_leave_name = #employeeLeaveName:VARCHAR#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="employeeLeaveEid">
            tes.employee_leave_eid = #employeeLeaveEid:VARCHAR#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="employeeLeaveType">
            tes.employee_leave_type = #employeeLeaveType:VARCHAR#
        </isNotEmpty>
    </select>
    <select id="queryEmployeeLeaveSetByEidAndTypeCount" resultClass="java.lang.Integer"
            parameterClass="com.i2shopping.i2work.operation.core.employee.model.EmployeeLeaveSet">
        select count(1) from tbl_employee_leave_set tes ,tbl_employee_info tei
        where tei.EMPLOYEE_ID = tes.employee_leave_eid
        and tei.IS_ON_DUTY = '01'
        <isNotEmpty prepend="and" property="employeeLeaveName">
            tes.employee_leave_name = #employeeLeaveName:VARCHAR#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="employeeLeaveEid">
            tes.employee_leave_eid = #employeeLeaveEid:VARCHAR#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="employeeLeaveType">
            tes.employee_leave_type = #employeeLeaveType:VARCHAR#
        </isNotEmpty>
    </select>


    <insert id="insertEmployeeLeaveSetSelective"
            parameterClass="com.i2shopping.i2work.operation.core.employee.model.EmployeeLeaveSet">
        <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Wed Jul 15 10:13:18 CST 2015.
        -->
        insert into tbl_employee_leave_set
        <dynamic prepend="(">
            <isNotNull prepend="," property="employeeLeaveId">
                employee_leave_id
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveEid">
                employee_leave_eid
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveType">
                employee_leave_type
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveName">
                employee_leave_name
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveInDay">
                employee_leave_inday
            </isNotNull>
            <isNotNull prepend="," property="employeeAnnualLeave">
                employee_annual_Leave
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveSpare1">
                employee_leave_spare1
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveSpare2">
                employee_leave_spare2
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveSpare3">
                employee_leave_spare3
            </isNotNull>
            )
        </dynamic>
        values
        <dynamic prepend="(">
            <isNotNull prepend="," property="employeeLeaveId">
                #employeeLeaveId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveEid">
                #employeeLeaveEid:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveType">
                #employeeLeaveType:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveName">
                #employeeLeaveName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveInDay">
                #employeeLeaveInDay:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeAnnualLeave">
                #employeeAnnualLeave:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveSpare1">
                #employeeLeaveSpare1:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveSpare2">
                #employeeLeaveSpare2:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveSpare3">
                #employeeLeaveSpare3:VARCHAR#
            </isNotNull>
            )
        </dynamic>
    </insert>
    <update id="updateByEmployeeLeaveSetSelective"
            parameterClass="com.i2shopping.i2work.operation.core.employee.model.EmployeeLeaveSet">
        <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Wed Jul 15 10:13:18 CST 2015.
        -->
        update tbl_employee_leave_set
        <dynamic prepend="set">
            <isNotNull prepend="," property="employeeLeaveId">
                employee_leave_id = #employeeLeaveId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveEid">
                employee_leave_eid = #employeeLeaveEid:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveType">
                employee_leave_type = #employeeLeaveType:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveName">
                employee_leave_name = #employeeLeaveName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveInDay">
                employee_leave_inday = #employeeLeaveInDay:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeAnnualLeave">
                employee_annual_Leave = #employeeAnnualLeave:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveSpare1">
                employee_leave_spare1 = #employeeLeaveSpare1:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveSpare2">
                employee_leave_spare2 = #employeeLeaveSpare2:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeLeaveSpare3">
                employee_leave_spare3 = #employeeLeaveSpare3:VARCHAR#
            </isNotNull>
        </dynamic>
        where employee_leave_eid = #employeeLeaveEid:VARCHAR#
    </update>

    <update id="updateEmployeeLeaveSetAnnualLeave"
            parameterClass="com.i2shopping.i2work.operation.core.employee.model.EmployeeLeaveSet">
    update tbl_employee_leave_set SET employee_annual_leave = #employeeAnnualLeave:VARCHAR# WHERE employee_leave_name = #employeeLeaveName:VARCHAR#
  </update>

</sqlMap>