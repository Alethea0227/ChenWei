<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="tbl_project_info">
    <resultMap id="BaseResultMap" class="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Mon Jun 22 11:31:33 CST 2015.
        -->
        <result column="contract_no" property="contractNo" jdbcType="VARCHAR"/>
        <result column="project_name" property="projectName" jdbcType="VARCHAR"/>
        <result column="labour_budget" property="labourBudget" jdbcType="DECIMAL"/>
        <result column="fee_budget" property="feeBudget" jdbcType="DECIMAL"/>
        <result column="sales_budget" property="salesBudget" jdbcType="DECIMAL"/>
        <result column="contract_amount" property="contractAmount" jdbcType="DECIMAL"/>
        <result column="project_valid_amount" property="projectValidAmount" jdbcType="DECIMAL"/>
        <result column="business_fee" property="businessFee" jdbcType="DECIMAL"/>
        <result column="plan_start_date" property="planStartDate" jdbcType="DATE"/>
        <result column="plan_end_date" property="planEndDate" jdbcType="DATE"/>
        <result column="department_id" property="departmentId" jdbcType="CHAR"/>
        <result column="standwork_starttime" property="standworkStarttime" jdbcType="VARCHAR"/>
        <result column="standwork_endtime" property="standworkEndtime" jdbcType="VARCHAR"/>
        <result column="STATUS" property="status" jdbcType="CHAR"/>
        <result column="EMPLOYEE_ID" property="employeeId" jdbcType="VARCHAR"/>
        <result column="PROJECT_DETAIL" property="projectDetail" jdbcType="VARCHAR"/>
        <result column="COMPANY_ID" property="companyId" jdbcType="VARCHAR"/>
        <result column="LONGITUDE" property="longitude" jdbcType="VARCHAR"/>
        <result column="LATITUDE" property="latitude" jdbcType="VARCHAR"/>
        <result column="SHORT_PROJECT_NAME" property="shortProjectName" jdbcType="VARCHAR"/>
        <result column="RADIUS" property="radius" jdbcType="VARCHAR"/>
        <result column="project_actual_no" property="projectActualNo" jdbcType="VARCHAR"/>

    </resultMap>

    <resultMap id="resultMapExt" class="com.i2shopping.i2work.operation.core.project.model.ProjectInfo"
               extends="BaseResultMap">
        <result column="plan_warn_signin_start_date" property="signInStartDate" jdbcType="VARCHAR"/>
        <result column="plan_warn_signout_end_date" property="signOutStartDate" jdbcType="VARCHAR"/>
        <result property="departmentInfo" select="tbl_department_info.selectByDepartmentId" column="department_id"/>
        <result property="employeeInfo" select="tbl_employee_info.selectByEmployeeId" column="EMPLOYEE_ID"/>
        <result property="company" select="tbl_company.selectByCompanyId" column="COMPANY_ID"/>
    </resultMap>

    <resultMap id="resultMapExtt" class="com.i2shopping.i2work.operation.core.project.model.ProjectInfo"
               extends="resultMapExt">
        <result column="EMPLOYEE_NAME" property="employeeName" jdbcType="VARCHAR"/>
        <result column="empName" property="empName" jdbcType="VARCHAR"/>
    </resultMap>


    <resultMap id="BaseResultMapEmp" class="com.i2shopping.i2work.operation.core.project.model.ProjectInfo"
               extends="BaseResultMap">
        <result column="EMPLOYEE_NAME" property="employeeName" jdbcType="VARCHAR"/>
        <result column="MOBILE" property="mobile" jdbcType="CHAR"/>
    </resultMap>

    <resultMap id="SimpleMap" class="com.i2shopping.i2work.operation.core.project.model.ProjectInfoVo">
        <result column="contract_no" property="contractNo" jdbcType="VARCHAR"/>
        <result column="project_name" property="projectName" jdbcType="VARCHAR"/>
        <result column="department_id" property="departmentId" jdbcType="VARCHAR"></result>
        <result column="project_actual_no" property="projectActualNo" jdbcType="VARCHAR"></result>
    </resultMap>


    <sql id="project_Where_Clause">
        <isNotEmpty property="departmentId" prepend="and">
            TBL_PROJECT_INFO.department_id = #departmentId:VARCHAR#
        </isNotEmpty>
        <isNotEmpty property="companyId" prepend="and">
            TBL_PROJECT_INFO.COMPANY_ID = #companyId:VARCHAR#
        </isNotEmpty>
        <isNotEmpty property="projectName" prepend="and">
            TBL_PROJECT_INFO.project_name like concat('%', #projectName:VARCHAR#, '%')
        </isNotEmpty>
    </sql>

    <sql id="Criteria_Where_Clause">
        <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Mon Jun 22 11:31:33 CST 2015.
        -->
        <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate">
            <isEqual property="oredCriteria[].valid" compareValue="true">
                (
                <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and">
                    $oredCriteria[].criteriaWithoutValue[]$
                </iterate>
                <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and">
                    $oredCriteria[].criteriaWithSingleValue[].condition$
                    #oredCriteria[].criteriaWithSingleValue[].value#
                </iterate>
                <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and">
                    $oredCriteria[].criteriaWithListValue[].condition$
                    <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")"
                             conjunction=",">
                        #oredCriteria[].criteriaWithListValue[].values[]#
                    </iterate>
                </iterate>
                <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and">
                    $oredCriteria[].criteriaWithBetweenValue[].condition$
                    #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
                    #oredCriteria[].criteriaWithBetweenValue[].values[1]#
                </iterate>
                )
            </isEqual>
        </iterate>
    </sql>
    <select id="selectByCriteria" resultMap="BaseResultMap"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfoCriteria">
        <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Mon Jun 22 11:31:33 CST 2015.
        -->
        select *
        from tbl_project_info
        <isParameterPresent>
            <include refid="tbl_project_info.Criteria_Where_Clause"/>
            <isNotNull property="orderByClause">
                order by $orderByClause$
            </isNotNull>
        </isParameterPresent>
    </select>

    <!-- 查询项目经理详细信息 -->
    <select id="selectByProjectInfoEmp" resultMap="BaseResultMapEmp"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
    select pro.*, emp.employee_name, emp.mobile
    from tbl_project_info pro, tbl_employee_info emp
    where pro.employee_id = emp.employee_id
    and contract_no = #contractNo:VARCHAR#
  </select>

    <select id="selectByPrimaryKey" resultMap="resultMapExt"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Mon Jun 22 11:31:33 CST 2015.
        -->
        select *
        from tbl_project_info
        where contract_no = #contractNo:VARCHAR#
    </select>

    <select id="selectByPrimaryKeyS" resultMap="resultMapExt" parameterClass="java.lang.String">
         select *
        from tbl_project_info
        where contract_no = #value :VARCHAR#
    </select>

    <delete id="deleteByPrimaryKey" parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Mon Jun 22 11:31:33 CST 2015.
        -->
        delete from tbl_project_info
        where contract_no = #contractNo:VARCHAR#
    </delete>
    <delete id="deleteByCriteria"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfoCriteria">
        <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Mon Jun 22 11:31:33 CST 2015.
        -->
        delete from tbl_project_info
        <include refid="tbl_project_info.Criteria_Where_Clause"/>
    </delete>
    <insert id="insert" parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Mon Jun 22 11:31:33 CST 2015.
        -->
        insert into tbl_project_info (contract_no, project_name, short_project_name,labour_budget, fee_budget,
        sales_budget, contract_amount, project_valid_amount, business_fee, plan_start_date,
        plan_end_date, department_id, standwork_starttime, standwork_endtime, STATUS, EMPLOYEE_ID
        ,PROJECT_DETAIL,COMPANY_ID,LONGITUDE,LATITUDE,RADIUS,project_actual_no,plan_warn_signin_start_date,plan_warn_signout_end_date)
        values (#contractNo:VARCHAR#, #projectName:VARCHAR#, #shortProjectName#,#labourBudget:DECIMAL#,
        #feeBudget:DECIMAL#, #salesBudget:DECIMAL#, #contractAmount:DECIMAL#,
        #projectValidAmount:DECIMAL#, #businessFee:DECIMAL#, #planStartDate:DATE#, #planEndDate:DATE#,
        #departmentId:CHAR#, #standworkStarttime:VARCHAR#, #standworkEndtime:VARCHAR#, #status:CHAR#,
        #employeeId:VARCHAR#,#projectDetail:VARCHAR#,#companyId:VARCHAR#,#longitude:VARCHAR#
        ,#latitude:VARCHAR#,#radius:VARCHAR#,#projectActualNo:VARCHAR#,#signInStartDate:VARCHAR#,#signOutStartDate:VARCHAR#)
    </insert>
    <insert id="insertSelective" parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Mon Jun 22 11:31:33 CST 2015.
        -->
        insert into tbl_project_info
        <dynamic prepend="(">
            <isNotNull prepend="," property="contractNo">
                contract_no
            </isNotNull>
            <isNotNull prepend="," property="projectName">
                project_name
            </isNotNull>
            <isNotNull prepend="," property="shortProjectName">
                short_project_name
            </isNotNull>
            <isNotNull prepend="," property="labourBudget">
                labour_budget
            </isNotNull>
            <isNotNull prepend="," property="feeBudget">
                fee_budget
            </isNotNull>
            <isNotNull prepend="," property="salesBudget">
                sales_budget
            </isNotNull>
            <isNotNull prepend="," property="contractAmount">
                contract_amount
            </isNotNull>
            <isNotNull prepend="," property="projectValidAmount">
                project_valid_amount
            </isNotNull>
            <isNotNull prepend="," property="businessFee">
                business_fee
            </isNotNull>
            <isNotNull prepend="," property="planStartDate">
                plan_start_date
            </isNotNull>
            <isNotNull prepend="," property="planEndDate">
                plan_end_date
            </isNotNull>
            <isNotNull prepend="," property="departmentId">
                department_id
            </isNotNull>
            <isNotNull prepend="," property="standworkStarttime">
                standwork_starttime
            </isNotNull>
            <isNotNull prepend="," property="standworkEndtime">
                standwork_endtime
            </isNotNull>
            <isNotNull prepend="," property="status">
                STATUS
            </isNotNull>
            <isNotNull prepend="," property="employeeId">
                EMPLOYEE_ID
            </isNotNull>
            <isNotNull prepend="," property="projectDetail">
                PROJECT_DETAIL
            </isNotNull>
            <isNotNull prepend="," property="companyId">
                COMPANY_ID
            </isNotNull>
            <isNotNull prepend="," property="longitude">
                LONGITUDE
            </isNotNull>
            <isNotNull prepend="," property="latitude">
                LATITUDE
            </isNotNull>
            <isNotNull prepend="," property="radius">
                RADIUS
            </isNotNull>
            <isNotNull prepend="," property="projectActualNo">
                project_actual_no
            </isNotNull>
            )
        </dynamic>
        values
        <dynamic prepend="(">
            <isNotNull prepend="," property="contractNo">
                #contractNo:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="projectName">
                #projectName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="shortProjectName">
                #shortProjectName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="labourBudget">
                #labourBudget:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="feeBudget">
                #feeBudget:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="salesBudget">
                #salesBudget:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="contractAmount">
                #contractAmount:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="projectValidAmount">
                #projectValidAmount:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="businessFee">
                #businessFee:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="planStartDate">
                #planStartDate:DATE#
            </isNotNull>
            <isNotNull prepend="," property="planEndDate">
                #planEndDate:DATE#
            </isNotNull>
            <isNotNull prepend="," property="departmentId">
                #departmentId:CHAR#
            </isNotNull>
            <isNotNull prepend="," property="standworkStarttime">
                #standworkStarttime:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="standworkEndtime">
                #standworkEndtime:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="status">
                #status:CHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeId">
                #employeeId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="projectDetail">
                #projectDetail:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="companyId">
                #companyId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="longitude">
                #longitude:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="latitude">
                #latitude:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="radius">
                #radius:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="projectActualNo">
                #projectActualNo:VARCHAR#
            </isNotNull>
            )
        </dynamic>
    </insert>
    <select id="countByCriteria" parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfoCriteria"
            resultClass="java.lang.Integer">
        <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Mon Jun 22 11:31:33 CST 2015.
        -->
        select count(*) from tbl_project_info
        <include refid="tbl_project_info.Criteria_Where_Clause"/>
    </select>
    <update id="updateByCriteriaSelective">
        <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Mon Jun 22 11:31:33 CST 2015.
        -->
        update tbl_project_info
        <dynamic prepend="set">
            <isNotNull prepend="," property="record.contractNo">
                contract_no = #record.contractNo:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.projectName">
                project_name = #record.projectName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.shortProjectName">
                short_project_name = #record.shortProjectName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.labourBudget">
                labour_budget = #record.labourBudget:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.feeBudget">
                fee_budget = #record.feeBudget:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.salesBudget">
                sales_budget = #record.salesBudget:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.contractAmount">
                contract_amount = #record.contractAmount:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.projectValidAmount">
                project_valid_amount = #record.projectValidAmount:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.businessFee">
                business_fee = #record.businessFee:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.planStartDate">
                plan_start_date = #record.planStartDate:DATE#
            </isNotNull>
            <isNotNull prepend="," property="record.planEndDate">
                plan_end_date = #record.planEndDate:DATE#
            </isNotNull>
            <isNotNull prepend="," property="record.departmentId">
                department_id = #record.departmentId:CHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.standworkStarttime">
                standwork_starttime = #record.standworkStarttime:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.standworkEndtime">
                standwork_endtime = #record.standworkEndtime:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.status">
                STATUS = #record.status:CHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.employeeId">
                EMPLOYEE_ID = #record.employeeId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.projectDetail">
                PROJECT_DETAIL = #record.projectDetail:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.companyId">
                COMPANY_ID = #record.companyId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.latitude">
                LATITUDE = #record.latitude:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.longitude">
                LONGITUDE = #record.longitude:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.radius">
                RADIUS = #record.radius:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.projectActualNo">
                project_actual_no = #record.projectActualNo:VARCHAR#
            </isNotNull>
        </dynamic>
        <isParameterPresent>
            <include refid="tbl_project_info.Criteria_Where_Clause"/>
        </isParameterPresent>
    </update>
    <update id="updateByCriteria">
        <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Mon Jun 22 11:31:33 CST 2015.
        -->
        update tbl_project_info
        set contract_no = #record.contractNo:VARCHAR#,
        project_name = #record.projectName:VARCHAR#,
        short_project_name = #record.shortProjectName:VARCHAR#,
        labour_budget = #record.labourBudget:DECIMAL#,
        fee_budget = #record.feeBudget:DECIMAL#,
        sales_budget = #record.salesBudget:DECIMAL#,
        contract_amount = #record.contractAmount:DECIMAL#,
        project_valid_amount = #record.projectValidAmount:DECIMAL#,
        business_fee = #record.businessFee:DECIMAL#,
        plan_start_date = #record.planStartDate:DATE#,
        plan_end_date = #record.planEndDate:DATE#,
        department_id = #record.departmentId:CHAR#,
        standwork_starttime = #record.standworkStarttime:VARCHAR#,
        standwork_endtime = #record.standworkEndtime:VARCHAR#,
        STATUS = #record.status:CHAR#,
        EMPLOYEE_ID = #record.employeeId:VARCHAR#,
        PROJECT_DETAIL = #record.projectDetail:VARCHAR#,
        COMPANY_ID = #record.companyId:VARCHAR#,
        LONGITUDE = #record.longitude:VARCHAR#,
        LATITUDE = #record.latitude:VARCHAR#,
        RADIUS = #record.radius:VARCHAR#,
        project_actual_no = #record.projectActualNo:VARCHAR#
        <isParameterPresent>
            <include refid="tbl_project_info.Criteria_Where_Clause"/>
        </isParameterPresent>
    </update>
    <update id="updateByPrimaryKeySelective"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Mon Jun 22 11:31:33 CST 2015.
        -->
        update tbl_project_info
        <dynamic prepend="set">
            <isNotNull prepend="," property="projectName">
                project_name = #projectName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="shortProjectName">
                short_project_name = #shortProjectName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="labourBudget">
                labour_budget = #labourBudget:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="feeBudget">
                fee_budget = #feeBudget:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="salesBudget">
                sales_budget = #salesBudget:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="contractAmount">
                contract_amount = #contractAmount:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="projectValidAmount">
                project_valid_amount = #projectValidAmount:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="businessFee">
                business_fee = #businessFee:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="planStartDate">
                plan_start_date = #planStartDate:DATE#
            </isNotNull>
            <isNotNull prepend="," property="planEndDate">
                plan_end_date = #planEndDate:DATE#
            </isNotNull>
            <isNotNull prepend="," property="departmentId">
                department_id = #departmentId:CHAR#
            </isNotNull>
            <isNotNull prepend="," property="standworkStarttime">
                standwork_starttime = #standworkStarttime:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="standworkEndtime">
                standwork_endtime = #standworkEndtime:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="status">
                STATUS = #status:CHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeId">
                EMPLOYEE_ID = #employeeId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="projectDetail">
                PROJECT_DETAIL = #projectDetail:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="companyId">
                COMPANY_ID = #companyId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="longitude">
                LONGITUDE = #longitude:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="latitude">
                LATITUDE = #latitude:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="radius">
                RADIUS = #radius:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="projectActualNo">
                project_actual_no = #projectActualNo:VARCHAR#
            </isNotNull>
        </dynamic>
        where contract_no = #contractNo:VARCHAR#
    </update>
    <update id="updateByPrimaryKey" parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Mon Jun 22 11:31:33 CST 2015.
        -->
        update tbl_project_info
        set project_name = #projectName:VARCHAR#,
        short_project_name = #shortProjectName:VARCHAR#,
        labour_budget = #labourBudget:DECIMAL#,
        fee_budget = #feeBudget:DECIMAL#,
        sales_budget = #salesBudget:DECIMAL#,
        contract_amount = #contractAmount:DECIMAL#,
        project_valid_amount = #projectValidAmount:DECIMAL#,
        business_fee = #businessFee:DECIMAL#,
        plan_start_date = #planStartDate:DATE#,
        plan_end_date = #planEndDate:DATE#,
        department_id = #departmentId:CHAR#,
        standwork_starttime = #standworkStarttime:VARCHAR#,
        standwork_endtime = #standworkEndtime:VARCHAR#,
        STATUS = #status:CHAR#,
        EMPLOYEE_ID = #employeeId:VARCHAR#,
        PROJECT_DETAIL = #projectDetail:VARCHAR#,
        COMPANY_ID = #companyId:VARCHAR#,
        LONGITUDE = #longitude:VARCHAR#,
        LATITUDE = #latitude:VARCHAR#,
        RADIUS = #radius:VARCHAR#,
        project_actual_no = #projectActualNo:VARCHAR#,
        plan_warn_signin_start_date = #signInStartDate:VARCHAR#,
        plan_warn_signout_end_date = #signOutStartDate:VARCHAR#
        where contract_no = #contractNo:VARCHAR#
    </update>
    <select id="selectProjectListByEmployeeId" resultMap="resultMapExt" parameterClass="java.lang.String">
    select o.*
    from tbl_project_info o,tbl_project_etc tc
    where o.contract_no = tc.contract_no
    and tc.employee_id= #value:VARCHAR#
    and tc.is_leave='00'
  </select>

    <select id="selectProjectByEmployeeId" resultMap="BaseResultMap" parameterClass="java.lang.String">
  select o.*
  from tbl_project_info o,tbl_project_etc tc
  where o.contract_no = tc.contract_no
  and tc.employee_id= #value:VARCHAR#
  and tc.is_leave='00'
</select>

    <select id="selectByProjectInfo" resultMap="resultMapExt"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        SELECT *
        FROM tbl_project_info
        <dynamic prepend="where">
            <include refid="tbl_project_info.project_Where_Clause"/>
        </dynamic>
    </select>
    <select id="countByProjectInfo" resultClass="java.lang.Integer"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        SELECT count(1)
        FROM tbl_project_info
        <dynamic prepend="where">
            <include refid="tbl_project_info.project_Where_Clause"/>
        </dynamic>
    </select>


    <!-- 2016年8月10日 添加查询项目 执行周期  该方法特殊请看清出语句在使用-->
    <select id="selectByProjectInfoByPageStatByTimer" resultMap="resultMapExt"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        SELECT *
        FROM tbl_project_info pi
        <dynamic prepend="where">
            <isNotNull property="departmentId" prepend="and">
                pi.department_id = #departmentId:VARCHAR#
            </isNotNull>
            <isNotNull property="companyId" prepend="and">
                pi.COMPANY_ID = #companyId:VARCHAR#
            </isNotNull>
            <isNotNull property="projectName" prepend="and">
                pi.project_name like concat('%', #projectName:VARCHAR#, '%')
            </isNotNull>
            <!-- 项目无效    项目结束时间小于当前日期 没有多余字段直接使用 planStartDate 作为结束时间 -->
            <isNotNull property="planStartDate" prepend="and">
                <![CDATA[
        pi.plan_end_date <= date_format(#planStartDate:DATE#,'%Y-%m-%d')
      ]]>
            </isNotNull>
            <!-- 项目有效  项目结束时间大于当前时间 -->
            <isNotNull property="planEndDate" prepend="and">
                <![CDATA[
        pi.plan_end_date >= date_format(#planEndDate:DATE#,'%Y-%m-%d')
      ]]>
            </isNotNull>
        </dynamic>
    </select>


    <!-- 2016年8月10日 添加查询项目 执行周期  该方法特殊请看清出语句在使用-->
    <select id="selectByProjectInfoByPageStatByTimerr" resultMap="resultMapExtt"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        <!--SELECT ei.EMPLOYEE_NAME,ei.EMPLOYEE_ID,pe.contract_no,pi.*-->
        <!--FROM tbl_employee_info ei,tbl_project_etc pe,tbl_project_info pi-->
        <!--WHERE  ei.EMPLOYEE_ID = pe.employee_id-->
        <!--AND pi.contract_no = pe.contract_no-->
        <!--<dynamic>-->
        <!--<isNotNull property="departmentId" prepend="and">-->
        <!--pi.department_id = #departmentId:VARCHAR#-->
        <!--</isNotNull>-->
        <!--<isNotNull property="companyId" prepend="and">-->
        <!--pi.COMPANY_ID = #companyId:VARCHAR#-->
        <!--</isNotNull>-->
        <!--<isNotNull property="projectName" prepend="and">-->
        <!--pi.project_name like concat('%', #projectName:VARCHAR#, '%')-->
        <!--</isNotNull>-->
        <!--<isNotNull property="employeeName" prepend="and">-->
        <!--ei.EMPLOYEE_NAME like concat('%', #employeeName:VARCHAR#, '%')-->
        <!--</isNotNull>-->
        <!--&lt;!&ndash; 项目无效    项目结束时间小于当前日期 没有多余字段直接使用 planStartDate 作为结束时间 &ndash;&gt;-->
        <!--<isNotNull property="planStartDate" prepend="and">-->
        <!--<![CDATA[-->
        <!--pi.plan_end_date <= date_format(#planStartDate:DATE#,'%Y-%m-%d')-->
        <!--]]>-->
        <!--</isNotNull>-->
        <!--&lt;!&ndash; 项目有效  项目结束时间大于当前时间 &ndash;&gt;-->
        <!--<isNotNull property="planEndDate" prepend="and">-->
        <!--<![CDATA[-->
        <!--pi.plan_end_date >= date_format(#planEndDate:DATE#,'%Y-%m-%d')-->
        <!--]]>-->
        <!--</isNotNull>-->
        <!--</dynamic>-->
        SELECT tbl.*,ei.EMPLOYEE_NAME
        FROM (SELECT
        ei.EMPLOYEE_NAME AS empName,
        ei.EMPLOYEE_ID empId,
        pe.contract_no conNo,
        pi.*
        FROM
        tbl_employee_info ei,
        tbl_project_etc pe,
        tbl_project_info pi
        WHERE
        ei.EMPLOYEE_ID = pe.employee_id
        AND pi.contract_no = pe.contract_no
        AND ei.EMPLOYEE_NAME like concat('%', #employeeName:VARCHAR#, '%')) tbl LEFT JOIN tbl_employee_info ei
        on tbl.EMPLOYEE_ID = ei.EMPLOYEE_ID
    </select>
    <!-- 2016年8月10日 添加查询项目 执行周期 -->
    <select id="countByProjectInfoStatByTimer" resultClass="java.lang.Integer"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        SELECT count(1)
        FROM tbl_project_info pi,tbl_project_etc pe
        where pe.contract_no = pi.contract_no
        <dynamic>
            <isNotNull property="departmentId" prepend="and">
                pi.department_id = #departmentId:VARCHAR#
            </isNotNull>
            <isNotNull property="companyId" prepend="and">
                pi.COMPANY_ID = #companyId:VARCHAR#
            </isNotNull>
            <isNotNull property="projectName" prepend="and">
                pi.project_name like concat('%', #projectName:VARCHAR#, '%')
            </isNotNull>
            <!-- 项目无效    项目结束时间小于当前日期 没有多余字段直接使用 planStartDate 作为结束时间 -->
            <isNotNull property="planStartDate" prepend="and">
                <![CDATA[
      	 pi.plan_end_date <= date_format(#planStartDate:DATE#,'%Y-%m-%d')
        ]]>
            </isNotNull>
            <!-- 项目有效  项目结束时间大于当前时间 -->
            <isNotNull property="planEndDate" prepend="and">
                <![CDATA[
      	 pi.plan_end_date >= date_format(#planEndDate:DATE#,'%Y-%m-%d')
        ]]>
            </isNotNull>
        </dynamic>
    </select>

    <select id="countByProjectInfoStatByTimerr" resultClass="java.lang.Integer"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        SELECT count(1)
        FROM tbl_project_info pi,tbl_employee_info ei,tbl_project_etc pe
        where ei.EMPLOYEE_ID = pe.employee_id
        AND pe.contract_no = pi.contract_no
        <dynamic>
            <isNotNull property="departmentId" prepend="and">
                pi.department_id = #departmentId:VARCHAR#
            </isNotNull>
            <isNotNull property="companyId" prepend="and">
                pi.COMPANY_ID = #companyId:VARCHAR#
            </isNotNull>
            <isNotNull property="projectName" prepend="and">
                pi.project_name like concat('%', #projectName:VARCHAR#, '%')
            </isNotNull>
            <isNotNull property="employeeName" prepend="and">
                ei.EMPLOYEE_NAME like concat('%', #employeeName:VARCHAR#, '%')
            </isNotNull>
            <!-- 项目无效    项目结束时间小于当前日期 没有多余字段直接使用 planStartDate 作为结束时间 -->
            <isNotNull property="planStartDate" prepend="and">
                <![CDATA[
      	 pi.plan_end_date <= date_format(#planStartDate:DATE#,'%Y-%m-%d')
        ]]>
            </isNotNull>
            <!-- 项目有效  项目结束时间大于当前时间 -->
            <isNotNull property="planEndDate" prepend="and">
                <![CDATA[
      	 pi.plan_end_date >= date_format(#planEndDate:DATE#,'%Y-%m-%d')
        ]]>
            </isNotNull>
        </dynamic>
    </select>


    <!--查询项目 区分地区和公司 -->
    <select id="selectByProjectInfoByPageStatByAREA" resultMap="resultMapExt"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        SELECT *
        FROM tbl_project_info pi ,tbl_department_info dep
        where dep.DEPARTMENT_ID = pi.department_id
        <isNotNull property="area" prepend="and">
            dep.area = #area:VARCHAR#
        </isNotNull>
        <isNotNull property="departmentId" prepend="and">
            pi.department_id = #departmentId:VARCHAR#
        </isNotNull>
        <isNotNull property="companyId" prepend="and">
            pi.COMPANY_ID = #companyId:VARCHAR#
        </isNotNull>
        <isNotNull property="projectName" prepend="and">
            pi.project_name like concat('%', #projectName:VARCHAR#, '%')
        </isNotNull>
        <!-- 项目无效    项目结束时间小于当前日期 没有多余字段直接使用 planStartDate 作为结束时间 -->
        <isNotNull property="planStartDate" prepend="and">
            <![CDATA[
        pi.plan_end_date <= date_format(#planStartDate:DATE#,'%Y-%m-%d')
      ]]>
        </isNotNull>
        <!-- 项目有效  项目结束时间大于当前时间 -->
        <isNotNull property="planEndDate" prepend="and">
            <![CDATA[
        pi.plan_end_date >= date_format(#planEndDate:DATE#,'%Y-%m-%d')
      ]]>
        </isNotNull>
        <isNotNull property="array" prepend="and">
            pi.contract_no in
            <iterate property="array" close=")" open="(" conjunction=",">
                <![CDATA[ #array[]# ]]>
            </iterate>
        </isNotNull>
    </select>


    <!--查询项目 区分地区和公司 -->
    <select id="selectByProjectInfoByPageStatByAREAA" resultMap="resultMapExtt"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        <!--SELECT ei.EMPLOYEE_NAME,pi.*,dep.*-->
        <!--FROM tbl_project_info pi ,tbl_department_info dep ,tbl_employee_info ei ,tbl_project_etc pe-->
        <!--where dep.DEPARTMENT_ID = pi.department_id-->
        <!--AND ei.EMPLOYEE_ID = pe.employee_id-->
        <!--AND pe.contract_no = pi.contract_no-->
        <!--<isNotNull property="area" prepend="and">-->
        <!--dep.area = #area:VARCHAR#-->
        <!--</isNotNull>-->
        <!--<isNotNull property="departmentId" prepend="and">-->
        <!--pi.department_id = #departmentId:VARCHAR#-->
        <!--</isNotNull>-->
        <!--<isNotNull property="companyId" prepend="and">-->
        <!--pi.COMPANY_ID = #companyId:VARCHAR#-->
        <!--</isNotNull>-->
        <!--<isNotNull property="projectName" prepend="and">-->
        <!--pi.project_name like concat('%', #projectName:VARCHAR#, '%')-->
        <!--</isNotNull>-->
        <!--<isNotNull property="employeeName" prepend="and">-->
        <!--ei.EMPLOYEE_NAME like concat('%', #employeeName:VARCHAR#, '%')-->
        <!--</isNotNull>-->
        <!--&lt;!&ndash; 项目无效    项目结束时间小于当前日期 没有多余字段直接使用 planStartDate 作为结束时间 &ndash;&gt;-->
        <!--<isNotNull property="planStartDate" prepend="and">-->
        <!--<![CDATA[-->
        <!--pi.plan_end_date <= date_format(#planStartDate:DATE#,'%Y-%m-%d')-->
        <!--]]>-->
        <!--</isNotNull>-->
        <!--&lt;!&ndash; 项目有效  项目结束时间大于当前时间 &ndash;&gt;-->
        <!--<isNotNull property="planEndDate" prepend="and">-->
        <!--<![CDATA[-->
        <!--pi.plan_end_date >= date_format(#planEndDate:DATE#,'%Y-%m-%d')-->
        <!--]]>-->
        <!--</isNotNull>-->
        <!--<isNotNull property="array" prepend="and">-->
        <!--pi.contract_no  in-->
        <!--<iterate property="array"  close=")" open="("  conjunction=",">-->
        <!--<![CDATA[ #array[]# ]]>-->
        <!--</iterate>-->
        <!--</isNotNull>-->
        SELECT tbl.*,ei.EMPLOYEE_NAME
        FROM (SELECT
        ei.EMPLOYEE_NAME AS empName,
        ei.EMPLOYEE_ID empId,
        pe.contract_no conNo,
        pi.*
        FROM
        tbl_employee_info ei,
        tbl_project_etc pe,
        tbl_project_info pi
        WHERE
        ei.EMPLOYEE_ID = pe.employee_id
        AND pi.contract_no = pe.contract_no
        AND ei.EMPLOYEE_NAME like concat('%', #employeeName:VARCHAR#, '%')) tbl LEFT JOIN tbl_employee_info ei
        on tbl.EMPLOYEE_ID = ei.EMPLOYEE_ID
    </select>
    <!--查询项目 区分地区和公司 -->
    <select id="countByProjectInfoStatByAREAA" resultClass="java.lang.Integer"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        SELECT count(1)
        FROM tbl_project_info pi ,tbl_employee_info ei,tbl_project_etc pe
        where ei.EMPLOYEE_ID = pe.employee_id
        AND pe.contract_no = pi.contract_no
        <!--<isNotNull property="area" prepend="and">-->
        <!--dep.area = #area:VARCHAR#-->
        <!--</isNotNull>-->
        <isNotNull property="departmentId" prepend="and">
            pi.department_id = #departmentId:VARCHAR#
        </isNotNull>
        <isNotNull property="companyId" prepend="and">
            pi.COMPANY_ID = #companyId:VARCHAR#
        </isNotNull>
        <isNotNull property="projectName" prepend="and">
            pi.project_name like concat('%', #projectName:VARCHAR#, '%')
        </isNotNull>
        <isNotNull property="employeeName" prepend="and">
            ei.EMPLOYEE_NAME like concat('%', #employeeName:VARCHAR#, '%')
        </isNotNull>
        <!-- 项目无效    项目结束时间小于当前日期 没有多余字段直接使用 planStartDate 作为结束时间 -->
        <isNotNull property="planStartDate" prepend="and">
            <![CDATA[
      	 pi.plan_end_date <= date_format(#planStartDate:DATE#,'%Y-%m-%d')
        ]]>
        </isNotNull>
        <!-- 项目有效  项目结束时间大于当前时间 -->
        <isNotNull property="planEndDate" prepend="and">
            <![CDATA[
      	 pi.plan_end_date >= date_format(#planEndDate:DATE#,'%Y-%m-%d')
        ]]>
        </isNotNull>
        <isNotNull property="array" prepend="and">
            pi.contract_no in
            <iterate property="array" close=")" open="(" conjunction=",">
                <![CDATA[ #array[]# ]]>
            </iterate>
        </isNotNull>
    </select>


    <select id="countByProjectInfoStatByAREA" resultClass="java.lang.Integer"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        SELECT count(1)
        FROM tbl_project_info pi ,tbl_department_info dep
        where dep.DEPARTMENT_ID = pi.department_id
        <isNotNull property="area" prepend="and">
            dep.area = #area:VARCHAR#
        </isNotNull>
        <isNotNull property="departmentId" prepend="and">
            pi.department_id = #departmentId:VARCHAR#
        </isNotNull>
        <isNotNull property="companyId" prepend="and">
            pi.COMPANY_ID = #companyId:VARCHAR#
        </isNotNull>
        <isNotNull property="projectName" prepend="and">
            pi.project_name like concat('%', #projectName:VARCHAR#, '%')
        </isNotNull>
        <!-- 项目无效    项目结束时间小于当前日期 没有多余字段直接使用 planStartDate 作为结束时间 -->
        <isNotNull property="planStartDate" prepend="and">
            <![CDATA[
      	 pi.plan_end_date <= date_format(#planStartDate:DATE#,'%Y-%m-%d')
        ]]>
        </isNotNull>
        <!-- 项目有效  项目结束时间大于当前时间 -->
        <isNotNull property="planEndDate" prepend="and">
            <![CDATA[
      	 pi.plan_end_date >= date_format(#planEndDate:DATE#,'%Y-%m-%d')
        ]]>
        </isNotNull>
        <isNotNull property="array" prepend="and">
            pi.contract_no in
            <iterate property="array" close=")" open="(" conjunction=",">
                <![CDATA[ #array[]# ]]>
            </iterate>
        </isNotNull>
    </select>


    <!-- 查询所有的项目 -->
    <select id="selectAllProjectInfo" resultMap="BaseResultMap"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        SELECT * FROM tbl_project_info tpi ,tbl_department_info tdi
        where 1=1 and tpi.department_id = tdi.DEPARTMENT_ID
        <isNotNull prepend="and" property="departmentId">
            tpi.department_id = #departmentId:CHAR#
        </isNotNull>
        <isNotNull prepend="and" property="companyId">
            tpi.COMPANY_ID = #companyId:VARCHAR#
        </isNotNull>
        <isNotNull prepend="and" property="contractNo">
            tpi.contract_no = #contractNo:VARCHAR#
        </isNotNull>
        <isNotNull prepend="and" property="planEndDate">
            <![CDATA[
      		date_format(tpi.plan_end_date,'%Y-%m-%d')>= date_format(#planEndDate:DATE#,'%Y-%m-%d')
         ]]>
        </isNotNull>
        <isNotNull prepend="and" property="area">
            tdi.area = #area:VARCHAR#
        </isNotNull>
    </select>
    <!-- 根据roleId查询所有的项目 -->
    <select id="selectAllProjectInfo2" resultMap="BaseResultMap"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        <!--select * from tbl_project_info WHERE  contract_no-->

        <!--in(-->
        <!--select ROLE_ENTILENMENT from tbl_project_menu WHERE  ROLE_ID = #roleId:VARCHAR# AND ROLE_CHECKED=1 AND LENGTH(ROLE_ENTILENMENT)=11-->
        <!--)-->
        <!--<isNotNull prepend="and" property="departmentId" >-->
        <!--department_id = #departmentId:VARCHAR#-->
        <!--</isNotNull>-->
        SELECT * FROM tbl_project_info tpi
        where 1=1
        <isNotNull prepend="and" property="departmentId">
            tpi.department_id = #departmentId:CHAR#
        </isNotNull>
        <isNotNull prepend="and" property="companyId">
            tpi.COMPANY_ID = #companyId:VARCHAR#
        </isNotNull>
        <isNotNull prepend="and" property="contractNo">
            tpi.contract_no = #contractNo:VARCHAR#
        </isNotNull>
        <isNotNull prepend="and" property="planEndDate">
            <![CDATA[
      		date_format(tpi.plan_end_date,'%Y-%m-%d')>= date_format(#planEndDate:DATE#,'%Y-%m-%d')
         ]]>
        </isNotNull>
        <!--<isNotNull prepend="and" property="area" >-->
        <!--tdi.area = #area:VARCHAR#-->
        <!--</isNotNull>-->
    </select>
    <!-- 查询客户的项目 -->
    <select id="getCustomerProjectById" resultMap="BaseResultMap" parameterClass="java.lang.String">
    select pro.* from tbl_customer_project_ref ref , tbl_project_info pro
    where pro.contract_no = ref.contract_no
    and ref.customer_id =#value:VARCHAR#
  </select>

    <!-- 查询所有的项目 -->
    <select id="selectProjectInfoByDepartMentId" resultMap="BaseResultMap" parameterClass="java.lang.String">
   	 SELECT * FROM tbl_project_info where department_id= #value:VARCHAR# 
  </select>
    <!--  查询单个项目信息 -->
    <select id="getProjectByDaoEmpid" resultMap="resultMapExt" parameterClass="java.util.HashMap">
        <!--
           SELECT * FROM tbl_project_info where employee_id= #employeeId:VARCHAR#
           -->
        select o.*
        from tbl_project_info o,tbl_project_etc tc
        where o.contract_no = tc.contract_no and
        tc.employee_id= #employeeIds:VARCHAR# and
        o.COMPANY_ID = #companyIds:VARCHAR#
        and tc.is_leave='00'
    </select>
    <!-- 项目权限菜单 -->
    <select id="getProjectByMenu" resultClass="java.util.HashMap"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
    select
        dep.DEPARTMENT_ID as departmentid,
        dep.DEPARTMENT_NAME as departmentname,
        pro.contract_no as contractno,
        pro.project_name as shortname
    from  tbl_project_info pro ,tbl_department_info dep
    where pro.department_id = dep.DEPARTMENT_ID
    ORDER BY dep.DEPARTMENT_NAME
  </select>

    <select id="getProjectBycontractNo" resultMap="BaseResultMap" parameterClass="java.lang.String">
    select *
    from
     tbl_project_info
    where
    tbl_project_info.contract_no =#contractNo:VARCHAR#
  </select>

    <select id="selectProjectNameBycontractNo" resultClass="java.lang.String"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
    select project_name
    from
     tbl_project_info
    where
    contract_no =#contractNo:VARCHAR#
  </select>

    <select id="selectSimProjectInfo" resultMap="SimpleMap"
            parameterClass="com.i2shopping.i2work.operation.core.project.model.ProjectInfo">
        SELECT contract_no,project_name,department_id,project_actual_no
        FROM tbl_project_info
        where 1=1
        <dynamic>
            <include refid="tbl_project_info.project_Where_Clause"/>
        </dynamic>
        and plan_end_date > now()
    </select>
    <select id="selectProjectByRoleId" parameterClass="java.lang.String" resultMap="BaseResultMap">
        select a.*
                from tbl_project_info a,tbl_project_menu b
                where a.contract_no = b.role_entilenment
                and b.role_checked = '1'
                and b.role_id = #roleId:VARCHAR#
    </select>
</sqlMap>