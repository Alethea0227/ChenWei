<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="tbl_employee_income_expenditure_info" >
    <resultMap id="BaseResultMap" class="com.i2shopping.i2work.operation.core.incomeexpenditure.model.IncomeExpenditureInfo" >
        <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Thu Apr 19 15:03:50 CST 2012.
        -->

        <result column="incomeExpenditure_id" property="incomeExpenditureId" jdbcType="VARCHAR" />
        <result column="employee_id" property="employeeId" jdbcType="VARCHAR" />
        <result column="department_id" property="departmentId" jdbcType="VARCHAR" />
        <result column="contant_no" property="contantNo" jdbcType="VARCHAR" />
        <result column="employee_money" property="employeeMoney" jdbcType="VARCHAR" />
        <result column="employee_social_security" property="employeeSocialSecurity" jdbcType="VARCHAR" />
        <result column="employee_accumulation_fund" property="employeeAccumulationFund" jdbcType="VARCHAR" />
        <result column="employee_meal_supplement" property="employeeMealSupplement" jdbcType="VARCHAR" />
        <result column="employee_pc_subsidy" property="employeePcSubsidy" jdbcType="VARCHAR" />
        <result column="employee_late_subsidy" property="employeeLateSubsidy" jdbcType="VARCHAR" />
        <result column="employee_other_subsidy" property="employeeOtherSubsidy" jdbcType="VARCHAR" />
        <result column="employee_expense" property="employeeExpense" jdbcType="VARCHAR" />
        <result column="export_time" property="exportTime" jdbcType="VARCHAR" />
        <result column="rename1" property="rename1" jdbcType="VARCHAR" />
        <result column="rename2" property="rename2" jdbcType="VARCHAR" />
        <result column="rename3" property="rename3" jdbcType="VARCHAR" />
    </resultMap>

    <select id="selectByIncomeExpenditure" resultMap="BaseResultMap" parameterClass="com.i2shopping.i2work.operation.core.incomeexpenditure.model.IncomeExpenditureInfo" >
        select * from tbl_employee_income_expenditure_info
        <dynamic prepend="where" >
            <isNotNull prepend="and" property="incomeExpenditureId" >
                incomeExpenditure_id = #incomeExpenditureId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="and" property="employeeId" >
                employee_id = #employeeId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="and" property="departmentId" >
                department_id = #departmentId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="and" property="contantNo" >
                contant_no = #contantNo:VARCHAR#
            </isNotNull>
            <isNotNull prepend="and" property="employeeMoney" >
                employee_money = #employeeMoney:VARCHAR#
            </isNotNull>
            <isNotNull prepend="and" property="employeeSocialSecurity" >
                employee_social_security = #employeeSocialSecurity:VARCHAR#
            </isNotNull>
            <isNotNull prepend="and" property="employeeAccumulationFund" >
                employee_accumulation_fund = #employeeAccumulationFund:VARCHAR#
            </isNotNull>
            <isNotNull prepend="and" property="employeeMealSupplement" >
                employee_meal_supplement = #employeeMealSupplement:VARCHAR#
            </isNotNull>
            <isNotNull prepend="and" property="employeePcSubsidy" >
                employee_pc_subsidy = #employeePcSubsidy:VARCHAR#
            </isNotNull>
            <isNotNull prepend="and" property="employeeLateSubsidy" >
                employee_late_subsidy = #employeeLateSubsidy:VARCHAR#
            </isNotNull>
            <isNotNull prepend="and" property="employeeOtherSubsidy" >
                employee_other_subsidy = #employeeOtherSubsidy:VARCHAR#
            </isNotNull>
            <isNotNull prepend="and" property="employeeExpense" >
                employee_expense = #employeeExpense:VARCHAR#
            </isNotNull>
            <isNotNull prepend="and" property="exportTime" >
                export_time = #exportTime:VARCHAR#
            </isNotNull>
            <isNotNull prepend="and" property="rename1" >
                rename1 = #rename1:VARCHAR#
            </isNotNull>
            <isNotNull prepend="and" property="rename2" >
                rename2 = #rename2:VARCHAR#
            </isNotNull>
            <isNotNull prepend="and" property="rename3" >
                rename3 = #rename3:VARCHAR#
            </isNotNull>
        </dynamic>
        order by export_time desc;
    </select>
    <!-- 查询最近的导入的员工预算 -->
    <select id="selectByIncomeExpenditureOrderByExportTime" resultMap="BaseResultMap" parameterClass="com.i2shopping.i2work.operation.core.incomeexpenditure.model.IncomeExpenditureInfo" >
            SELECT * FROM (
                SELECT
                    tei.incomeExpenditure_id,
                    tei.employee_id,
                    tei.department_id,
                    tei.contant_no,
                    tei.employee_money,
                    tei.employee_social_security,
                    tei.employee_accumulation_fund,
                    tei.employee_meal_supplement,
                    tei.employee_pc_subsidy,
                    tei.employee_late_subsidy,
                    tei.employee_other_subsidy,
                    tei.employee_expense,
                    tei.export_time,
                    tei.rename1,
                    tei.rename2,
                    tei.rename3
                FROM tbl_employee_income_expenditure_info tei,tbl_employee_info emp
                WHERE tei.employee_id = emp.EMPLOYEE_ID AND emp.IS_ON_DUTY = '01' ORDER BY tei.export_time DESC
           )A GROUP BY A.employee_id
    </select>
    <insert id="insertIncomeExpenditureSelective" parameterClass="com.i2shopping.i2work.operation.core.incomeexpenditure.model.IncomeExpenditureInfo" >
        <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Wed Jul 08 17:48:50 CST 2015.
        -->
        insert into tbl_employee_income_expenditure_info
        <dynamic prepend="(" >
            <isNotEmpty prepend="," property="incomeExpenditureId" >
                incomeExpenditure_id
            </isNotEmpty>
            <isNotEmpty prepend="," property="employeeId" >
                employee_id
            </isNotEmpty>
            <isNotEmpty prepend="," property="departmentId" >
                department_id
            </isNotEmpty>
            <isNotEmpty prepend="," property="contantNo" >
                contant_no
            </isNotEmpty>
            <isNotEmpty prepend="," property="employeeMoney" >
                employee_money
            </isNotEmpty>
            <isNotEmpty prepend="," property="employeeSocialSecurity" >
                employee_social_security
            </isNotEmpty>
            <isNotEmpty prepend="," property="employeeAccumulationFund" >
                employee_accumulation_fund
            </isNotEmpty>
            <isNotEmpty prepend="," property="employeeMealSupplement" >
                employee_meal_supplement
            </isNotEmpty>
            <isNotEmpty prepend="," property="employeePcSubsidy" >
                employee_pc_subsidy
            </isNotEmpty>
            <isNotEmpty prepend="," property="employeeLateSubsidy" >
                employee_late_subsidy
            </isNotEmpty>
            <isNotEmpty prepend="," property="employeeOtherSubsidy" >
                employee_other_subsidy
            </isNotEmpty>
            <isNotEmpty prepend="," property="employeeExpense" >
                employee_expense
            </isNotEmpty>
            <isNotEmpty prepend="," property="exportTime" >
                export_time
            </isNotEmpty>
            <isNotEmpty prepend="," property="rename1" >
                rename1
            </isNotEmpty>
            <isNotEmpty prepend="," property="rename2" >
                rename2
            </isNotEmpty>
            <isNotEmpty prepend="," property="rename3" >
                rename3
            </isNotEmpty>
            )
        </dynamic>
        values
        <dynamic prepend="(" >
            <isNotEmpty prepend="," property="incomeExpenditureId" >
                #incomeExpenditureId:VARCHAR#
            </isNotEmpty>
            <isNotEmpty prepend="," property="employeeId" >
                #employeeId:VARCHAR#
            </isNotEmpty>
            <isNotEmpty prepend="," property="departmentId" >
               #departmentId:VARCHAR#
            </isNotEmpty>
            <isNotEmpty prepend="," property="contantNo" >
              #contantNo:VARCHAR#
            </isNotEmpty>
            <isNotEmpty prepend="," property="employeeMoney" >
               #employeeMoney:VARCHAR#
            </isNotEmpty>
            <isNotEmpty prepend="," property="employeeSocialSecurity" >
               #employeeSocialSecurity:VARCHAR#
            </isNotEmpty>
            <isNotEmpty prepend="," property="employeeAccumulationFund" >
               #employeeAccumulationFund:VARCHAR#
            </isNotEmpty>
            <isNotEmpty prepend="," property="employeeMealSupplement" >
               #employeeMealSupplement:VARCHAR#
            </isNotEmpty>
            <isNotEmpty prepend="," property="employeePcSubsidy" >
               #employeePcSubsidy:VARCHAR#
            </isNotEmpty>
            <isNotEmpty prepend="," property="employeeLateSubsidy" >
               #employeeLateSubsidy:VARCHAR#
            </isNotEmpty>
            <isNotEmpty prepend="," property="employeeOtherSubsidy" >
               #employeeOtherSubsidy:VARCHAR#
            </isNotEmpty>
            <isNotEmpty prepend="," property="employeeExpense" >
               #employeeExpense:VARCHAR#
            </isNotEmpty>
            <isNotEmpty prepend="," property="exportTime" >
               #exportTime:VARCHAR#
            </isNotEmpty>
            <isNotEmpty prepend="," property="rename1" >
               #rename1:VARCHAR#
            </isNotEmpty>
            <isNotEmpty prepend="," property="rename2" >
               #rename2:VARCHAR#
            </isNotEmpty>
            <isNotEmpty prepend="," property="rename3" >
               #rename3:VARCHAR#
            </isNotEmpty>
            )
        </dynamic>
    </insert>


    <update id="updateByPrimaryKeySelective" parameterClass="com.i2shopping.i2work.operation.core.incomeexpenditure.model.IncomeExpenditureInfo" >
        <!--
          WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
          This element was generated on Wed Jul 08 17:48:50 CST 2015.
        -->
        update tbl_employee_income_expenditure_info
        <dynamic prepend="set" >
            <isNotNull prepend="," property="incomeExpenditureId" >
                incomeExpenditure_id = #incomeExpenditured:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeId" >
                employee_id = #employeeId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="departmentId" >
                department_id = #departmentId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="contantNo" >
                contant_no = #contantNo:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeMoney" >
                employee_money = #employeeMoney:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeSocialSecurity" >
                employee_social_security = #employeeSocialSecurity:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeAccumulationFund" >
                employee_accumulation_fund = #employeeAccumulationFund:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeMealSupplement" >
                employee_meal_supplement = #employeeMealSupplement:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeePcSubsidy" >
                employee_pc_subsidy = #employeePcSubsidy:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeLateSubsidy" >
                employee_late_subsidy = #employeeLateSubsidy:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeOtherSubsidy" >
                employee_other_subsidy = #employeeOtherSubsidy:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="employeeExpense" >
                employee_expense = #employeeExpense:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="exportTime" >
                export_time = #exportTime:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="rename1" >
                rename1 = #rename1:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="rename2" >
                rename2 = #rename2:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="rename3" >
                rename3 = #rename3:VARCHAR#
            </isNotNull>
        </dynamic>
        where employee_id = #employeeId:VARCHAR#
    </update>


</sqlMap>